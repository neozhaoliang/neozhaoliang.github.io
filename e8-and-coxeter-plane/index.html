<!DOCTYPE HTML>
<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHQJ7GP8MM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-SHQJ7GP8MM');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    

        <title>
            The E8 picture explained through code | 朝花夕拾</title>
    <meta name="author" content="Zhao Liang">
    
    <meta name="description" content="If you have heard of Lie algebras, chances are you have encountered
the following pattern: (Refer to Wikipedia’s Lie algebra
entry)

It displays the r">
    
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="og:title" content="The E8 picture explained through code"/>
    <meta property="og:site_name" content="朝花夕拾"/>

    
    <meta property="og:image" content=""/>
    

    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" href="/atom.xml" title="朝花夕拾" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/materialize.min.css">
    <link rel="stylesheet" href="/css/lib/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/desert.css" type="text/css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

    <body>
        <img src="/favicon.png" style="position: absolute; left: -9999px; opacity: 0; filter: alpha(opacity=0);">

        <nav class="indigo">
    <div class="nav-wrapper">
        <a href="#" data-activates="main-menu" class="button-collapse">
            <i class="fa fa-navicon"></i>
        </a>
        <div class="">
            <a href="/" class="brand-logo hide-on-med-and-down">朝花夕拾</a>
            <ul class="right hide-on-med-and-down">
                
                    <li>
                        <a class="menu-home " href="/" >
                            <i class="fa fa-home "></i>
                            
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-archive " href="/archives" >
                            <i class="fa fa-archive "></i>
                            
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                            <i class="fa fa-bookmark "></i>
                            
                            分类
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-about " href="/about" >
                            <i class="fa fa-user "></i>
                            
                            关于
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-search modal-trigger " href="#search" >
                            <i class="fa fa-search "></i>
                            
                            搜索
                        </a>
                    </li>
                
            </ul>
            <div>
    <ul class="side-nav indigo darken-1" id="main-menu">
        
        <li class="side-user">
            <div class="row">
                <div class="col s4 no-padding">
                    <img class="avatar-image circle responsive-img" src="/favicon.png" alt="User Avatar">
                </div>
                <div class="info col s8 valign-wrapper no-padding">
                    <div class="valign">
                        <p class="name">Zhao Liang</p>
                        <p class="desc">math &amp;&amp; programming</p>
                    </div>
                </div>
            </div>
        </li>
        

        
            <li class="no-padding">
                <a class="waves-effect menu-home " href="/" >
                    <i class="fa fa-home "></i>
                    
                    首页
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-archive " href="/archives" >
                    <i class="fa fa-archive "></i>
                    
                    归档
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                    <i class="fa fa-bookmark "></i>
                    
                    分类
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-about " href="/about" >
                    <i class="fa fa-user "></i>
                    
                    关于
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-search modal-trigger " href="#search" >
                    <i class="fa fa-search "></i>
                    
                    搜索
                </a>
            </li>
        
    </ul>

    <ul class="side-nav indigo darken-1" id="category-menu">
    

            

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Durrett-概率论批判/">
                    Durrett-概率论批判 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/pywonderland-项目/">
                    pywonderland-项目 <span class="right">6 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Shadertoy/">
                    Shadertoy <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/线性代数/">
                    线性代数 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/有限群表示与结合代数/">
                    有限群表示与结合代数 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/代数/">
                    代数 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/可视化复分析/">
                    可视化复分析 <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Williams-概率和鞅/">
                    Williams-概率和鞅 <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/计数组合学/">
                    计数组合学 <span class="right">2 篇</span></a>
                </a>
            </li>

        

    </ul>
</div>

        </div>
    </div>
</nav>

<div id="search" class="modal search-modal">
    <div class="row">
        <div class="input-field col s12">
              <input id="search-input" type="text">
              <label for="search-input">搜索</label>
        </div>

    </div>
    <div id="search-result" class="search-result col s12">

    </div>
</div>


            <main>
                <div class="container main-container">
    <nav class="page-nav hide-on-small-only">
    <div class="nav-wrapper indigo">
        <span class="breadcrumb">当前位置（分类目录）</span>
        
            

        

        
    </div>
</nav>

    <article>
        <div class="card">
            <div class="card-content">
                

                            <div class="article-title">
                                
    
        <h1>The E8 picture explained through code</h1>
    


                            </div>
                            <time class="pink-link-context" datetime="2024-02-28T16:00:00.000Z"><a href="/e8-and-coxeter-plane/index.html">2024-02-29</a></time>

                                

                                    <div class="toc pink-link-context hide-on-med-and-down">
    <ol class="section table-of-contents"><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-structure-of-e_8"><span class="section table-of-contents-text">The Structure of \(E_8\)</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#coxeter-element"><span class="section table-of-contents-text">Coxeter Element</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#coxeter-plane"><span class="section table-of-contents-text">Coxeter Plane</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#further-improvement"><span class="section table-of-contents-text">Further Improvement</span></a></li></ol>
</div>

                                        
                                            <div class="entry pink-link-context">
                                                
<p>If you have heard of Lie algebras, chances are you have encountered
the following pattern: (Refer to Wikipedia’s <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Lie_algebra">Lie algebra
entry</a>)</p>
<p><img style="margin:0px auto;display:block" src="/images/coxeter-element/e8.svg" width="350"></p>
<p>It displays the root system diagram for the Lie algebra <span class="math inline">\(E_8\)</span>, which consists of 240 vectors in an
eight-dimensional Euclidean space <span class="math inline">\(\mathbb{R}^8\)</span>, each vector having exactly
56 nearest neighbors. Projecting these 240 vectors onto a special
two-dimensional plane (known as the Coxeter plane) reveals a
rotationally symmetric pattern, as seen in the figure above, where the
240 projected points are distributed across 8 concentric circles, each
containing 30 evenly spaced vertices, thus remaining invariant under a
rotation of angle <span class="math inline">\(\frac{2\pi}{30}\)</span>.
The number <span class="math inline">\(h=30\)</span> is called the
Coxeter number of <span class="math inline">\(E_8\)</span>.</p>
<p>This phenomenon is not unique to <span class="math inline">\(E_8\)</span> but holds for any finite Coxeter
group, as illustrated by the following figure, which shows the pattern
obtained by projecting the 32 vertices of a 5-dimensional hypercube and
its edges onto its Coxeter plane:</p>
<p><img style="margin:0px auto;display:block" src="/images/coxeter-element/5-cube.svg" width="350"></p>
<p>Two vertices are projected to the origin, with the remaining 30
vertices distributed across 3 concentric circles, each containing 10
evenly spaced vertices. Hence the Coxeter number is <span class="math inline">\(h=10\)</span>.</p>
<p>In this blog post I will use <span class="math inline">\(E_8\)</span>
as an example to explain the mathematics behind this, following the
presentation in section 3.16 of Humphreys’ textbook “Reflection Groups
and Coxeter Groups”.</p>
<p>The code for this article is available on <a target="_blank" rel="noopener" href="https://github.com/neozhaoliang/pywonderland/raw/master/src/misc/E8.py">GitHub</a>.</p>
<p>David Madore also has a beautiful <a target="_blank" rel="noopener" href="http://www.madore.org/~david/math/e8w.html">interactive demo</a>
that can draw the root system of <span class="math inline">\(E_8\)</span> in various ways.</p>
<h1 id="the-structure-of-e_8">The Structure of <span class="math inline">\(E_8\)</span></h1>
<p>We know that the Dynkin diagram of <span class="math inline">\(E_8\)</span> is as follows:</p>
<p><img style="margin:0px auto;display:block" src="/images/coxeter-element/e8-dynkin.svg" width="400"></p>
<p>A set of simple roots is given by</p>
<p><span class="math display">\[\Delta=\begin{bmatrix}1&amp;-1&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0\\0&amp;1&amp;-1&amp;0&amp;0&amp;0&amp;0&amp;0\\0&amp;0&amp;1&amp;-1&amp;0&amp;0&amp;0&amp;0\\0&amp;0&amp;0&amp;1&amp;-1&amp;0&amp;0&amp;0\\0&amp;0&amp;0&amp;0&amp;1&amp;-1&amp;0&amp;0\\0&amp;0&amp;0&amp;0&amp;0&amp;1&amp;1&amp;0\\-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}&amp;-\frac{1}{2}\\0&amp;0&amp;0&amp;0&amp;0&amp;1&amp;-1&amp;0\end{bmatrix}.\]</span></p>
<p>Here, the vertex numbered <span class="math inline">\(i\)</span> in
the Dynkin diagram corresponds to the simple root <span class="math inline">\(\alpha_i\)</span>, which is the <span class="math inline">\(i\)</span>th row of the matrix. Note that each
simple root has a length of <span class="math inline">\(\sqrt{2}\)</span>, hence not a unit vector. This
is mainly for convenience in later computations.</p>
<p>The Cartan matrix is given by</p>
<p><span class="math display">\[C=\left((\alpha_i,\alpha_j)\right)_{1\leq i,j\leq
8}=\begin{pmatrix}2&amp;-1&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0\\-1&amp;2&amp;-1&amp;0&amp;0&amp;0&amp;0&amp;0\\0&amp;-1&amp;2&amp;-1&amp;0&amp;0&amp;0&amp;0\\0&amp;0&amp;-1&amp;2&amp;-1&amp;0&amp;0&amp;0\\0&amp;0&amp;0&amp;-1&amp;2&amp;-1&amp;0&amp;-1\\0&amp;0&amp;0&amp;0&amp;-1&amp;2&amp;-1&amp;0\\0&amp;0&amp;0&amp;0&amp;0&amp;-1&amp;2&amp;0\\0&amp;0&amp;0&amp;0&amp;-1&amp;0&amp;0&amp;2\end{pmatrix}.\]</span></p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>Here’s a point that can be easily confusing: please remember that
in the mathematical derivations in this article, the inner product we
use is the one given by the Cartan matrix <span class="math inline">\(C\)</span>. However, in the actual code, we can
directly call <code>np.dot</code> to calculate the inner product of two
vectors. The reasoning is as follows:</p>
<p>Let <span class="math inline">\(u=\sum_{i=1}^8 x_i\alpha_i\)</span>
and <span class="math inline">\(v=\sum_{i=1}^8 y_i\alpha_i\)</span> be
two vectors, and let <span class="math inline">\(X=(x_1,\ldots,x_8)\)</span> and <span class="math inline">\(Y=(y_1,\ldots,y_8)\)</span> be their coordinates
in the basis <span class="math inline">\(\Delta\)</span>. Also, let
<span class="math inline">\(u=(u_1,\ldots,u_8)\)</span> and <span class="math inline">\(v=(v_1,\ldots,v_8)\)</span> be their coordinates
in the standard basis <span class="math display">\[\{e_i=(0,\ldots,\underbrace{1}_{\text{$i$-th
position}},\ldots,0)\mid 1\leq i\leq 8\},\]</span> then their inner
product is <span class="math display">\[(u,v)=XCY'=X\Delta\Delta'Y'=\sum_{i=1}^8
u_i v_i = \mathrm{np.dot}(u,v).\]</span></p>
<p>From now on, we will no longer emphasize that <span class="math inline">\((\,,\,)\)</span> is the inner product under <span class="math inline">\(C\)</span>. But readers must be aware of this.</p>
</div>
<p>Each simple root <span class="math inline">\(\alpha_i\)</span>
corresponds to a simple reflection <span class="math inline">\(s_i\)</span>:</p>
<p><span class="math display">\[s_i(v) = v -
\frac{2(v,\alpha_i)}{(\alpha_i, \alpha_i)}\alpha_i =
v-(v,\alpha_i)\alpha_i,\quad 1\leq i\leq 8.\]</span></p>
<p>This expression shows the advantage of making each simple root <span class="math inline">\(\alpha_i\)</span> have a length of <span class="math inline">\(\sqrt{2}\)</span>: <span class="math inline">\(\alpha_i\)</span> is equal to its coroot <span class="math inline">\(\frac{2\alpha_i}{(\alpha_i,\alpha_i)}\)</span>,
resulting in the simple form of reflection about <span class="math inline">\(\alpha_i\)</span>.</p>
<p>To express this in code:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># A set of simple roots listed by rows of 'delta'</span><br>delta = np.array([<br>    [<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>    [-<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>],<br>    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>])<br><br><span class="hljs-comment"># The cartan matrix:</span><br>cartan = np.dot(delta, delta.transpose())<br></code></pre></td></tr></tbody></table></figure>
<p>The group <span class="math inline">\(W\)</span> generated by all
simple reflections <span class="math inline">\(\{s_i\}\)</span> is
called the Weyl group of <span class="math inline">\(E_8\)</span>,
containing 696729600 elements. The set <span class="math display">\[\Phi
= \{w\cdot\alpha\mid w\in W, \alpha\in\Delta\}\]</span> generated by the
action of the Weyl group on the simple roots is called the root system
of <span class="math inline">\(E_8\)</span>, containing 240 distinct
vectors, with <span class="math inline">\(W\)</span> acting on <span class="math inline">\(\Phi\)</span> by permutations.</p>
<p>The vectors in <span class="math inline">\(\Phi\)</span> can be
divided into two categories:</p>
<ol type="1">
<li>The first category includes all permutations of <span class="math inline">\((\pm1,\pm1,0,0,0,0,0,0)\)</span>, with two
components being <span class="math inline">\(+1\)</span> or <span class="math inline">\(-1\)</span> and the remaining six being 0. There
are 112 vectors of this type.</li>
<li>The second category includes vectors of the form <span class="math inline">\(1/2\times(\pm1,\pm1,\cdots,\pm1)\)</span>, where
the number of <span class="math inline">\(-1\)</span>s is even. There
are 128 vectors of this type.</li>
</ol>
<p><strong>For programming convenience, we will multiply all roots by 2
to make them integer vectors</strong>. Thus, the code to generate the
root system <span class="math inline">\(\Phi\)</span> can be written as
follows:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> itertools<br><br>roots = []<br><br><span class="hljs-comment"># Roots of the form (+-1, +-1, 0, 0, 0, 0, 0, 0),</span><br><span class="hljs-comment"># signs can be chosen independently and the two non-zeros can be anywhere.</span><br><span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> combinations(<span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>), <span class="hljs-number">2</span>):<br>    <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> product([-<span class="hljs-number">2</span>, <span class="hljs-number">2</span>], repeat=<span class="hljs-number">2</span>):<br>        v = np.zeros(<span class="hljs-number">8</span>)<br>        v[i] = x<br>        v[j] = y<br>        roots.append(v)<br><br><span class="hljs-comment"># Roots of the form 1/2 * (+-1, +-1, ..., +-1), signs can be chosen</span><br><span class="hljs-comment"># indenpendently except that there must be an even numer of -1s.</span><br><span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> product([-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], repeat=<span class="hljs-number">8</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(v) % <span class="hljs-number">4</span> == <span class="hljs-number">0</span>:<br>        roots.append(v)<br>roots = np.array(roots).astype(<span class="hljs-built_in">int</span>)<br><br><span class="hljs-comment"># Connect a root to its nearest neighbors,</span><br><span class="hljs-comment"># two roots are connected if and only if they form an angle of pi/3.</span><br>edges = []<br><span class="hljs-keyword">for</span> i, r <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(roots):<br>    <span class="hljs-keyword">for</span> j, s <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(roots[i + <span class="hljs-number">1</span> :], i + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> np.<span class="hljs-built_in">sum</span>((r - s) ** <span class="hljs-number">2</span>) == <span class="hljs-number">8</span>:<br>            edges.append([i, j])<br></code></pre></td></tr></tbody></table></figure>
<h1 id="coxeter-element">Coxeter Element</h1>
<blockquote>
<p><strong>Definition</strong>: An element <span class="math inline">\(\gamma\in W\)</span> obtained by arranging the
simple reflections <span class="math inline">\(s_1,\ldots,s_8\)</span>
in any order and then multiplying them is called a Coxeter element.</p>
</blockquote>
<p>Coxeter elements are not unique but are all conjugate to each other
<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Therefore, they share the same
order, characteristic polynomial, and eigenvalues.</p>
<blockquote>
<p><strong>Definition</strong>: The order of any Coxeter element is
called the Coxeter number of <span class="math inline">\(W\)</span>,
denoted by <span class="math inline">\(h\)</span>.</p>
</blockquote>
<p>Since <span class="math inline">\(\gamma\)</span> is an element of
the finite group <span class="math inline">\(W\)</span>, its 8
eigenvalues are of the form <span class="math display">\[\{\zeta^{m_1},\ldots,\zeta^{m_8},0\leq
m_i&lt;h\}.\]</span></p>
<p>where <span class="math inline">\(\zeta\)</span> is a primitive <span class="math inline">\(h\)</span>-th root of unity. Section 3.16 in
Humphrey’s boook shows that <span class="math inline">\(\gamma\)</span>’s eigenvalues cannot be 1, so each
<span class="math inline">\(1\leq m_i&lt;h\)</span>. If <span class="math inline">\(\gamma\)</span> has real eigenvalues, the only
possibility is <span class="math inline">\(-1\)</span> (corresponding to
<span class="math inline">\(\zeta^{h/2}\)</span>). <span class="math inline">\(\gamma\)</span>’s complex eigenvalues appear in
conjugate pairs, like <span class="math inline">\({\zeta^{m_i},\zeta^{h-m_i}}\)</span>.</p>
<p>A classical way to choose a Coxeter element is as follows: Note that
the eight vertices of <span class="math inline">\(E_8\)</span>’s Dynkin
diagram can be divided into two groups, <span class="math inline">\(\{1,
3, 5, 7\}\)</span> and <span class="math inline">\(\{2, 4, 6,
8\}\)</span>, with vertices within the same group not adjacent, hence
the corresponding simple reflections commute. Let <span class="math display">\[x=s_1s_3s_5s_7,\quad y=s_2s_4s_6s_8.\]</span>
Then <span class="math inline">\(\gamma=xy\)</span> is a Coxeter
element.</p>
<h1 id="coxeter-plane">Coxeter Plane</h1>
<p>Now let’s examine the Cartan matrix <span class="math inline">\(C\)</span>. We assert that <span class="math inline">\(C\)</span> has an eigenvector <span class="math inline">\({\bf c}\)</span> with all positive components and
a multiplicity of 1. Note that the diagonal entries of <span class="math inline">\(C\)</span> are all 2, and the off-diagonal entries
are non-positive, making <span class="math inline">\(2I-C\)</span> a
non-negative matrix. Since <span class="math inline">\(E_8\)</span> is
an irreducible root system, both <span class="math inline">\(C\)</span>
and <span class="math inline">\(2I-C\)</span> are irreducible matrices.
By the Frobenius-Perron theorem, the largest eigenvalue of <span class="math inline">\(2I-C\)</span> has a multiplicity of 1, and its
corresponding eigenvector <span class="math inline">\({\bf c}\)</span>
has all positive components. <span class="math inline">\({\bf
c}\)</span> is naturally the smallest eigenvalue’s corresponding
eigenvector of <span class="math inline">\(C\)</span>.</p>
<p>We can use <code>numpy.linalg.eigh</code> to find the eigenvalues and
eigenvectors of the Cartan matrix <span class="math inline">\(C\)</span>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">eigenvals, eigenvecs = np.linalg.eigh(cartan)<br>c = eigenvecs[:, <span class="hljs-number">0</span>]<br></code></pre></td></tr></tbody></table></figure>
<p>Where <code>eigenvecs</code> columns are all the eigenvectors of
<span class="math inline">\(C\)</span>, arranged in ascending order of
their eigenvalues. Therefore, the first column corresponds to the
smallest eigenvalue’s eigenvector, which is our desired <span class="math inline">\({\bf c}\)</span>.</p>
<p>Following the notation on page 77 of Humphreys’ book:</p>
<p>Let <span class="math inline">\({\omega_i,1\leq i\leq 8}\)</span> be
the dual basis of <span class="math inline">\(\Delta\)</span>, i.e.,
<span class="math display">\[(\alpha_i,\omega_j)=\delta_{ij}.\]</span>
Let <span class="math inline">\({\bf c}=(c_1,c_2,\ldots,c_8)\)</span>,
and define <span class="math display">\[\lambda = \sum_{i\in
I}c_i\omega_i,\quad \mu= \sum_{j\in J}c_j\omega_j.\]</span> Humphreys’
book shows that the two-dimensional plane <span class="math inline">\(P={\rm span}\{\lambda,\mu\}\)</span> remains
invariant under the actions of <span class="math inline">\(x,y\)</span>.
In fact, <span class="math inline">\(x,y\)</span> act as reflections on
<span class="math inline">\(P\)</span>, thus <span class="math inline">\(\gamma=xy\)</span> acts on <span class="math inline">\(P\)</span> as a rotation. The order of this
rotation is the order of <span class="math inline">\(\gamma\)</span>,
which is the Coxeter number <span class="math inline">\(h\)</span>.
Since <span class="math inline">\(\gamma\)</span> permutes the root
system <span class="math inline">\(\Phi\)</span>, projecting <span class="math inline">\(\Phi\)</span> onto plane <span class="math inline">\(P\)</span> theoretically should reveal a pattern
with <span class="math inline">\(h\)</span>-fold rotational symmetry.
(In fact, this is the image at the beginning of this article)</p>
<p>Using the direct definitions of <span class="math inline">\(\lambda,\mu\)</span> to compute the projection of
<span class="math inline">\(\Phi\)</span> onto <span class="math inline">\(P\)</span> is inconvenient because it involves the
dual basis <span class="math inline">\({\omega_i}\)</span>. We can
bypass the calculation of the dual basis. This is implicitly suggested
in the calculations on page 78 of Humphreys’ book:</p>
<p>If we define <span class="math display">\[\nu=\sum_{j\in
J}c_j\alpha_j.\]</span> Then <span class="math inline">\(\mu=(1-c)\lambda+\nu\)</span> and <span class="math inline">\(\nu\perp\lambda\)</span>. This amounts to say that
<span class="math inline">\(\nu\)</span> is the component of <span class="math inline">\(\mu\)</span> perpendicular to <span class="math inline">\(\lambda\)</span>. Similarly, if we define <span class="math display">\[\nu'=\sum_{i\in I}c_i\alpha_i.\]</span> Then
<span class="math inline">\(\nu'\)</span> is the component of <span class="math inline">\(\lambda\)</span> perpendicular to <span class="math inline">\(\mu\)</span>. Hence, <span class="math inline">\(P={\rm span}\{\nu,\nu'\}\)</span>. And <span class="math inline">\(\nu,\nu'\)</span>’s expressions only involve
<span class="math inline">\({\alpha_i}\)</span>, which simplifies the
process.</p>
<p>The code can be written as follows (using <span class="math inline">\(u,v\)</span> to represent <span class="math inline">\(\nu,\nu'\)</span>):</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">I = [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>]<br>J = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]<br>u = <span class="hljs-built_in">sum</span>(c[i] * delta[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> I)<br>v = <span class="hljs-built_in">sum</span>(c[j] * delta[j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> J)<br>u /= np.linalg.norm(u)<br>v -= np.dot(u, v) * u<br>v /= np.linalg.norm(v)<br></code></pre></td></tr></tbody></table></figure>
<p>Here, we performed Gram-Schmidt orthogonalization on <span class="math inline">\(u,v\)</span> to obtain an orthonormal basis for
<span class="math inline">\(P\)</span>.</p>
<p>Projecting <span class="math inline">\(\Phi\)</span> onto <span class="math inline">\(P\)</span> is straightforward: for each vector in
the root system, compute its coordinates in the basis <span class="math inline">\(u,v\)</span>:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">roots_2d = [(np.dot(u, x), np.dot(v, x)) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> roots]<br></code></pre></td></tr></tbody></table></figure>
<p>What remains is to draw these points and the edges between them. The
details of the drawing process are not discussed here.</p>
<h1 id="further-improvement">Further Improvement</h1>
<p>If you look at the <a target="_blank" rel="noopener" href="https://github.com/neozhaoliang/pywonderland/blob/master/src/misc/E8.py#L123">GitHub
code</a>, you’ll find that it’s not written exactly as described above.
What’s the reason for this?</p>
<p>A minor drawback of the previous calculation is that we had to
explicitly specify two sets <span class="math inline">\(I,J\)</span>.
This step can also be avoided, but it requires a more detailed analysis
of the Cartan matrix <span class="math inline">\(C\)</span> and Coxeter
element <span class="math inline">\(\gamma\)</span>. The following
proposition can be found in <a target="_blank" rel="noopener" href="https://secure.math.ubc.ca/~cass/research/pdf/Element.pdf">Casselman’s
article</a>:</p>
<blockquote>
<p><strong>Proposition</strong>: <span class="math inline">\(2I + \gamma
+ \gamma^{-1}= (2I-C)^2\)</span>.</p>
</blockquote>
<p>We can compute and verify that this identity indeed holds. Consider
the matrix of <span class="math inline">\(\gamma\)</span> under the
basis <span class="math inline">\(\Delta\)</span>:</p>
<p><span class="math display">\[\gamma=xy=\begin{pmatrix}0&amp;-1&amp;1&amp;0&amp;0&amp;0&amp;0&amp;0\\1&amp;-1&amp;1&amp;0&amp;0&amp;0&amp;0&amp;0\\-1&amp;1&amp;-1&amp;1&amp;0&amp;0&amp;0&amp;0\\0&amp;0&amp;1&amp;-1&amp;1&amp;0&amp;0&amp;0\\0&amp;0&amp;1&amp;-1&amp;2&amp;-1&amp;1&amp;-1\\0&amp;0&amp;0&amp;0&amp;1&amp;-1&amp;1&amp;0\\0&amp;0&amp;0&amp;0&amp;1&amp;-1&amp;0&amp;0\\0&amp;0&amp;0&amp;0&amp;1&amp;0&amp;0&amp;-1\end{pmatrix}.\]</span>
Thus, <span class="math display">\[\gamma^{-1} =
yx=\begin{pmatrix}-1&amp;1&amp;0&amp;0&amp;0&amp;0&amp;0&amp;0\\-1&amp;1&amp;-1&amp;1&amp;0&amp;0&amp;0&amp;0\\0&amp;1&amp;-1&amp;1&amp;0&amp;0&amp;0&amp;0\\0&amp;1&amp;-1&amp;1&amp;-1&amp;1&amp;0&amp;1\\0&amp;0&amp;0&amp;1&amp;-1&amp;1&amp;0&amp;1\\0&amp;0&amp;0&amp;1&amp;-1&amp;1&amp;-1&amp;1\\0&amp;0&amp;0&amp;0&amp;0&amp;1&amp;-1&amp;0\\0&amp;0&amp;0&amp;1&amp;-1&amp;1&amp;0&amp;0\end{pmatrix}.\]</span>
Therefore, <span class="math display">\[2I + \gamma + \gamma^{-1} =
\begin{pmatrix}
1&amp;0&amp;1&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;2&amp;0&amp;1&amp;0&amp;0&amp;0&amp;0\\
1&amp;0&amp;2&amp;0&amp;1&amp;0&amp;0&amp;0\\
0&amp;1&amp;0&amp;2&amp;0&amp;1&amp;0&amp;1\\
0&amp;0&amp;1&amp;0&amp;3&amp;0&amp;1&amp;0\\
0&amp;0&amp;0&amp;1&amp;0&amp;2&amp;0&amp;1\\
0&amp;0&amp;0&amp;0&amp;1&amp;0&amp;1&amp;0\\
0&amp;0&amp;0&amp;1&amp;0&amp;1&amp;0&amp;1
\end{pmatrix}=(2I - C)^2.\]</span> This implies that <span class="math inline">\(v\)</span> is an eigenvector of <span class="math inline">\((2I-C)^2\)</span> with an eigenvalue of <span class="math inline">\(4\cos^2\frac{\theta}{2}\)</span>.</p>
<p>It seems to suggest that <span class="math inline">\(v\)</span> is
also an eigenvector of <span class="math inline">\(2I-C\)</span> with
eigenvalues of <span class="math inline">\(\pm
2\cos\frac{\theta}{2}\)</span>. However, it’s not clear whether both
<span class="math inline">\(\pm 2\cos\frac{\theta}{2}\)</span> will
appear, or if they do, whether their multiplicities are equal.</p>
<p>Casselman demonstrated that this is indeed the case:</p>
<blockquote>
<p><strong>Proposition</strong>: <span class="math inline">\(2I-C\)</span> and <span class="math inline">\(C-2I\)</span> have the same characteristic
polynomial.</p>
</blockquote>
<p>According to this proposition, <span class="math inline">\(2I-C\)</span> and <span class="math inline">\(C-2I\)</span> have the same dimension for their
eigenspaces corresponding to an eigenvalue <span class="math inline">\(\lambda\)</span>. Since the latter is the
eigenspace of <span class="math inline">\(2I-C\)</span> for the
eigenvalue <span class="math inline">\(-\lambda\)</span>, it follows
that the dimensions of the eigenspaces of <span class="math inline">\(C-2I\)</span> for <span class="math inline">\(\pm\lambda\)</span> are equal. Let <span class="math inline">\(V_s,V_{\bar{s}}\)</span> be the eigenspaces
corresponding to a pair of conjugate complex eigenvalues <span class="math inline">\(s=e^{i\theta}\)</span> and <span class="math inline">\(\bar{s}=e^{-i\theta}\)</span> of <span class="math inline">\(\gamma\)</span>. We have seen that <span class="math inline">\(P=V_s\oplus V_{\bar{s}}\)</span> is the eigenspace
of <span class="math inline">\((2I-C)^2\)</span> for the eigenvalue
<span class="math inline">\(4\cos^2\frac{\theta}{2}\)</span>. Since
<span class="math inline">\(2I-C\)</span> commutes with <span class="math inline">\((2I-C)^2\)</span>, <span class="math inline">\(P\)</span> is also an invariant subspace of <span class="math inline">\(2I-C\)</span>. <span class="math inline">\(2I-C\)</span> is diagonalizable on <span class="math inline">\(P\)</span>, making <span class="math inline">\(P\)</span> the direct sum of eigenspaces of <span class="math inline">\(2I-C\)</span> for eigenvalues <span class="math inline">\(\pm 2\cos\frac{\theta}{2}\)</span>. Thus, <span class="math inline">\(P\)</span> is the direct sum of eigenspaces of
<span class="math inline">\(C\)</span> for eigenvalues <span class="math inline">\(2\pm2\cos\frac{\theta}{2}\)</span>.</p>
<p>Let’s verify this: the eigenvalues of <span class="math inline">\(C\)</span> returned by
<code>numpy.linalg.eigh</code> are as follows:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">[<span class="hljs-number">0.01095621</span> <span class="hljs-number">0.51371035</span> <span class="hljs-number">1.18652671</span> <span class="hljs-number">1.58417662</span> <span class="hljs-number">2.41582338</span> <span class="hljs-number">2.81347329</span> <span class="hljs-number">3.48628965</span> <span class="hljs-number">3.98904379</span>]<br></code></pre></td></tr></tbody></table></figure>
<p>The sum of the first and the last is 4, the second and the
second-to-last also sum to 4, the third and the third-to-last sum to 4,
and the fourth and fifth sum to 4. Therefore, the eigenvalues of <span class="math inline">\(C\)</span> sum pairwise to 4, consistent with the
theory!</p>
<p>Generally, the dimension of <span class="math inline">\(P=V_s\oplus
V_{\bar{s}}\)</span> might not be 2, so <span class="math inline">\(P\)</span> might not always be a plane. However,
for the smallest eigenvalue of <span class="math inline">\(C\)</span>,
we already know its multiplicity is 1, hence the multiplicity of its
largest eigenvalue is also 1, making <span class="math inline">\(P\)</span> a two-dimensional plane. Thus, <span class="math inline">\(\gamma\)</span>’s action on <span class="math inline">\(P\)</span> is a rotation of angle <span class="math inline">\(\theta_0\)</span>.</p>
<p>From the printed results, we see</p>
<p><span class="math display">\[0.01095621 \approx
2-2\cos\frac{\theta_0}{2},\quad \theta_0\approx
2\arccos0.994521895\approx\frac{2\pi}{30}.\]</span> This verifies that
<span class="math inline">\(\gamma\)</span>’s action on <span class="math inline">\(P\)</span> is a rotation of order 30, confirming
the Coxeter number of <span class="math inline">\(W\)</span> is 30.</p>
<p>To find a basis for <span class="math inline">\(P\)</span>, one needs
only to find the eigenvectors <span class="math inline">\(u,v\)</span>
corresponding to the smallest and largest eigenvalues of <span class="math inline">\(C\)</span>, <span class="math display">\[\alpha=\sum_{i=1}^8 u_i\alpha_i,\quad
\beta=\sum_{i=1}^8 v_i\alpha_i.\]</span> These form a basis for <span class="math inline">\(P\)</span>.</p>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Proof seen in <a target="_blank" rel="noopener" href="https://arxiv.org/abs/1302.2842">Conjugacy of Coxeter elements,
Henrik Eriksson, Kimmo Eriksson</a>. The proof using graph theory
presented there is particularly appealing.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>



                                                    



                                            </div>

            </div>
        </div>
    </article>

    


    <section id="comment">
       <script src="https://giscus.app/client.js"
        data-repo="neozhaoliang/neozhaoliang.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNDQ4MTYxMDc="
        data-category="Announcements"
        data-category-id="DIC_kwDOCKG3684CPDuy"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
       </script>
    </section>


</div>

                    <div class="fixed-action-btn float-sitemap">
    <a class="btn-floating btn-large pink">
      <i class="fa fa-caret-square-o-up"></i>
    </a>
    <ul>
      <li><a class="btn-return-top btn-floating waves-effect green" title="回到顶部"><i class="fa fa-arrow-circle-o-up"></i></a></li>
      <li><a class="btn-floating waves-effect button-collapse yellow darken-1"  data-activates="main-menu" title="菜单"><i class="fa fa-navicon"></i></a></li>
    </ul>
  </div>

            </main>
            


                <noscript>
    <div class="noscript">
        <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
    </div>
</noscript>
<div class="noscript">
    <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
</div>


<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>

<script>
    (function($) {
        $(document).ready(function() {
            // 隐藏禁用javascript（针对微信内置浏览器）的提示
            $('.noscript').hide();

            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image').not('.card-cover-image').not('.qrcode');

            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed').each(function(i, el) {
                $(this).attr('data-caption', $(this).attr('alt') || ' ');
            }).materialbox();

            // 优化表格的显示
            $('table').each(function() {
                var $table = $(this);
                // 除去多行代码的情况
                if ($table.find('pre').length == 0) {
                    $table.addClass('responsive-table striped bordered');
                }
            });

            // 首页幻灯片
            $('.slider').slider({indicators: true, full_width: true, interval: 8000});

            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();

            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });

            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').add('h4').add('h5').add('h6').scrollSpy();

            // 目录随屏幕滚动（防止目录过长越过footer）
            var $toc = $('.toc');
            var scrollTargetTop = 0;
            $(window).scroll(function() {
                var $activeLink = $toc.find('a.active.section');
                if ($(window).scrollTop() < 100) {
                    scrollTargetTop = 0;
                } else {
                    if ($activeLink[0]) {
                        scrollTargetTop = $activeLink.offset().top - $toc.offset().top;
                    }
                }
                $toc.css('top', '-' + scrollTargetTop + 'px');
            });

            // 修正文章目录的left-border颜色
            var color = $('.table-of-contents-text').css('color');
            $('.table-of-contents-link').css('border-left-color', color);

            // 针对移动端做的优化：FAB按钮点击一下收回
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                $('.fixed-action-btn').addClass('click-to-toggle');
            }
            // 回到顶部
            $('.btn-return-top').click(function() {
                $('body, html').animate({
                    scrollTop: 0
                }, 500);
            });

            // 重置读书页面的Tab标签页的颜色
            $('li.tab a').hover(function() {
                $(this).toggleClass('text-lighten-4');
            });
            $('.indicator').addClass('pink lighten-2');

            

            // 搜索功能
            $('.modal-trigger').leanModal({
                // 打开搜索框时自动聚焦
                ready: function() {
                    if ($('#search').is(":visible")) {
                        $('#search-input').focus();
                    }
                }
            });
            var searchXml = "search.xml";
            if (searchXml.length == 0) {
             	searchXml = "search.xml";
            }
            var searchPath = "/" + searchXml;
            initSearch(searchPath, 'search-input', 'search-result');
        });

        // 初始化搜索与匹配函数
        var initSearch = function(path, search_id, content_id) {
            'use strict';
            $.ajax({
                url: path,
                dataType: "xml",
                success: function(xmlResponse) {
                    // get the contents from search data
                    var datas = $("entry", xmlResponse).map(function() {
                        return {
                            title: $("title", this).text(),
                            content: $("content", this).text(),
                            url: $("url", this).text()
                        };
                    }).get();
                    var $input = document.getElementById(search_id);
                    var $resultContent = document.getElementById(content_id);
                    $input.addEventListener('input', function() {
                        var str = '<ul class=\"search-result-list\">';
                        var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                        $resultContent.innerHTML = "";
                        if (this.value.trim().length <= 0) {
                            return;
                        }
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = true;
                            var content_index = [];
                            var data_title = data.title.trim().toLowerCase();
                            var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                            var data_url = data.url;
                            var index_title = -1;
                            var index_content = -1;
                            var first_occur = -1;
                            // only match artiles with not empty titles and contents
                            if (data_title != '' && data_content != '') {
                                keywords.forEach(function(keyword, i) {
                                    index_title = data_title.indexOf(keyword);
                                    index_content = data_content.indexOf(keyword);
                                    if (index_title < 0 && index_content < 0) {
                                        isMatch = false;
                                    } else {
                                        if (index_content < 0) {
                                            index_content = 0;
                                        }
                                        if (i == 0) {
                                            first_occur = index_content;
                                        }
                                    }
                                });
                            }
                            // show search results
                            if (isMatch) {
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    data_title = data_title.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                });

                                str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                                var content = data.content.trim().replace(/<[^>]+>/g, "");
                                if (first_occur >= 0) {
                                    // cut out 100 characters
                                    var start = first_occur - 20;
                                    var end = first_occur + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (start == 0) {
                                        end = 100;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    var match_content = content.substring(start, end);
                                    // highlight all keywords
                                    keywords.forEach(function(keyword) {
                                        var regS = new RegExp(keyword, "gi");
                                        match_content = match_content.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                    });

                                    str += "<p class=\"search-result\">..." + match_content + "...</p>"
                                }
                                str += "</li>";
                            }
                        });
                        str += "</ul>";
                        $resultContent.innerHTML = str;
                    });
                }
            });
        }
    })(jQuery);
</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>






	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
  		tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
  		tex: 'ams'
		});
	</script>


	

			<script type="text/javascript"
				src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-svg.min.js?config=TeX-AMS_HTML"></script>

			
				

    </body>

    </html>