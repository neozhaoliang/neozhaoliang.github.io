<!DOCTYPE HTML>
<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHQJ7GP8MM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-SHQJ7GP8MM');
    </script>

    <meta charset="utf-8">
    
    

    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    

        <title>
            Todd Kemp 概率论课程笔记 | Why so serious?</title>
    <meta name="author" content="Zhao Liang">
    
    <meta name="description" content="✅ 0 Banach Tarski

不可测集的例子： 记单位圆 \(S^1=\{e^{it},\,t\in\mathbb{R}\}\)，子群
\(H=\{e^{iq},\,q\in\mathbb{Q}\}\)，在每个左陪集
\(S^1/H\) 中选择一个代表元组成集合
\(E\)，则 \(E\) ">
    
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="og:title" content="Todd Kemp 概率论课程笔记"/>
    <meta property="og:site_name" content="Why so serious?"/>

    
    <meta property="og:image" content=""/>
    


    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" href="/atom.xml" title="Why so serious?" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/materialize.min.css">
    <link rel="stylesheet" href="/css/lib/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/desert.css" type="text/css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
        </script>

<meta name="generator" content="Hexo 5.4.2">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

    <body>
        <amp-auto-ads type="adsense" data-ad-client="ca-pub-2761554655832112">
        </amp-auto-ads>
        <img src="/favicon.png" style="position: absolute; left: -9999px; opacity: 0; filter: alpha(opacity=0);">

        <nav class="indigo">
    <div class="nav-wrapper">
        <a href="#" data-activates="main-menu" class="button-collapse">
            <i class="fa fa-navicon"></i>
        </a>
        <div class="">
            <a href="/" class="brand-logo hide-on-med-and-down">Why so serious?</a>
            <ul class="right hide-on-med-and-down">
                
                    <li>
                        <a class="menu-home " href="/" >
                            <i class="fa fa-home "></i>
                            
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-archive " href="/archives" >
                            <i class="fa fa-archive "></i>
                            
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                            <i class="fa fa-bookmark "></i>
                            
                            分类
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-about " href="/about" >
                            <i class="fa fa-user "></i>
                            
                            关于
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-search modal-trigger " href="#search" >
                            <i class="fa fa-search "></i>
                            
                            搜索
                        </a>
                    </li>
                
            </ul>
            <div>
    <ul class="side-nav indigo darken-1" id="main-menu">
        
        <li class="side-user">
            <div class="row">
                <div class="col s4 no-padding">
                    <img class="avatar-image circle responsive-img" src="/favicon.png" alt="User Avatar">
                </div>
                <div class="info col s8 valign-wrapper no-padding">
                    <div class="valign">
                        <p class="name">Zhao Liang</p>
                        <p class="desc">math &amp;&amp; programming</p>
                    </div>
                </div>
            </div>
        </li>
        

        
            <li class="no-padding">
                <a class="waves-effect menu-home " href="/" >
                    <i class="fa fa-home "></i>
                    
                    首页
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-archive " href="/archives" >
                    <i class="fa fa-archive "></i>
                    
                    归档
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                    <i class="fa fa-bookmark "></i>
                    
                    分类
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-about " href="/about" >
                    <i class="fa fa-user "></i>
                    
                    关于
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-search modal-trigger " href="#search" >
                    <i class="fa fa-search "></i>
                    
                    搜索
                </a>
            </li>
        
    </ul>

    <ul class="side-nav indigo darken-1" id="category-menu">
    

            

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/计数组合学/">
                    计数组合学 <span class="right">5 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Durrett-概率论批判/">
                    Durrett-概率论批判 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/完美采样/">
                    完美采样 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/几何群论/">
                    几何群论 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/有限群表示与结合代数/">
                    有限群表示与结合代数 <span class="right">5 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/pywonderland-项目/">
                    pywonderland-项目 <span class="right">5 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Shadertoy/">
                    Shadertoy <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/线性代数/">
                    线性代数 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/可视化复分析/">
                    可视化复分析 <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/随机游动/">
                    随机游动 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/代数/">
                    代数 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Williams-概率和鞅/">
                    Williams-概率和鞅 <span class="right">4 篇</span></a>
                </a>
            </li>

        

    </ul>
</div>

        </div>
    </div>
</nav>

<div id="search" class="modal search-modal">
    <div class="row">
        <div class="input-field col s12">
              <input id="search-input" type="text">
              <label for="search-input">搜索</label>
        </div>

    </div>
    <div id="search-result" class="search-result col s12">

    </div>
</div>


            <main>
                <div class="container main-container">
    <nav class="page-nav hide-on-small-only">
    <div class="nav-wrapper indigo">
        <span class="breadcrumb">当前位置（分类目录）</span>
        
            

        

        
    </div>
</nav>

    <article>
        <div class="card">
            <div class="card-content">
                

                            <div class="article-title">
                                
    
        <h1>Todd Kemp 概率论课程笔记</h1>
    


                            </div>
                            <time class="pink-link-context" datetime="2021-02-28T16:00:00.000Z"><a href="/todd-kemp/index.html">2021-03-01</a></time>

                                

                                    <div class="toc pink-link-context hide-on-med-and-down">
    <ol class="section table-of-contents"><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#banach-tarski"><span class="section table-of-contents-text">✅ 0 Banach Tarski</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#probability-motivation"><span class="section table-of-contents-text">✅ 1.1 Probability Motivation</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#sigma--fields"><span class="section table-of-contents-text">✅ 1.2 \(\sigma\)- Fields</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#measures-definition-and-examples"><span class="section table-of-contents-text">✅ 2.1 Measures Definition and
Examples</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#finitely-additive-measures"><span class="section table-of-contents-text">✅ 2.2 Finitely Additive
Measures</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#stieltjes-premeasures"><span class="section table-of-contents-text">✅ 3.1 Stieltjes Premeasures</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#outer-measure"><span class="section table-of-contents-text">3.2 Outer Measure</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#outer-pseudo-metric"><span class="section table-of-contents-text">4.1 Outer Pseudo-Metric</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#radon-measures"><span class="section table-of-contents-text">✅ 5.1 Radon Measures</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#lebesgue-measure"><span class="section table-of-contents-text">✅ 5.2 Lebesgue Measure</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#random-variables-motivation"><span class="section table-of-contents-text">✅ 6.1 Random Variables
Motivation</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#measurable-functions"><span class="section table-of-contents-text">✅ 6.2 Measurable Functions</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#robustness-of-measurability"><span class="section table-of-contents-text">✅ 7.1 Robustness of
Measurability</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#riemann-stieltjes-integration"><span class="section table-of-contents-text">✅ 7.2 Riemann-Stieltjes
Integration</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#simple-integeration"><span class="section table-of-contents-text">✅ 8.1 Simple Integeration</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#monotone-convergence-theorem"><span class="section table-of-contents-text">✅ 8.2 Monotone convergence
theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#integrals-and-null-sets"><span class="section table-of-contents-text">✅ 9.1 Integrals and Null Sets</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#l1-and-the-dct"><span class="section table-of-contents-text">✅ 9.2 \(L^1\)
and the DCT</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#integrals-and-derivatives"><span class="section table-of-contents-text">✅ 10.1 Integrals and
Derivatives</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-radon-nikodym-theorem"><span class="section table-of-contents-text">✅ 11.1 The Radon-Nikodym
Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#probability-laws-revisited"><span class="section table-of-contents-text">✅ 11.2 Probability Laws
Revisited</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#l2"><span class="section table-of-contents-text">✅ 12.1 \(L^2\)</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-weak-law-of-large-numbers-wlln"><span class="section table-of-contents-text">✅ 12.2 The Weak Law of
Large Numbers (WLLN)</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#convergence-in-measure"><span class="section table-of-contents-text">✅ 13.1 Convergence in measure</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#lp-is-complete"><span class="section table-of-contents-text">✅ 13.2 \(L^p\)
is Complete</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#dynkins-multiplicative-systems-theorem"><span class="section table-of-contents-text">✅ 14.1 Dynkin’s
Multiplicative Systems Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#product-measure"><span class="section table-of-contents-text">✅ 14.2 Product Measure</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#tonelli-fubini"><span class="section table-of-contents-text">✅ 14.3 Tonelli-Fubini</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#independence"><span class="section table-of-contents-text">✅ 15.1 Independence</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#independent-random-variables"><span class="section table-of-contents-text">✅ 15.2 Independent Random
Variables</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#kolmogorovs-extension-theorem-part-2"><span class="section table-of-contents-text">✅ 16.2 Kolmogorov’s
Extension Theorem, Part 2</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#kolmogorovs-0-1-law"><span class="section table-of-contents-text">✅ 17.1 Kolmogorov’s 0-1 Law</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#convolution"><span class="section table-of-contents-text">✅ 17.2 Convolution</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#strong-law-of-large-numbers-part-1"><span class="section table-of-contents-text">✅ 18.1 Strong Law of Large
Numbers, Part 1</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#kolmogorovs-convergence-criterion"><span class="section table-of-contents-text">✅ 18.2 Kolmogorov’s
Convergence Criterion</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#strong-law-of-large-numbers-part-2"><span class="section table-of-contents-text">19.1 Strong Law of Large
Numbers, Part 2</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#renewal-theory"><span class="section table-of-contents-text">19.2 Renewal Theory</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#total-variation"><span class="section table-of-contents-text">✅ 21.1 Total Variation</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#weak-convergence"><span class="section table-of-contents-text">✅ 22.1 Weak Convergence</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#weak-convergence-over-mathbbrd"><span class="section table-of-contents-text">✅ 22.2 Weak Convergence over
\(\mathbb{R}^d\)</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#vague-convergence"><span class="section table-of-contents-text">✅ 23.1 Vague Convergence</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#prokhorovs-compactness-theorem"><span class="section table-of-contents-text">✅ 23.2 Prokhorov’s Compactness
Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#skorohods-theorem"><span class="section table-of-contents-text">✅ 23.3 Skorohod’s Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#complex-integration-and-dynkins-theorem"><span class="section table-of-contents-text">✅ 24.1 Complex
Integration and Dynkin’s Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#characteristic-function"><span class="section table-of-contents-text">✅ 24.2 Characteristic Function</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-riemann-lebesgue-lemma"><span class="section table-of-contents-text">✅ 25.1 The Riemann-Lebesgue
lemma</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#fourier-inversion"><span class="section table-of-contents-text">✅ 25.2 Fourier inversion</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-continuity-theorem"><span class="section table-of-contents-text">✅ 25.3 The Continuity Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#central-limit-theorem"><span class="section table-of-contents-text">✅ 26.1 Central Limit Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#infinitely-divisible-distributions"><span class="section table-of-contents-text">✅ 26.2 Infinitely Divisible
Distributions</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#average-uniformity"><span class="section table-of-contents-text">✅ 27.1 Average Uniformity</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#lindberg-feller-clt"><span class="section table-of-contents-text">✅ 27.2 Lindberg-Feller CLT</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#conditional-expectation-part-1"><span class="section table-of-contents-text">✅ 30.2 Conditional Expectation,
Part 1</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#orthogonal-projections"><span class="section table-of-contents-text">✅ 31.1 Orthogonal Projections</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#conditioning-on-random-variables"><span class="section table-of-contents-text">✅ 32.3 Conditioning on Random
Variables</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#probability-kernels-part-1"><span class="section table-of-contents-text">✅ 33.1 Probability Kernels, Part
1</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#regular-conditional-distributions"><span class="section table-of-contents-text">✅ 33.2 Regular Conditional
Distributions</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#probability-kernels-part-2"><span class="section table-of-contents-text">✅ 34.1 Probability Kernels, Part
2</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#random-dynamics"><span class="section table-of-contents-text">✅ 34.2 Random Dynamics</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#stochastic-processes"><span class="section table-of-contents-text">✅ 35.1 Stochastic Processes</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-markov-property"><span class="section table-of-contents-text">✅ 36.1 The Markov property</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#probability-kernels-revisited"><span class="section table-of-contents-text">36.2 Probability Kernels
Revisited</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#markov-processes"><span class="section table-of-contents-text">✅ 37.1 Markov Processes</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#kolmogorovs-extended-extension-theorem"><span class="section table-of-contents-text">✅ 37.2 Kolmogorov’s
(Extended) Extension Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#path-space"><span class="section table-of-contents-text">✅ 38.1 Path Space</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#time-homogeneous-markov-processes"><span class="section table-of-contents-text">38.2 Time Homogeneous Markov
Processes</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#markov-matrix"><span class="section table-of-contents-text">✅ 39.1 Markov Matrix</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#markov-generator"><span class="section table-of-contents-text">✅ 39.2 Markov Generator</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#operator-norm-continuity"><span class="section table-of-contents-text">✅ 40.1 Operator Norm Continuity</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#bounded-generators"><span class="section table-of-contents-text">✅ 40.2 Bounded Generators</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#hitting-times"><span class="section table-of-contents-text">42.2 Hitting Times</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#invariant-distributions"><span class="section table-of-contents-text">✅ 44.2 Invariant Distributions</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#stopping-times"><span class="section table-of-contents-text">✅ 45.1 Stopping Times</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#the-strong-markov-property"><span class="section table-of-contents-text">✅ 46.1 The Strong Markov
Property</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#markov-chain-ergodic-theorem"><span class="section table-of-contents-text">46.2 Markov Chain Ergodic
Theorem</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#walds-identity"><span class="section table-of-contents-text">✅ 46.3 Wald’s Identity</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#uniform-integrability"><span class="section table-of-contents-text">✅ 48.1 Uniform Integrability</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#optional-stopping-and-sampling"><span class="section table-of-contents-text">49.1 Optional Stopping and
Sampling</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#h%C3%B6lders-inequality"><span class="section table-of-contents-text">✅ 49.2 Hölder’s Inequality</span></a></li><li class="section table-of-contents-item section table-of-contents-level-1"><a class="section table-of-contents-link" href="#versions"><span class="section table-of-contents-text">51.1 Versions</span></a></li></ol>
</div>
                                        
                                            <div class="entry pink-link-context">
                                                
<h1 id="banach-tarski">✅ 0 Banach Tarski</h1>
<div id="---------------------" class="statement sta________ definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">不可测集的例子</span>：</span><span class="statement-spah"> </span>记单位圆 <span class="math inline">\(S^1=\{e^{it},\,t\in\mathbb{R}\}\)</span>，子群
<span class="math inline">\(H=\{e^{iq},\,q\in\mathbb{Q}\}\)</span>，在每个左陪集
<span class="math inline">\(S^1/H\)</span> 中选择一个代表元组成集合
<span class="math inline">\(E\)</span>，则 <span class="math inline">\(E\)</span> 是不可测集合。这是因为 <span class="math inline">\(S^1 = \bigcup_{q\in\mathbb{Q}}Ee^{iq}\)</span>
是可数多个互不相交的集合的并，这些集合两两之间只差乘以一个单位复数，即差一个旋转，所以测度均相等，于是
<span class="math display">\[1 = \sum_{q\in\mathbb{Q}}\mu(E) =
\infty\cdot \mu(E)\Rightarrow E\text{ not measuabe.}\]</span></p>
</div>
<h1 id="probability-motivation">✅ 1.1 Probability Motivation</h1>
<p>无要点</p>
<h1 id="sigma--fields">✅ 1.2 <span class="math inline">\(\sigma\)</span>- Fields</h1>
<p>介绍了 <span class="math inline">\(\sigma\)</span>-
域的概念，以及最重要的 <span class="math inline">\(\sigma\)</span>-
域的例子：拓扑空间中开集生成的 Borel 域。</p>
<h1 id="measures-definition-and-examples">✅ 2.1 Measures Definition and
Examples</h1>
<p>介绍了可测空间，以及测度的定义和基本性质。</p>
<div class="unnumbered statement definition-unnumbered plain">
<p><span class="statement-heading"><span class="statement-label">定义</span>.</span><span class="statement-spah">
</span>设 <span class="math inline">\(\mathcal{F}\)</span> 是一个 <span class="math inline">\(\sigma\)</span>- 域，称 <span class="math inline">\(\mu:\ \mathcal{F}\to[0,\infty]\)</span>
是测度，如果对任何可数多个不交并有 <span class="math inline">\(\mu(\uplus_{n=1}^\infty
E_n)=\sum_{n=1}^\infty\mu(E_n)\)</span> 成立。</p>
</div>
<p>测度的三个基本性质：</p>
<ul>
<li>单调性：<span class="math inline">\(A\subseteq B\Rightarrow
\mu(A)\leq\mu(B)\)</span>。</li>
<li>加法等式 <span class="math inline">\(\mu(A\cup B) + \mu(A\cap B) =
\mu(A) + \mu(B)\)</span>。</li>
<li>次可数可加：<span class="math inline">\(\mu(\cup_{n=1}^\infty
E_n)\leq\sum_{n=1}^\infty\mu(E_n)\)</span>。</li>
</ul>
<p>此外如果 <span class="math inline">\(\{\mu_n\}_{n=1}^\infty\)</span>
是一列测度，则它们的和 <span class="math inline">\(\mu=\sum\limits_{n=1}^\infty\mu_n\)</span>
也是测度。</p>
<p>预告了接下来构造测度的过程：有限可加测度 <span class="math inline">\(\Rightarrow\)</span> 预测度 <span class="math inline">\(\Rightarrow\)</span> ·测度。</p>
<h1 id="finitely-additive-measures">✅ 2.2 Finitely Additive
Measures</h1>
<p>这一讲介绍了<strong>有限可加测度</strong>，<strong>预测度
(pre-measure，即域上的可数可加测度)</strong>，<strong>半代数
(semi-algebra)</strong> 等概念。</p>
<div class="unnumnered statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
5.1</span>.</span></p>
<ol type="1">
<li>域上的可数可加测度叫做 <strong>预测度</strong>。</li>
<li>域上的有限可加测度叫做 <strong>有限可加测度</strong>。</li>
</ol>
</div>
<blockquote>
<p><strong>核心思想</strong>：半代数 <span class="math inline">\(\mathcal{S}\)</span> 上的有限可加测度 <span class="math inline">\(\Rightarrow\)</span> 代数 <span class="math inline">\(\mathcal{A}\)</span> 上的有限可加测度 <span class="math inline">\(\Rightarrow\)</span> 代数 <span class="math inline">\(\mathcal{A}\)</span> 上的可数可加测度 <span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(\sigma\)</span>- 域上的可数可加测度。</p>
</blockquote>
<p>域 <span class="math inline">\(\mathcal{A}\)</span>
上的有限可加测度的基本性质：</p>
<ul>
<li>单调性、加法等式同可数可加的情形。</li>
<li><strong>超可数可加</strong>：如果 <span class="math inline">\(\{E_n\}_{n=1}^{\infty}\)</span>
是一列不相交的集合，每个 <span class="math inline">\(E_n\in\mathcal{A}\)</span> 并且 <span class="math inline">\(\mu(\uplus_{n=1}^\infty
E_n)\in\mathcal{A}\)</span>。则 <span class="math inline">\(\mu(\uplus_{n=1}^\infty
E_n)\geq\sum_{n=1}^\infty\mu(E_n)\)</span>。这是由于单调性左边始终是右边部分和的上界。</li>
</ul>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
5.2</span>.</span><span class="statement-spah"> </span>一个半代数 <span class="math inline">\(\mathcal{S}\)</span>
是指满足如下条件的集合族：</p>
<ol type="1">
<li><span class="math inline">\(\emptyset\in\mathcal{S}\)</span>。</li>
<li>若 <span class="math inline">\(A,\,B\in\mathcal{S}\)</span> 则 <span class="math inline">\(A\cap B\in\mathcal{S}\)</span>。</li>
<li>若 <span class="math inline">\(A\in\mathcal{S}\)</span> 则 <span class="math inline">\(A^c\)</span> 可以表示为 <span class="math inline">\(\mathcal{S}\)</span> 中有限多个成员的不交并。</li>
</ol>
</div>
<p>半代数 <span class="math inline">\(\mathcal{S}\)</span> 生成一个代数
<span class="math inline">\(\mathcal{A}\)</span>： <span class="math display">\[\mathcal{A}=\{\text{all finite disjoint unions of
sets from }\mathcal{S} \}.\]</span></p>
<p>第一步<strong>半代数 <span class="math inline">\(\mathcal{S}\)</span>
上的有限可加测度 <span class="math inline">\(\Rightarrow\)</span> 代数
<span class="math inline">\(\mathcal{A}\)</span>
上的有限可加测度</strong>：这一步是显然的，只需要验证定义不依赖于 <span class="math inline">\(\mathcal{A}\)</span> 作为 <span class="math inline">\(\mathcal{S}\)</span>
中集合不交并的表示方式即可。</p>
<p>第三步<strong>代数 <span class="math inline">\(\mathcal{A}\)</span>
上的可数可加测度 <span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(\sigma\)</span>-
域上的可数可加测度</strong>：这一步总是可以做到的，由后面的测度扩张定理给出。</p>
<p>第二步<strong>代数 <span class="math inline">\(\mathcal{A}\)</span>
上的有限可加测度 <span class="math inline">\(\Rightarrow\)</span> 代数
<span class="math inline">\(\mathcal{A}\)</span>
上的可数可加测度</strong>：这一步并不总是可以做到。举个例子，在是整数集
<span class="math inline">\(\mathbb{Z}\)</span> 的所有子集上定义如下测度
<span class="math inline">\(\mu\)</span>：若子集 <span class="math inline">\(E\)</span> 或者 <span class="math inline">\(E^c\)</span> 之一是有限集，则规定 <span class="math inline">\(\mu(E)=0\)</span>，否则 <span class="math inline">\(\mu(E)=1\)</span>。此测度有限可加但不是可数可加，所以也不会有可数可加的扩张。</p>
<p>最重要的半代数 <span class="math inline">\(\mathcal{S}\)</span>
的例子：所有形如 <span class="math inline">\(\{(a, b],-\infty\leq
a&lt;b\leq \infty\}\)</span> 的半开区间。</p>
<p>任何单调函数 <span class="math inline">\(F\)</span>
都可以给出其上的一个有限可加测度：<span class="math inline">\(F((a, b]))
= F(b) - F(a)\)</span>，从而可以扩张为代数 <span class="math inline">\(\mathcal{A}\)</span>
上的有限可加测度。<strong>但是要使得这个测度是可数可加的，我们必须限制
<span class="math inline">\(F\)</span>
是右连续的</strong>，这样的测度叫做 Stieltjes 测度，会在下一讲介绍。</p>
<h1 id="stieltjes-premeasures">✅ 3.1 Stieltjes Premeasures</h1>
<p>本讲接着上一讲的内容，证明了当 <span class="math inline">\(F\)</span>
单调且右连续时，<span class="math inline">\(\mu((a,b])=F(b)-F(a)\)</span> 确实给出 Borel 域
<span class="math inline">\(\mathcal{A}\)</span>
上的一个可数可加测度。当然 Borel 域还是太复杂了
(虽然它们都是有限多个半开区间的不交并)，无法用可数可加的定义来验证。我们还是要回到由半开区间构成的半代数
<span class="math inline">\(\mathcal{S}\)</span> 上。</p>
<p>我们要从有限可加推出可数可加，而有限可加蕴涵了可数<strong>超</strong>可加，所以我们还缺少可数<strong>次</strong>可加。而
<span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span>
上的可数次可加实际上可以由 <span class="math inline">\(\mathcal{S}\)</span> 上的可数次可加给出：</p>
<div class="unnumbered statement lemma-unnumbered plain">
<p><span class="statement-heading"><span class="statement-label">引理</span>.</span><span class="statement-spah">
</span>代数 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span> 上的有限可加测度
<span class="math inline">\(\mu\)</span>
是可数可加的，<strong>当且仅当它限制在 <span class="math inline">\(\mathcal{S}\)</span>
上是次可数可加的</strong>。</p>
</div>
<p>这个话需要仔细解释清楚：<span class="math inline">\(\mu\)</span> 在
<span class="math inline">\(\mathcal{S}\)</span> 上次可数可加是指如果
<span class="math inline">\(\{E_n\}\)</span> 是半代数 <span class="math inline">\(\mathcal{S}\)</span>
中互不相交的集合，并且它们的可数并 <span class="math inline">\(\uplus_{n} E_n\)</span> 也在半代数 <span class="math inline">\(\mathcal{S}\)</span> 中，则 <span class="math inline">\(\mu(\uplus_nE_n)\leq\sum_n\mu(E_n)\)</span>。</p>
<p><strong>证明概要</strong>：<span class="math inline">\(\Rightarrow\)</span>
是显然的，可数可加必然蕴含次可数可加。</p>
<p><span class="math inline">\(\Leftarrow\)</span>：<span class="math inline">\(\mu\)</span> 作为 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span>
上的有限可加测度自然是超可数可加的，要证明它可数可加，只要再证明它次可数可加：即若
<span class="math inline">\(\uplus_n A_n\)</span> 是 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span>
中的可数不交并，则 <span class="math inline">\(\mu(\uplus_n
A_n)\leq\sum_n\mu(A_n)\)</span>。记住 <span class="math inline">\(\uplus_n A_n\)</span> 以及所有 <span class="math inline">\(A_n\)</span> 现在都是 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span> 中的元素，所以
<span class="math inline">\(\uplus_n A_n = \uplus_{j=1}^N
E_j\)</span>，其中 <span class="math inline">\(E_j\in\mathcal{S}\)</span>。于是 <span class="math display">\[E_j = \uplus_n (A_n\cap
E_j)=\uplus_n\uplus_{i=1}^{N_n}E_i^n\cap E_j.\]</span> 利用 <span class="math inline">\(\mu\)</span> 在 <span class="math inline">\(\mathcal{S}\)</span> 上的次可数可加性有 <span class="math display">\[\mu(E_j)\leq \sum_n\sum_{i=1}^{N_n}\mu(E_i^n\cap
E_j).\]</span> 再利用 <span class="math inline">\(\mu\)</span> 在 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span> 上的有限可加性有
<span class="math display">\[\sum_{i=1}^{N_n}\mu(E_i^n\cap
E_j)=\mu(A_n\cap E_j).\]</span> 于是 <span class="math display">\[\mu(\uplus_j
E_j)=\sum_{j=1}^N\mu(E_j)\leq\sum_{j=1}^N\sum_{n=1}^\infty\mu(A_n\cap
E_j)=\sum_{n=1}^\infty\sum_{j=1}^N\mu(A_n\cap
E_j)=\sum_{n=1}^\infty\mu(A_n).\]</span> 即为所证。</p>
<div class="unnumbered statement theorem-unnumbered plain">
<p><span class="statement-heading"><span class="statement-label">定理</span>.</span><span class="statement-spah">
</span>由单调右连续的函数 <span class="math inline">\(F\)</span>
给出的半代数 <span class="math inline">\(\mathcal{S}=\{(a,b]\
-\infty\leq a&lt;b\leq\infty\}\)</span> 上的 Stieltjes
测度是次可数可加的，因而由上面引理它给出 <span class="math inline">\(\mathcal{A}(\mathcal{S})\)</span>
上的可数可加测度。</p>
</div>
<p><strong>Todd-Kemp 的精彩证明讲解</strong>：设 <span class="math inline">\((a,b]=\uplus_{i=1}^\infty (a_i,
b_i]\)</span>，我们要证明 <span class="math display">\[F(b)-F(a)=\mu((a,
b])\leq\sum_{i=1}^\infty\mu((a_i,b_i])=\sum_{i=1}^\infty
(F(b_i)-F(a_i)).\]</span> 我们可以先假设 <span class="math inline">\(a,b\)</span> 都是有限的。</p>
<p><strong>不要幻想可以给区间 <span class="math inline">\((a_i,b_i]\)</span>
之间按照大小排顺序，它们可能有无穷多个聚点</strong>。</p>
<p><strong>想法是把 <span class="math inline">\((a, b]\)</span>
缩小一点变成 <span class="math inline">\([a+\delta, b]\)</span>，把
<span class="math inline">\((a_i,b_i]\)</span> 放大一点变成 <span class="math inline">\((a_i,b_i+\delta_i)\)</span>，这样可以使用紧集的有限开覆盖性质</strong>。从而存在
<span class="math inline">\(N\)</span> 使得前 <span class="math inline">\(N\)</span> 个开区间就足以覆盖 <span class="math inline">\([a+\delta,b]\)</span>： <span class="math display">\[[a+\delta,b] \subseteq \cup_{j=1}^N (a_j,
b_j+\delta_j).\]</span> 现在 <span class="math inline">\(\mu\)</span>
作为一个有限可加测度，由于 <span class="math inline">\((a+\delta,
b]\)</span> 被 <span class="math inline">\(\cup_{j=1}^N (a_j,
b_j+\delta_j]\)</span> 覆盖，因而必然有 <span class="math display">\[\mu((a+\delta, b])\leq \sum_{j=1}^N \mu((a_j,
b_j+\delta_j])\leq\sum_{j=1}^\infty \mu((a_j, b_j+\delta_j]).\]</span>
上式左边等于 <span class="math inline">\(F(b)-F(a+\delta)\)</span>，<span class="math inline">\(\delta\)</span> 是任意正数，所以令其趋于 0 并利用
<span class="math inline">\(F\)</span> 的右连续有 <span class="math inline">\(F(a+\delta)\downarrow F(a)\)</span>，所以上式变为
<span class="math display">\[\mu((a, b])\leq\sum_{j=1}^\infty\mu((a_j,
b_j+\delta_j])=\sum_{j=1}^\infty \mu((a_j, b_j]) + \sum_{j=1}^\infty
\mu((b_j, b_j+\delta_j]).\]</span> 注意到 <span class="math inline">\(\delta_j\)</span> 也是任意的，并且 <span class="math inline">\(F\)</span> 右连续，所以对任何 <span class="math inline">\(\epsilon&gt;0\)</span> 我们可以取 <span class="math inline">\(\delta_j\)</span> 足够小，使得 <span class="math inline">\(F(b_j+\delta_j)- F(b_j) &lt;
\epsilon/2^j\)</span>。于是 <span class="math display">\[\mu((a,
b])\leq\sum_{j=1}^\infty\mu((a_j, b_j+\delta_j])=\sum_{j=1}^\infty
\mu((a_j, b_j]) + \epsilon.\]</span> 由 <span class="math inline">\(\epsilon\)</span> 任意性定理得证。</p>
<h1 id="outer-measure">3.2 Outer Measure</h1>
<p>这一节介绍了外测度的概念。</p>
<p>如果我们有一个集合族 <span class="math inline">\(\mathcal{A}\)</span>
(<span class="math inline">\(\mathcal{A}\)</span>
一般是个代数)，以及其上的函数 <span class="math inline">\(\mu:\
\mathcal{A}\to[0,+\infty]\)</span>，则我们可以定义 <span class="math inline">\(2^{\Omega}\)</span> 上的外测度 <span class="math inline">\(\mu^\ast\)</span> 为 <span class="math display">\[\mu^\ast(E) =
\inf\left\{\sum_{n=1}^\infty\mu(E_n),\ E_n\in\mathcal{A},
E\subset\bigcup_{n=1}^\infty E_n\right\}.\]</span> 外测度 <span class="math inline">\(\mu^\ast\)</span> 满足：</p>
<blockquote>
<ol type="1">
<li><span class="math inline">\(\mu^\ast(\emptyset)=0\)</span>。</li>
<li>单调性。</li>
<li>次可数可加性。</li>
</ol>
</blockquote>
<p>Todd Kemp 视频里面提到 <span class="math inline">\(\mu^\ast\)</span>
可以用来区别有限可加测度和预测度：</p>
<blockquote>
<ol type="1">
<li>如果 <span class="math inline">\((\mu, \mathcal{A})\)</span>
是预测度，则<strong>在 <span class="math inline">\(\sigma(\mathcal{A})\)</span> 上有 <span class="math inline">\(\mu(E)\leq\mu^\ast(E)\)</span>，并且在 <span class="math inline">\(\mathcal{A}\)</span> 上有 <span class="math inline">\(\mu=\mu^\ast\)</span></strong>。</li>
<li>如果 <span class="math inline">\((\mu, \mathcal{A})\)</span>
是有限可加测度，则<strong>在 <span class="math inline">\(\mathcal{A}\)</span> 上有 <span class="math inline">\(\mu(E)\geq\mu^\ast(E)\)</span></strong>。</li>
</ol>
</blockquote>
<h1 id="outer-pseudo-metric">4.1 Outer Pseudo-Metric</h1>
<p>这一节介绍了 Carathéodory 测度扩张定理。设 <span class="math inline">\((\Omega,\mathcal{A},\mu)\)</span>
是一个预测度空间。即 <span class="math inline">\(\mu\)</span>
是定义在代数 <span class="math inline">\(\mathcal{A}\)</span>
上的可数可加测度。我们将把它扩充为 <span class="math inline">\(\sigma(\mathcal{A})\)</span>
上的可数可加测度。</p>
<p>定义外测度 <span class="math inline">\(\mu^\ast:2^\Omega\to[0,\infty]\)</span> 为 <span class="math display">\[\mu^\ast(E)=\inf\left\{\sum_{n=1}^\infty\mu(A_n):E\subseteq\bigcup_{n=1}^\infty
A_n,A_n\in\mathcal{A}\right\}\]</span></p>
<div class="unnumbered statement theorem-unnumbered plain">
<p><span class="statement-heading"><span class="statement-label">定理</span>.</span><span class="statement-spah">
</span>存在 <span class="math inline">\(\sigma\)</span>- 域 <span class="math inline">\(\mathcal{M}\supset\mathcal{A}\)</span> 使得 <span class="math inline">\(\mu^\ast\mid_{\mathcal{M}}\)</span>
是可数可加测度。</p>
</div>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>Todd Kemp 评论说，<span class="math inline">\(\mathcal{M}\)</span>
最大可以是多大是一个非常深刻的技术问题。</p>
</div>
<p>标准的证明途径是规定 <span class="math display">\[\mathcal{M}=\{E\in\Omega\mid
\mu^\ast(T)=\mu^\ast(T\cap E)+\mu^\ast(T\cap E^c),\forall
T\in\Omega\}.\]</span></p>
<p>这里介绍了 Driver 的方法。这个方法稍微有一点缺陷，它要求 <span class="math inline">\(\mu:\mathcal{A}\to[0,\infty)\)</span>
是一个有限测度。稍后也可以扩展到 <span class="math inline">\(\sigma\)</span>-
有限测度。在概率论中这足够了。</p>
<h1 id="radon-measures">✅ 5.1 Radon Measures</h1>
<p>本讲介绍了实直线上的 Radon 测度等价于 Stieltjes 测度。</p>
<p>Radon 测度是指对任何紧集 <span class="math inline">\(K\)</span> 有
<span class="math inline">\(\mu(K)&lt;\infty\)</span>
的测度。这种测度的分布函数必然是单调、右连续的，从而根据之前介绍的预测度和测度扩张定理给出了实直线上的一个可数可加测度。</p>
<h1 id="lebesgue-measure">✅ 5.2 Lebesgue Measure</h1>
<p>无要点</p>
<h1 id="random-variables-motivation">✅ 6.1 Random Variables
Motivation</h1>
<p>本节介绍了随机变量，分布函数的概念。样本空间 <span class="math inline">\(\Omega\)</span> (modelling space)
是难以接触到的，我们对其的观测是通过随机变量来进行的。</p>
<p>随机变量 <span class="math inline">\(X\)</span> 的分布函数为 <span class="math inline">\(F(t) = \mathbb{P}(X\leq t),\,
t\in\overline{\mathbb{R}}\)</span>。<span class="math inline">\(F(t)\)</span> 是单调递增且右连续的。</p>
<h1 id="measurable-functions">✅ 6.2 Measurable Functions</h1>
<p>本讲介绍了测度空间上可测映射的概念。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
12.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f:\Omega\to\mathcal{S}\)</span> 是一个映射，<span class="math inline">\(\mathcal{A}\subset2^\mathcal{S}\)</span> 是 <span class="math inline">\(\mathcal{S}\)</span> 中一个集合族，定义 <span class="math display">\[f^{-1}(\mathcal{A}) =
\{f^{-1}(E),E\in\mathcal{A}\}.\]</span> 则 <span class="math inline">\(\sigma(f^{-1}(\mathcal{A}))=
f^{-1}(\sigma(\mathcal{A}))\)</span>。</p>
</div>
<p>引理的证明不难， 只要注意到一个 <span class="math inline">\(\sigma\)</span>- 域在映射下的像 (push forward)
和逆映射下的原像 (push back) 都是 <span class="math inline">\(\sigma\)</span>- 域即可。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
12.2</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\((\Omega,\mathcal{F})\)</span> 和 <span class="math inline">\((\mathcal{S}, \mathcal{B})\)</span>
是两个可测空间，我们称 <span class="math inline">\(f:\Omega\to\mathcal{S}\)</span>
是一个可测映射，如果有 <span class="math inline">\(f^{-1}(\mathcal{B})\subseteq\mathcal{F}\)</span>。</p>
</div>
<p>要检查一个映射是不是可测的，我们不必对每个 <span class="math inline">\(B\in\mathcal{B}\)</span> 都检查，只要对满足 <span class="math inline">\(\sigma(\mathcal{A})=\mathcal{B}\)</span>
的一个子集合族 <span class="math inline">\(\mathcal{A}\)</span> 检查有
<span class="math inline">\(f^{-1}(\mathcal{A})\subseteq\mathcal{F}\)</span>
即可。这是因为由上面的引理， <span class="math display">\[f^{-1}(\mathcal{B})=f^{-1}(\sigma(\mathcal{A}))=\sigma(f^{-1}(\mathcal{A}))\subseteq\mathcal{F}.\]</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
12.3</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(X_1,\ldots,X_n\)</span> 都是测度空间 <span class="math inline">\((\Omega,\mathcal{F})\)</span> 上的可测函数，<span class="math inline">\(f:\mathbb{R}^n\to\mathbb{R}\)</span>
是一个连续或者 Borel 可测的多元函数，则 <span class="math inline">\(Y=f(X_1,\ldots,X_n)\)</span> 也是可测函数。</p>
</div>
<p><strong>证明</strong>：记 <span class="math inline">\(X=(X_1,\ldots,X_n)\)</span>，我们要说明复合映射
<span class="math display">\[\Omega\xrightarrow{\ X\
}\mathbb{R}^n\xrightarrow{\ f\ }\mathbb{R}\]</span> 是可测的。由于 <span class="math inline">\(f\)</span> 显然可测，只要再说明 <span class="math inline">\(X\)</span> 是可测的。根据上面的引理，只要验证
<span class="math display">\[X^{-1}\left((-\infty, t_1], (-\infty,
t_2],\ldots, (-\infty, t_n]\right)=\bigcap_{i=1}^n \{X_i\leq
t_i\}.\]</span> 是可测的，这显然。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="robustness-of-measurability">✅ 7.1 Robustness of
Measurability</h1>
<p>本讲主要介绍了可测函数集合在通常的运算，以及取极限的操作下得到的仍然是可测函数。</p>
<p>下面这个结论在整个课程中都会频繁用到：</p>
<div id="doob-dynkin-------" class="statement sta_doob_dynkin___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Doob-Dynkin 分解</span>.</span><span class="statement-spah"> </span>设有限或者可数指标集 <span class="math inline">\(I=\{1,\ldots,d\}\)</span> 或者 <span class="math inline">\(I=\mathbb{Z}^+\)</span>。 <span class="math display">\[X(\omega)=(X_i(\omega))_{i\in I}\in
\mathbb{R}^I.\]</span> 其中每个 <span class="math inline">\(X_i:(\Omega,\mathcal{F})\to(\mathbb{R},
\mathcal{B}(\mathbb{R}))\)</span> 都是可测函数。</p>
<p>设 <span class="math inline">\(Y:(\Omega,\mathcal{F})\to(\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
且 <span class="math inline">\(Y\)</span> 关于 <span class="math inline">\(\sigma(X_1,\ldots,X_i,\ldots)\)</span>
可测。则存在 Borel 可测函数 <span class="math inline">\((\mathbb{R}^I,\mathcal{B}(\mathbb{R}^I))\to\mathbb{R}\)</span>
使得 <span class="math display">\[Y=f(X).\]</span></p>
</div>
<p><strong>证明</strong>：</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
13.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(T:\Omega\to\Omega'\)</span> 为函数，<span class="math inline">\((\Omega,\mathcal F)\)</span> 与 <span class="math inline">\((\Omega',\mathcal A')\)</span>
为可测空间。函数 <span class="math inline">\(f:\Omega\to[0,1]\)</span>
关于 <span class="math inline">\(\sigma(T)\)</span> 可测，当且仅当存在
<span class="math inline">\(\mathcal A'\)</span> 可测的 <span class="math inline">\(g:\Omega'\to[0,1]\)</span> 使得 <span class="math display">\[f=g\circ T.\]</span></p>
</div>
<p>证明：由 <span class="math inline">\(\sigma(T)\)</span>
的定义，对任意 <span class="math inline">\(A\in\sigma(T)\)</span> 都存在
<span class="math inline">\(A'\in\mathcal A'\)</span> 使 <span class="math display">\[A=T^{-1}(A').\]</span></p>
<p><strong>Step 1 示性函数</strong></p>
<p>若 <span class="math inline">\(f=\mathbb{1}_A\)</span> 且 <span class="math inline">\(A\in\sigma(T)\)</span>，取 <span class="math inline">\(A'\in\mathcal A'\)</span> 使 <span class="math inline">\(A=T^{-1}(A')\)</span>，令 <span class="math inline">\(g=\mathbb{1}_{A'}:\Omega'\to[0,1]\)</span>，则
<span class="math inline">\(g\)</span> 可测且 <span class="math display">\[g\circ T=\mathbb{1}_{A'}\circ
T=\mathbb{1}_{T^{-1}(A')}=\mathbb{1}_A=f.\]</span></p>
<p><strong>Step 2 简单函数</strong></p>
<p>若 <span class="math inline">\(f=\sum_{k=1}^m
a_k\mathbb{1}_{A_k}\)</span>，其中 <span class="math inline">\(a_k\in[0,1]\)</span>、<span class="math inline">\(A_k\in\sigma(T)\)</span>。对每个 <span class="math inline">\(k\)</span> 取 <span class="math inline">\(A_k'\in\mathcal A'\)</span> 满足 <span class="math inline">\(A_k=T^{-1}(A_k')\)</span>，并令 <span class="math display">\[g:=\sum_{k=1}^m
a_k\mathbb{1}_{A_k'}:\Omega'\to[0,1].\]</span> 则 <span class="math inline">\(g\)</span> 可测且 <span class="math inline">\(g\circ T=f\)</span>。</p>
<p><strong>Step 3 一般可测函数</strong></p>
<p>取单调递增的简单函数列 <span class="math inline">\(f_n\uparrow
f\)</span>。由第二步，对每个 <span class="math inline">\(n\)</span>
存在可测 <span class="math inline">\(g_n:\Omega'\to[0,1]\)</span> 使
<span class="math inline">\(f_n=g_n\circ T\)</span>。定义 <span class="math display">\[g(x):=\sup_{n\ge1} g_n(x),\qquad
x\in\Omega'.\]</span> 对任意 <span class="math inline">\(\omega\in\Omega\)</span>， <span class="math display">\[g\bigl(T(\omega)\bigr)=\sup_n
g_n\bigl(T(\omega)\bigr)=\sup_n f_n(\omega)=f(\omega).
\]</span> 于是 <span class="math inline">\(f=g\circ T\)</span>。</p>
<p><strong>从 <span class="math inline">\([0,1]\)</span> 推广到 <span class="math inline">\(\mathbb R\)</span></strong></p>
<p>取一个 Borel 同构 <span class="math inline">\(\phi:\mathbb
R\to(0,1)\)</span>（例如 <span class="math inline">\(\phi(t)=\tfrac1\pi\arctan
t+\tfrac12\)</span>）。若 <span class="math inline">\(Y:\Omega\to\mathbb
R\)</span> 关于 <span class="math inline">\(\sigma(T)\)</span> 可测，则
<span class="math inline">\(\phi\circ Y:\Omega\to(0,1)\)</span>
亦可测。由引理存在可测 <span class="math inline">\(g:\Omega'\to[0,1]\)</span> 使 <span class="math display">\[\phi\circ Y=g\circ T.\]</span> 令 <span class="math display">\[f:=\phi^{-1}\circ
g:\Omega'\to\mathbb{R}.\]</span> 则 <span class="math inline">\(f\)</span> Borel 可测且 <span class="math inline">\(Y=f\circ T\)</span>。</p>
<p><strong>应用于 Doob–Dynkin（<span class="math inline">\(\mathbb{R}^d\)</span> 与 <span class="math inline">\(\mathbb{R}^\infty\)</span>）</strong></p>
<p>取指标集 <span class="math inline">\(I=\{1,\dots,d\}\)</span>（有限维）或 <span class="math inline">\(I=\mathbb{Z}^+\)</span>。给定可测 <span class="math inline">\(X_i:(\Omega,\mathcal{F})\to(\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>，定义
<span class="math display">\[X:=(X_i)_{i\in I}:\Omega\to\mathbb
R^{I}.\]</span> 在 <span class="math inline">\(\mathbb R^{I}\)</span>
上取乘积拓扑的 Borel <span class="math inline">\(\sigma\)</span>-代数
<span class="math inline">\(\mathcal B(\mathbb R^{I})\)</span>。则有
<span class="math display">\[
\sigma(X_1,X_2,\dots)=X^{-1}(\mathcal B(\mathbb R^{I})).
\]</span> 若 <span class="math inline">\(Y:\Omega\to\mathbb R\)</span>
关于 <span class="math inline">\(\sigma(X_1,X_2,\dots)\)</span> 可测，取
<span class="math inline">\(T=X\)</span>、<span class="math inline">\(\Omega'=\mathbb R^{I}\)</span>、<span class="math inline">\(\mathcal A'=\mathcal B(\mathbb
R^{I})\)</span>，由上节得到 Borel 可测 <span class="math inline">\(f:\mathbb R^{I}\to\mathbb R\)</span> 使 <span class="math display">\[
Y=f\bigl(X_1,X_2,\dots\bigr).
\]</span> 上述论证对有限 <span class="math inline">\(I\)</span> 与可数
<span class="math inline">\(I\)</span> 完全一致。</p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>令 <span class="math inline">\(X(\omega)=(X_i(\omega))_{i\in
I}\)</span>，我们要证 <span class="math display">\[
\sigma(X_1,X_2,\ldots)=X^{-1}\bigl(\mathcal B(\mathbb R^{I})\bigr).
\tag{$\ast$}
\]</span></p>
<p>设 <span class="math inline">\(\mathcal C\)</span>
为所有柱集的族。利用原像保持 <span class="math inline">\(\sigma\)</span>-运算的事实， <span class="math display">\[X^{-1}\bigl(\sigma(\mathcal
C)\bigr)=\sigma\bigl(X^{-1}(\mathcal C)\bigr).\]</span> 但对任意柱集
<span class="math display">\[
C=\prod_{i\in I}B_i\quad(\text{仅有限多 }B_i\neq\mathbb R)\]</span> 都有
<span class="math display">\[X^{-1}(C)=\bigcap_{i:\,B_i\neq\mathbb R}
X_i^{-1}(B_i)\in \sigma(X_i:i\in I).\]</span> 于是 <span class="math display">\[
X^{-1}\bigl(\mathcal B(\mathbb R^{I})\bigr)
= X^{-1}\bigl(\sigma(\mathcal C)\bigr)
= \sigma\bigl(X^{-1}(\mathcal C)\bigr)
\subset \sigma(X_i:i\in I).
\]</span> 另一方面 <span class="math display">\[
\pi_i:\mathbb R^{I}\to\mathbb R,\qquad \pi_i\bigl((s_j)_{j\in
I}\bigr)=s_i,
\]</span> 为坐标投影。它是<strong>连续</strong>的。因此对任意 <span class="math inline">\(B\in\mathcal B(\mathbb R)\)</span>，有 <span class="math display">\[
\pi_i^{-1}(B)\in\mathcal B(\mathbb R^{I}).
\]</span> 另一方面， <span class="math display">\[
X_i=\pi_i\circ X \quad\Rightarrow\quad
X_i^{-1}(B)=X^{-1}\bigl(\pi_i^{-1}(B)\bigr)\in X^{-1}\bigl(\mathcal
B(\mathbb R^{I})\bigr).
\]</span> 这对所有 <span class="math inline">\(i\)</span>、所有 <span class="math inline">\(B\in\mathcal B(\mathbb R)\)</span>
都成立，于是由生成性得 <span class="math display">\[
\sigma(X_i:i\in I)\subset X^{-1}\bigl(\mathcal B(\mathbb R^{I})\bigr).
\]</span></p>
</div>
<h1 id="riemann-stieltjes-integration">✅ 7.2 Riemann-Stieltjes
Integration</h1>
<p>无要点。</p>
<h1 id="simple-integeration">✅ 8.1 Simple Integeration</h1>
<p>无要点</p>
<h1 id="monotone-convergence-theorem">✅ 8.2 Monotone convergence
theorem</h1>
<p>本讲给出了<strong>非负可测函数积分</strong>的定义：设 <span class="math inline">\(f\in L^+\)</span> 为非负可测函数，其积分定义为
<span class="math display">\[\int f\,\mathrm{d}\mu=
\sup\left\{\int\varphi\,\mathrm{d}\mu:\ \varphi\leq f,\ \varphi \text{
simple and measuable}\right\}.\]</span></p>
<p>这个定义的问题在于不容易直接得出积分的可加性： <span class="math display">\[\int (f+g) \,\mathrm{d}\mu=\int f\,\mathrm{d}\mu+
\int g\,\mathrm{d}\mu.\]</span></p>
<p>为此先证明了单调收敛定理：</p>
<div id="------------------" class="statement sta_______ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">单调收敛定理</span> <span class="statement-info">(MCT)</span>.</span><span class="statement-spah">
</span>若 <span class="math inline">\(\{f_n\}\in L^+\)</span> 且 <span class="math inline">\(f_n\uparrow f\)</span>，则 <span class="math inline">\(\int f_n\,\mathrm{d}\mu\uparrow \int
f\,\mathrm{d}\mu\)</span>。</p>
</div>
<p><strong>证明概要</strong>：显然 <span class="math inline">\(\lim\limits_{n\to\infty}\int
f_n\,\mathrm{d}\mu\)</span> 存在且小于等于 <span class="math inline">\(\int
f\,\mathrm{d}\mu\)</span>。为了证明二者相等，只要证明对任何简单函数
<span class="math inline">\(\varphi\leq f\)</span> 有 <span class="math display">\[\lim_{n\to\infty} \int f_n\,\mathrm{d}\mu\geq
\int \varphi\,\mathrm{d}\mu\]</span> 即可。<strong>不要指望通过分析集合
<span class="math inline">\(\{f_n\geq \varphi\}\)</span>
来得出结论</strong>，这完全可能对任何 <span class="math inline">\(n\)</span> 都是空集。但是如果可以证明对任何 <span class="math inline">\(0&lt;c&lt;1\)</span> 有 <span class="math display">\[\lim_{n\to\infty} \int f_n\,\mathrm{d}\mu\geq c
\int \varphi\,\mathrm{d}\mu\]</span> 成立，那么令 <span class="math inline">\(c\uparrow1\)</span>
即得结论（两边都是非负的）。而集合 <span class="math inline">\(E_n=\{f_n\geq c\varphi\}\)</span> 满足 <span class="math inline">\(E_n\uparrow\Omega\)</span>。于是由 <span class="math inline">\(f_n\geq c\varphi\mathbb{1}_{E_n}\)</span>
以及积分单调性有 <span class="math display">\[\int
f_n\,\mathrm{d}\mu\geq
c\int\varphi\mathbb{1}_{E_n}\,\mathrm{d}\mu.\]</span> 由于 <span class="math inline">\(\varphi\)</span> 是简单函数，所以可设 <span class="math inline">\(\varphi = \sum_{k} a_k\mathbb{1}_{A_k}\)</span>
并代入上面右边，有 <span class="math display">\[\int
f_n\,\mathrm{d}\mu\geq c\int\varphi\mathbb{1}_{E_n}\,\mathrm{d}\mu=
c\sum_{k}a_k\mu(A_k\cap E_n).\]</span> 令 <span class="math inline">\(n\to\infty\)</span> 并利用测度连续性 <span class="math inline">\(\mu(A_k\cap E_n)\uparrow\mu(A_k)\)</span> 即得
<span class="math display">\[\lim_{n\to\infty} \int
f_n\,\mathrm{d}\mu\geq c\sum_ka_k\mu(A_k)= c \int
\varphi\,\mathrm{d}\mu.\]</span> 单调收敛定理得证。<span class="math inline">\(\blacksquare\)</span></p>
<p><strong>MCT
告诉我们总是可以用一个只取有限多个值、每个值都有限的简单函数来逼近 <span class="math inline">\(f\)</span> 的积分</strong>。</p>
<p>非负可测函数 <span class="math inline">\(f\)</span>
可以用简单函数序列 <span class="math display">\[\varphi_n =
\sum_{k=1}^{2^{2n}}\frac{k-1}{2^n}\mathbb{1}_{\{\frac{k-1}{2^n}\leq
f&lt;\frac{k}{2^n}\}} + 2^n\mathbb{1}_{\{f\geq 2^n\}}\]</span>
来逼近。在第 <span class="math inline">\(n\)</span>
次切割中，我们将切割范围扩大为原来的 2 倍以逼近 <span class="math inline">\(f\)</span> 在 <span class="math inline">\(\infty\)</span>
的部分，同时将切割的间隔缩小为原来的 1/2 以保证逼近的误差是减小的。</p>
<h1 id="integrals-and-null-sets">✅ 9.1 Integrals and Null Sets</h1>
<p>本讲主要是论证积分的基本结论在 <span class="math inline">\(\mathrm{a.e.}\)</span>
的情形下也都成立。此外介绍了非负可测函数列积分的 Fatou
定理，它是上一讲中单调收敛定理的直接推论：</p>
<div id="fatou-------" class="statement sta_fatou___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Fatou
定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f_n\in L^+\)</span> 是非负可积函数列，则 <span class="math display">\[\int\liminf f_n\,\mathrm{d}\mu\leq \liminf \int
f_n\,\mathrm{d}\mu.\]</span></p>
</div>
<p><strong>证明</strong>：设 <span class="math inline">\(g_n=\inf_{m\geq
n}f_m\)</span>，则 <span class="math inline">\(g_n\leq
f_m\)</span>，所以 <span class="math display">\[\int
g_n\,\mathrm{d}\mu\leq\int f_m\,\mathrm{d}\mu,\quad n\leq m\]</span>
从而 <span class="math inline">\(\int g_n\,\mathrm{d}\mu\leq\liminf\int
f_m\,\mathrm{d}\mu\)</span>。 另一方面 <span class="math inline">\(g_n\uparrow\liminf f_n\)</span>，所以利用 MCT 有
<span class="math display">\[\int\liminf
f_n\,\mathrm{d}\mu=\int\lim_{n\to\infty}
g_n\,\mathrm{d}\mu=\lim_{n\to\infty}\int
g_n\,\mathrm{d}\mu\leq\liminf\int f_m\,\mathrm{d}\mu.\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<p>另一个重要结论是 Borel-Cantelli 引理：</p>
<div id="borel-cantelli" class="statement sta_borel_cantelli plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Borel-Cantelli</span> <span class="statement-info">(Ⅰ)</span>.</span><span class="statement-spah">
</span>如果 <span class="math inline">\(\sum_{n=0}^\infty\mu(A_n)&lt;\infty\)</span>，则
<span class="math inline">\(\mu\{A_n,\ \mathrm{i.o.}\}=0\)</span>。</p>
</div>
<p>这个用积分很容易看出来： <span class="math display">\[\sum_{n=0}^\infty\mu(A_n)=\int\sum_{n=0}^\infty\mathbb{1}_{A_n}\,\mathrm{d}\mu.\]</span>
左边如果有限，那么右边的函数必须几乎处处有限，所以 <span class="math inline">\(\{A_n,\ \mathrm{i.o.}\}\)</span> 是零测集。</p>
<h1 id="l1-and-the-dct">✅ 9.2 <span class="math inline">\(L^1\)</span>
and the DCT</h1>
<p>本讲引入了一般可积函数的定义，并证明了控制收敛定理。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
18.1</span>.</span><span class="statement-spah"> </span>称 <span class="math inline">\(f\in L^1(\Omega,\mathcal{F},\mathbb{P})\)</span>
为可积函数，如果 <span class="math inline">\(f^+,f^-\)</span>
都是可积的：<span class="math inline">\(\int
f^{\pm}\,\mathrm{d}\mu&lt;\infty\)</span>。此时我们定义 <span class="math inline">\(\int f=\int f^+-\int
f^-\)</span>。或者等价地，<span class="math inline">\(f\)</span>
可积当且仅当 <span class="math inline">\(\int
|f|\,\mathrm{d}\mu&lt;\infty\)</span>。</p>
</div>
<p>对可积函数，积分是<strong>线性的</strong>、<strong>保持单调性的</strong>。</p>
<p>如果我们将几乎处处相等的函数看作是同一个函数的话，<span class="math inline">\(\|\cdot\|_{L^1}\)</span>
是可积函数空间上的度量。</p>
<div id="-------------------1" class="statement sta_______-1 plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">控制收敛定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f_n,
g\)</span> 都是可积函数并且 <span class="math inline">\(|f_n|\leq
g\)</span>，<span class="math inline">\(\lim\limits_{n\to\infty}f_n=f\)</span>。 则 <span class="math inline">\(f\)</span> 也是可积函数并且 <span class="math inline">\(\lim\limits_{n\to\infty}\int f_n=\int
f\)</span>。</p>
</div>
<p><strong>证明概要</strong>：显然 <span class="math inline">\(|f|\leq
g\)</span>，所以 <span class="math inline">\(f\)</span>
可积，从而由线性性质 <span class="math inline">\(g\pm f\)</span>
都是可积的。对可积函数序列 <span class="math inline">\(g\pm f_n\)</span>
使用 Fatou 引理，有 <span class="math display">\[\int (g\pm
f)\,\mathrm{d}\mu=\int\varliminf_{n\to\infty} (g\pm
f_n)\,\mathrm{d}\mu\leq \varliminf_{n\to\infty}\int (g\pm
f_n)\,\mathrm{d}\mu= \int g\,\mathrm{d}\mu\pm\varliminf_{n\to\infty}\int
f_n\,\mathrm{d}\mu.\]</span> 比较两边有 <span class="math display">\[\int (g\pm f)\,\mathrm{d}\mu\leq \int
g\,\mathrm{d}\mu\pm \varliminf_{n\to\infty}\int
f_n\,\mathrm{d}\mu.\]</span> 消去 <span class="math inline">\(g\)</span>
的积分，并注意对任何实数列 <span class="math inline">\(\{a_n\}\)</span>
有 <span class="math inline">\(\varliminf\limits_{n\to\infty}(-a_n)=-\varlimsup\limits_{n\to\infty}
a_n\)</span>，从而 <span class="math display">\[\varlimsup\int
f_n\,\mathrm{d}\mu\leq \int f\,\mathrm{d}\mu\leq \varliminf\int
f_n\,\mathrm{d}\mu.\]</span> 即得结论。</p>
<h1 id="integrals-and-derivatives">✅ 10.1 Integrals and
Derivatives</h1>
<p>这一讲介绍了在何种条件下，可以在积分号下对参数求导。</p>
<p>我把视频中的结论作了一些加强，实际上是等价的：</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
19.1</span>.</span></p>
<ol type="1">
<li><span class="math inline">\(f(t, \cdot)\)</span> 对每个 <span class="math inline">\(t\)</span> 都是可测的，而且是 <span class="math inline">\(L^1\)</span> 可积的；</li>
<li><span class="math inline">\(\frac{\partial f}{\partial
t}(t,\omega)\)</span> 对几乎处处的 <span class="math inline">\(\omega\)</span> 有定义；</li>
<li><span class="math inline">\(|\frac{\partial f}{\partial
t}(t,\omega)|\le g(\omega)\)</span> 对某个 <span class="math inline">\(g\in L^1\)</span> 几乎处处成立。</li>
</ol>
<p>则 <span class="math display">\[\frac{\mathrm d}{\mathrm d t}\int
f(t,\omega)\,\mu(\mathrm d\omega)=\int \frac{\partial f}{\partial
t}(t,\omega)\,\mu(\mathrm d\omega).\]</span></p>
</div>
<p>注意：对所有的 <span class="math inline">\(t\)</span>，使得 2, 3
成立的那些 <span class="math inline">\(\omega\)</span>
组成的集合必须是固定的，不能随着 <span class="math inline">\(t\)</span>
变化而变化。反例：<span class="math inline">\((0,1)\)</span> 上的
Lebesgue 测度，<span class="math inline">\(f(t,\omega)=\mathbb{1}_{\{\omega\le
t\}}\)</span>。</p>
<h1 id="the-radon-nikodym-theorem">✅ 11.1 The Radon-Nikodym
Theorem</h1>
<p>本讲介绍了 Radon-Nikodym 定理，不过没有给出证明。</p>
<p><strong>Motivation</strong>: 设 <span class="math inline">\(\mu,\nu\)</span> 是两个测度，是否存在非负可测函数
<span class="math inline">\(\rho\)</span> 使得 <span class="math inline">\(\nu(A)=\int_A\rho\,\mathrm{d}\mu\)</span>
对任何可测集 <span class="math inline">\(A\)</span> 成立？</p>
<p><strong>必要条件</strong>：<span class="math inline">\(\mu(A)=0\Rightarrow\nu(A)=0\)</span>。这时我们称
<span class="math inline">\(\nu\)</span> 关于 <span class="math inline">\(\mu\)</span> <strong>绝对连续</strong>，记作 <span class="math inline">\(\nu\ll\mu\)</span>。</p>
<p>此条件同样也是充分的：若 <span class="math inline">\(\nu\)</span>
关于 <span class="math inline">\(\mu\)</span> 绝对连续，则存在 <span class="math inline">\(\rho\)</span> 使得 <span class="math inline">\(\rho=\dfrac{\mathrm{d}\nu}{\mathrm{d}\mu}\)</span>。</p>
<p><strong>奇异连续测度的例子</strong>：Cantor 函数 (devil
staircase)。<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=dQXVn7pFsVI">YouTube
科普</a>。此函数没有点质量，也没有密度函数，但是确实给出一个全质量为 1
的概率测度。</p>
<ul>
<li>此函数是连续递增的，所以是一个分布函数。</li>
<li>此函数是连续的，所以没有点质量，即单个点的测度是 0。</li>
<li>此函数是奇异的，因为它在除去 Cantor
集对应的点之外几乎处处是常数。</li>
</ul>
<h1 id="probability-laws-revisited">✅ 11.2 Probability Laws
Revisited</h1>
<div id="---------------------------" class="statement sta__________ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">积分的变量替换定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(X:\
(\Omega,\mathcal{F},\mu)\to(\mathcal{S},\mathcal{B})\)</span>
是一个可测映射，<span class="math inline">\((\mathcal{S},\mathcal{B})\)</span> 上的测度 <span class="math inline">\(\nu\)</span> 由 <span class="math inline">\(\nu(E)
= \mu(X^{-1}(E))\)</span> 给出，<span class="math inline">\(g:\
(\mathcal{S},\mathcal{B},\nu)\to\mathbb{R}\)</span> 是一个可积函数，则
<span class="math display">\[\int_{\Omega}g\circ
X\,\mathrm{d}\mu=\int_{\mathcal{S}}g\,\mathrm{d}\nu.\]</span></p>
</div>
<p>示意图：</p>
<p><span class="math display">\[\underbrace{\Omega\xrightarrow{\ X\
}\overbrace{S\xrightarrow{\ g\
}\mathbb{R}}^{\int_{\mathcal{S}}g\,\mathrm{d}\nu}}_{\int_{g\circ
X\,\mathrm{d}\mu}}.\]</span></p>
<p><strong>证明概要</strong>：首先考察 <span class="math inline">\(g=\mathbb{1}_B,\,B\in\mathcal{B}\)</span>
是指标函数的情形。 <span class="math display">\[\int_{\mathcal{S}}
g\,\mathrm{d}\nu= \nu(B) =
\mu(X^{-1}(B))=\int_{\Omega}\mathbb{1}_{X^{-1}(B)}\,\mathrm{d}\mu.\]</span>
由于 <span class="math inline">\(\omega\in X^{-1}(B)\Leftrightarrow
X(\omega)\in B\)</span>，所以 <span class="math inline">\(\mathbb{1}_{X^{-1}(B)} = \mathbb{1}_{B}\circ
X\)</span>，所以上式右边的积分等于 <span class="math display">\[\int_{\Omega}\mathbb{1}_{B}\circ
X\,\mathrm{d}\nu.\]</span>
此时结论成立。根据积分的线性性质结论对简单函数也成立，从而进一步取极限可得对任何可积函数
<span class="math inline">\(g\)</span> 都成立。</p>
<h1 id="l2">✅ 12.1 <span class="math inline">\(L^2\)</span></h1>
<p>无要点</p>
<h1 id="the-weak-law-of-large-numbers-wlln">✅ 12.2 The Weak Law of
Large Numbers (WLLN)</h1>
<p>这一讲证明了弱大数定律，即当 <span class="math inline">\(\{X_n\}\)</span> 是 <span class="math inline">\(L^2\)</span> 可积的 i.i.d 序列时有 <span class="math display">\[\mathbb{P}\left(|\frac{S_n}{n} - a|\geq
\epsilon\right) = O(\frac{1}{n}).\]</span></p>
<h1 id="convergence-in-measure">✅ 13.1 Convergence in measure</h1>
<p>本讲介绍了可测函数的依测度收敛概念，及其与逐点收敛之间的联系。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
24.1</span>.</span><span class="statement-spah"> </span>称 <span class="math inline">\(f_n\to_{\mu} f\)</span> 为依测度收敛，如果对任意
<span class="math inline">\(\epsilon &gt;0\)</span> 有 <span class="math display">\[\lim_{n\to\infty}\mu\{|f_n-f|\geq0\}=0.\]</span></p>
</div>
<p><strong>依测度收敛但不处处收敛的例子</strong>：将区间 <span class="math inline">\([0, 1]\)</span> 等分为 <span class="math inline">\(2^n\)</span>
份，将它们的指标函数排成一排，再对所有 <span class="math inline">\(n\)</span> 将这些片段排列起来得到序列 <span class="math inline">\(f_n\)</span>，则 <span class="math inline">\(f_n\)</span> 依测度收敛到 0 但不逐点收敛。</p>
<p><strong>接下来是一个将测度和逐点收敛联系起来的重要技巧</strong>：根据几乎处处收敛的定义，<span class="math inline">\(f_n\to f,\mathrm{a.e.}\)</span> 收敛即要求对任何
<span class="math inline">\(\epsilon&gt;0\)</span> 有 <span class="math display">\[\mu\{|f_n-f|\geq\epsilon,\ \mathrm{i.o.}\} =
0.\]</span>
这样就可以把逐点收敛和测度联系起来。有时候我们还可以使用更强的条件：
<span class="math display">\[\mu\{|f_n-f|\geq 2^{-n},\ \mathrm{i.o.}\} =
0.\]</span> 这是因为对任何 <span class="math inline">\(\epsilon\)</span>，<span class="math inline">\(n\)</span> 足够大时 <span class="math inline">\(2^{-n}&lt;\epsilon\)</span>, 从而 <span class="math inline">\(\{|f_n-f|\geq\epsilon\}\subseteq\{|f_n-f|\geq
2^{-n}\}\)</span>，前者发生无穷多次自然意味着后者也发生无穷多次。这样就可以和
Borel-Cantelli 引理结合起来使用，只要 <span class="math display">\[\sum_{n}\mu\{|f_n - f|\geq 2^{-n}\} &lt;
\infty,\]</span> 就可以保证 <span class="math inline">\(\{f_n\}\)</span>
是几乎处处收敛的。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
24.2</span>.</span><span class="statement-spah">
</span>逐点收敛可以推出依测度收敛。</p>
</div>
<p><strong>简要证明</strong>：对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，记 <span class="math inline">\(A_n=\{|f_n-f|\geq\epsilon\}\)</span>，则 <span class="math display">\[\mu\{A_n,\ \mathrm{i.o.}\} =
\lim_{n\to\infty}\mu(\bigcup_{k\geq n}A_k)\geq
\lim_{n\to\infty}\mu(A_n).\]</span></p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
24.3</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{f_n\}\)</span> 为依测度收敛的 Cauchy 序列：
<span class="math display">\[\lim_{n,m\to\infty}\mu\{|f_n-f_m|\geq\epsilon\} =
0.\]</span> 则 <span class="math inline">\(f_n\)</span>
必有逐点收敛的子序列 <span class="math inline">\(f_{n_k}\to f\
\mathrm{a.e.}\)</span>，并且 <span class="math inline">\(f_n\)</span>
依测度收敛到 <span class="math inline">\(f\)</span>。</p>
</div>
<p><strong>必有逐点收敛的子序列</strong>：利用上面介绍的技巧，归结为抽取子序列
<span class="math inline">\(\{f_{n_k}\}\)</span> 满足 <span class="math display">\[\mu\{|f_{n_{k+1}} - f_{n_k}|\geq2^{-k},\
\mathrm{i.o.}\} = 0.\]</span> 利用 Borel-Cantelli 引理这只要让 <span class="math inline">\(\sum_{k=1}^\infty\mu\{|f_{n_{k+1}} - f_{n_k}|\geq
2^{-k}\}&lt;\infty\)</span> 即可。为此又只要让 <span class="math inline">\(\mu\{|f_{n_{k+1}} - f_{n_k}|\geq 2^{-k}\}\leq
2^{-k}\)</span> 即可。根据 Cauchy 条件这是可以做到的。</p>
<p><strong>子序列的极限也是原序列的依测度极限</strong>：对任何 <span class="math inline">\(n\)</span>，取 <span class="math inline">\(n_{k}&gt;n\)</span> 则有 <span class="math display">\[\{|f_n-f|\geq\epsilon\}\subseteq
\{|f_n-f_{n_k}|\geq\epsilon/2\}\cup
\{|f_{n_k}-f|\geq\epsilon/2\}.\]</span> 显然 <span class="math inline">\(n\)</span> 足够大时右边两个集合测度都趋于 0。</p>
<h1 id="lp-is-complete">✅ 13.2 <span class="math inline">\(L^p\)</span>
is Complete</h1>
<p>首先我们来证明 <span class="math inline">\(L^p\)</span>
收敛可以推出依测度收敛。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
25.1</span>.</span><span class="statement-spah"> </span><span class="math inline">\(L^p\)</span> 度量是完备的，任何 Cauchy
序列必有极限。</p>
</div>
<p><strong>证明概要</strong>：<span class="math inline">\(L^p\)</span>
Cauchy 列也都是依测度 Cauchy 列，从而有几乎处处收敛的子序列 <span class="math inline">\(f_{n_k}\to f\)</span>。对固定的 <span class="math inline">\(k\)</span>，当 <span class="math inline">\(j&gt;k\)</span> 时有 <span class="math display">\[\begin{align*}\int\|f_{n_k}-f\|^p\,\mathrm{d}\mu&amp;=\int\lim_{j\to\infty}\|f_{n_k}-f_{n_j}\|^p\,\mathrm{d}\mu\leq\liminf_{j\to\infty}\int\|f_{n_k}-f_{n_j}\|^p\,\mathrm{d}\mu\\
&amp;\leq\limsup_{j\to\infty}\int\|f_{n_k}-f_{n_j}\|^p\,\mathrm{d}\mu.\end{align*}\]</span>
两边令 <span class="math inline">\(k\to\infty\)</span> 并利用 Cauchy
条件即得子序列 <span class="math inline">\(f_{n_k}\xrightarrow{L^p}f\)</span>。再利用 Cauchy
条件可得原序列 <span class="math inline">\(f_n\xrightarrow{L^p}
f\)</span>。</p>
<div id="----------------------------1" class="statement sta__________-1 plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">依测度控制收敛定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f_n\)</span> 依测度收敛到 <span class="math inline">\(f\)</span>，且 <span class="math inline">\(|f_n|\leq f,\, f\in L^1\)</span>。则 <span class="math inline">\(f_n\xrightarrow{L^1} f\)</span>。</p>
</div>
<p><strong>证明概要</strong>：假设 <span class="math inline">\(f_n\)</span> 不 <span class="math inline">\(L^1\)</span> 收敛到 <span class="math inline">\(f\)</span>，则对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，存在子序列 <span class="math inline">\(f_{n_k}\)</span> 满足：</p>
<ul>
<li><span class="math inline">\(\|f_{n_k} -
f\|_{L^1}\geq\epsilon\)</span>。</li>
<li><span class="math inline">\(f_{n_k}\)</span> 几乎处处收敛到 <span class="math inline">\(f\)</span>。</li>
</ul>
<p>这与控制收敛定理矛盾。</p>
<h1 id="dynkins-multiplicative-systems-theorem">✅ 14.1 Dynkin’s
Multiplicative Systems Theorem</h1>
<p>本讲介绍了 Dynkin <span class="math inline">\(\pi-\lambda\)</span>
定理的函数形式的版本。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
26.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\((\Omega,\mathcal{F})\)</span>
是一个可测空间，<span class="math inline">\(f\)</span>
是可测函数。如果存在 <span class="math inline">\(M&gt;0\)</span> 使得
<span class="math display">\[|f|\leq M,\quad \mathrm{a.e.}\]</span>
成立，就称 <span class="math inline">\(f\)</span> 是一个有界可测函数。记
<span class="math inline">\(\mathbb{B}(\Omega,\mathcal{F})\)</span>
为全体有界函数构成的向量空间。若 <span class="math inline">\(\{f_n\}\in\mathbb{B}(M,\mathcal{F})\)</span> 满足
<span class="math display">\[|f_n|\leq M,\ \mathrm{a.e.}\quad \forall
n\]</span> 并且 <span class="math display">\[\lim_{n\to\infty} f_n =
f,\quad \mathrm{a.e.}\]</span> 就称 <span class="math inline">\(\{f_n\}\)</span> <strong>一致有界收敛到 <span class="math inline">\(f\)</span></strong>。</p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
26.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathbb{H}\subset\mathbb{B}(\Omega)\)</span>
是一个向量空间，包含常函数 <span class="math inline">\(\mathbb{1}_\Omega\)</span>，并且在有界收敛下封闭。又设
<span class="math inline">\(\mathbb{M}\subset\mathbb{H}\)</span>
是一个乘法系：<span class="math inline">\(f,g\in\mathbb{M}\Rightarrow
f\cdot g\in\mathbb{M}\)</span>。则 <span class="math inline">\(\mathbb{H}\)</span> 包含所有关于 <span class="math inline">\(\sigma(\mathbb{M})\)</span>- 可测的有界可测函数：
<span class="math display">\[\mathbb{B}(\Omega,\sigma(\mathbb{M}))\subset
\mathbb{H}.\]</span></p>
</div>
<p><strong>证明</strong>：设 <span class="math inline">\(\mathbb{H}=\mathbb{H}(\mathbb{M})\)</span> 是包含
<span class="math inline">\(\mathbb{M}\)</span> 和 1
的向量空间。且在有界收敛下封闭。</p>
<p><strong>Step 1 <span class="math inline">\(\mathbb{H}\)</span>
是一个代数</strong></p>
<p>固定 <span class="math inline">\(f\in\mathbb{H}\)</span>，记 <span class="math inline">\(\mathbb{H}^f =\{g\in\mathbb{H}\mid f\cdot
g\in\mathbb{H}\}\)</span>。</p>
<ul>
<li><span class="math inline">\(\mathbb{H}^f\)</span> 是 <span class="math inline">\(\mathbb{H}\)</span> 的子空间</li>
<li><span class="math inline">\(\mathbb{H}^f\)</span> 包含常数 1</li>
<li><span class="math inline">\(\mathbb{H}^f\)</span>
在有界收敛下封闭</li>
</ul>
<p>特别地，如果 <span class="math inline">\(f\in\mathbb{M}\)</span>，由定义 <span class="math inline">\(\mathbb{M}\subset\mathbb{H}^f\)</span>。所以 <span class="math display">\[\mathbb{H}=\mathbb{H}(\mathbb{M})\subset
\mathbb{H}^f\subset \mathbb{H}.\]</span> 即 <span class="math inline">\(\mathbb{H}=\mathbb{H}^f\)</span>。但根据 <span class="math inline">\(f\)</span> 的任意性，这正说明对任何 <span class="math inline">\(f,g\in\mathbb{H}\)</span> 都有 <span class="math inline">\(f,g\in\mathbb{H}\)</span>。从而 <span class="math inline">\(\mathbb{H}\)</span> 是一个代数。</p>
<p><strong>Step 2 <span class="math inline">\(\mathcal{F}=\{A\subset\Omega\mid \mathbb{1}_A\in
\mathbb{H}\}\)</span> 是 <span class="math inline">\(\sigma\)</span>-
域</strong></p>
<p>这一步很容易</p>
<p><strong>Step 3 <span class="math inline">\(\mathbb{B}(\Omega,\mathcal{F})\subset\mathbb{H}\)</span></strong></p>
<p><span class="math inline">\(\mathcal{F}\)</span> 中的示性函数都在
<span class="math inline">\(\mathbb{H}\)</span> 中，从而简单函数也在
<span class="math inline">\(\mathcal{F}\)</span>
中。又因为有界收敛封闭，所以有界函数的 <span class="math inline">\(f^+,f^-\)</span> 也在 <span class="math inline">\(\mathcal{F}\)</span> 中，从而 <span class="math inline">\(f\)</span> 在 <span class="math inline">\(\mathcal{F}\)</span> 中。</p>
<p><strong>Step 4 <span class="math inline">\(\sigma(\mathbb{M})\subset
\mathcal{F}\)</span></strong></p>
<p>根据 <span class="math display">\[\sigma(\mathbb{M}) = \sigma(\cup\{
f^{-1}\mathcal{B}(\mathbb{R}), f\in\mathbb{M}\})=\sigma(\
\bigcup\{f^{-1}(a,+\infty)\mid a\in\mathbb{R}, f\in\mathbb{M}\
\}).\]</span> 所以我们只要证明所有形如 <span class="math inline">\(\mathbb{1}_{\{f&gt;a\}},\forall
f\in\mathbb{M},a\in\mathbb{R}\)</span> 的函数在 <span class="math inline">\(\mathbb{H}\)</span> 中即可。 设 <span class="math inline">\(|f|\leq M\)</span>。首先我们构造连续函数列 <span class="math inline">\(\psi_n\uparrow\mathbb{1}_{(a,+\infty)}\)</span>，这总是可以的：</p>
<p><span class="math display">\[\psi_n(t)=\begin{cases}0,&amp; t\le a\\
n(t-a), &amp; a &lt; t &lt; a+1/n\\
1, &amp; t\geq a+1/n
\end{cases}\]</span> 故 <span class="math display">\[\psi_n(f)\uparrow
\mathbb{1}_{\{f &gt; a\}}.\]</span></p>
<p>由于 <span class="math inline">\(\psi_n\)</span> 在紧集 <span class="math inline">\([-M,M]\)</span> 上连续，由 Weierstrass
逼近定理，存在多项式 <span class="math inline">\(p_{n,k}\)</span> 使得
<span class="math display">\[\sup_{|t|\le
M}|p_{n,k}(t)-\psi_n(t)|\leq\frac{1}{k}.\]</span> 因为 <span class="math inline">\(0\leq\psi_n\leq 1\)</span>，就有 <span class="math display">\[\sup_{|t|\le M}|p_{n,k}(t)|\leq \sup_{|t|\le
M}|\psi_n(t)|+\frac{1}{k} \le 2.\]</span> 于是对所有 <span class="math inline">\(n,k\)</span> 有 <span class="math display">\[\|p_{n,k}(f)\|_\infty \leq 2.\]</span></p>
<p>因为 <span class="math inline">\(\mathbb{H}\)</span> 是代数且 <span class="math inline">\(f\in\mathbb{M}\)</span>，故 <span class="math inline">\(p_{n,k}(f)\in\mathbb{H}\)</span>。 又根据 <span class="math inline">\(p_{n,k}(f)\to \psi_n(f)\)</span> 是有界收敛，所以
<span class="math inline">\(\psi_n(f)\in\mathbb{H}\)</span>。再根据
<span class="math inline">\(\psi_n(f)\uparrow
\mathbb{1}_{\{f&gt;a\}}\)</span> 也是有界收敛，得到结论。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
26.3</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\sigma(C_c(\mathbb{R})) =
\sigma(\mathbb{\mathbb{R}})\)</span>。</p>
</div>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
26.4</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu,\nu\)</span> 是 <span class="math inline">\(\mathbb{R}\)</span> 上的 Borel
概率测度，并且对任何 <span class="math inline">\(f\in
C_c(\mathbb{R})\)</span> 都有 <span class="math display">\[\int
f\,\mathrm{d}\mu= \int f\,\mathrm{d}\nu\]</span> 成立，则 <span class="math inline">\(\mu=\nu\)</span>。</p>
</div>
<p>设 <span class="math inline">\(\mathbb{H}\)</span>
是使得上面积分相等的全体有界函数成立的集合，则 <span class="math inline">\(\mathbb{H}\)</span> 包含常数
1，在有界收敛下封闭，还包含乘法系 <span class="math inline">\(C_c(\mathbb{R})\)</span>，从而 <span class="math inline">\(\mathbb{H}\)</span> 包含所有的 <span class="math inline">\(\mathbb{B}(\mathbb{R},
\sigma(C_c(\mathbb{R})))=\mathbb{B}(\mathbb{R},
\mathcal{B}(\mathbb{R}))\)</span>。特别地，对任何 Borel 可测集 <span class="math inline">\(E\)</span> 有 <span class="math inline">\(\mathbb{1}_E\in\mathcal{B}(\mathbb{R})\subset\mathbb{H}\)</span>，从而
<span class="math display">\[\mu(E) = \int \mathbb{1}_E\,\mathrm{d}\mu=
\int \mathbb{1}_E\,\mathrm{d}\nu= \nu(E).\]</span></p>
<h1 id="product-measure">✅ 14.2 Product Measure</h1>
<p>本讲介绍了乘积测度的构造。<strong>记住乘积测度的构造是用到重积分的</strong>。</p>
<p><strong>可测空间的乘积</strong>：设 <span class="math inline">\((\Omega_1,\mathcal{F_1}),\,(\Omega_2,\mathcal{F_2})\)</span>
是两个可测空间，其乘积空间定义为 <span class="math inline">\((\Omega_1\times\Omega_2,\,\sigma(\mathcal{F}_1\times\mathcal{F}_2))\)</span>。其中
<span class="math inline">\(\mathcal{F}_1\otimes\mathcal{F}_2=\sigma(\mathcal{F}_1\times\mathcal{F}_2)\)</span>
是由所有形如 <span class="math inline">\(\{A_1\times A_2,
A_i\in\mathcal{F}_i\}\)</span> 的集合生成的 <span class="math inline">\(\sigma\)</span>- 域。</p>
<p><span class="math inline">\(\mathcal{F}_1\otimes\mathcal{F}_2\)</span>
还有一种等价的刻画：它是使得投影映射 <span class="math inline">\(\pi_i(\omega_1,\omega_2)=\omega_i\)</span>
均可测的最小 <span class="math inline">\(\sigma\)</span>- 域。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
27.1</span>.</span><span class="statement-spah"> </span>随机向量 <span class="math inline">\(f:(\Omega,
\mathcal{F})\to(\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
是可测的，当且仅当其每个分量 <span class="math inline">\(f_i\)</span>
是可测的。</p>
</div>
<p><strong>证明</strong>： x <span class="math inline">\(\Rightarrow\)</span>: 每个 <span class="math inline">\(f_i=\pi_i\circ f\)</span>
作为两个可测映射的复合当然是可测的。</p>
<p><span class="math inline">\(\Leftarrow\)</span>: 本质是证明如果每个
<span class="math inline">\(X_i\)</span> 都是随机变量，则 <span class="math inline">\(X=(X_1,\ldots,X_n)\)</span> 是随机向量。对任何形如
<span class="math inline">\(E=E_i\times_{j\ne
i}\mathcal{B}_i(\mathbb{R})\)</span> 的集合，<span class="math inline">\(X^{-1}(E) =\{\omega\in\Omega: X_i(\omega)\in
E_i\}\)</span> 是可测集，而这样的 <span class="math inline">\(E\)</span>
生成了 <span class="math inline">\(\mathcal{B}(\mathbb{R}^d)\)</span>，所以 <span class="math inline">\(X^{-1}(E)\)</span> 对任何 <span class="math inline">\(E\subset\mathcal{B}(\mathbb{R}^d)\)</span>
都可测。结论得证。</p>
<p>如果每个 <span class="math inline">\((\Omega_i,\mathcal{F}_i)\)</span>
还是测度空间，其上的测度为 <span class="math inline">\(\mu_i\)</span>，则我们可以在 <span class="math inline">\((\Omega_1\times\Omega_2,\mathcal{F}_1\otimes\mathcal{F}_2)\)</span>
上定义测度 <span class="math inline">\(\mu_1\otimes\mu_2\)</span> 使得
<span class="math inline">\((\mu_1\otimes\mu_2)(E_1\times
E_2)=\mu_1(E_1)\mu_2(E_2)\)</span> 对任何 <span class="math inline">\(E_i\in\mathcal{F}_i,\, i=1,2\)</span> 成立。</p>
<p>实际上我们可以让这个乘积测度满足</p>
<p><span class="math display">\[\int_{\Omega_1\times\Omega_2}f_1\otimes
f_2\mathrm{d}(\mu_1\otimes\mu_2) =
\int_{\Omega_1}f_1\mathrm{d}\mu_1\cdot\int_{\Omega_2}f_2\mathrm{d}\mu_2.\]</span></p>
<p>首先我们假定 <span class="math inline">\(\mu_1,\mu_2\)</span>
都是有限测度。构建完毕以后再扩展到 <span class="math inline">\(\sigma\)</span>- 有限的测度上去。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
27.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f\)</span> 是一个非负的，关于 <span class="math inline">\((\Omega_1\times\Omega_2,\mathcal{F}_1\otimes\mathcal{F}_2)\)</span>
可测的函数，则</p>
<ol type="1">
<li><span class="math inline">\(f(\cdot,\omega_2)\)</span> 对任何 <span class="math inline">\(\omega_2\)</span> 都是 <span class="math inline">\(\mathcal{F}_1\)</span> 可测的。</li>
<li><span class="math inline">\(f(\omega_1,\cdot)\)</span> 对任何 <span class="math inline">\(\omega_1\)</span> 都是 <span class="math inline">\(\mathcal{F}_2\)</span> 可测的。</li>
<li><span class="math inline">\(\int_{\Omega_2}f(\cdot,\omega_2)\mu_2(\mathrm{d}\omega_2)\)</span>
是 <span class="math inline">\(\mathcal{F}_1\)</span>
可测的。注意这个积分值可能是无穷。</li>
<li><span class="math inline">\(\int_{\Omega_1}f(\omega_1,\cdot)\mu_1(\mathrm{d}\omega_1)\)</span>
是 <span class="math inline">\(\mathcal{F}_2\)</span> 可测的。</li>
<li><span class="math display">\[\int_{\Omega_1}\left(\int_{\Omega_2}f(\omega_1,\omega_2)\mu_2(\mathrm{d}\omega_2)\right)\mu_1(\mathrm{d}\omega_1)=\int_{\Omega_2}\left(\int_{\Omega_1}f(\omega_1,\omega_2)\mu_1(\mathrm{d}\omega_1)\right)\mu_2(\mathrm{d}\omega_2).\]</span></li>
</ol>
</div>
<p><strong>证明</strong>：我们先来验证结论对形如 <span class="math inline">\(f_1\otimes f_2\)</span> 的函数成立。</p>
<ol type="1">
<li><span class="math inline">\(f(\cdot,\omega_2) =
f_1(\cdot)f_2(\omega_2)\)</span> 当然是 <span class="math inline">\(\mathcal{F}_1\)</span> 可测函数。</li>
<li>同 1。</li>
<li><span class="math inline">\(\int_{\Omega_2}f(\cdot,\omega_2)\mu_2(\mathrm{d}\omega_2)=f_1(\cdot)\int_{\Omega_2}f_2(\omega_2)\mu_2(\mathrm{d}\omega_2)\)</span>。</li>
<li>同 3.</li>
<li>两边都等于 <span class="math inline">\(\int_{\Omega_1}f_1(\omega_1)\mu_1(\mathrm{d}\omega_1)\cdot\int_{\Omega_2}f_2(\omega_2)\mu_2(\mathrm{d}\omega_2)\)</span>。</li>
</ol>
<p>令 <span class="math inline">\(\mathbb{H}\)</span>
是所有满足定理中条件的函数组成的集合，<span class="math inline">\(\mathbb{M}\)</span> 是所有形如 <span class="math inline">\(\f_1\otimes f_2\)</span>
的非负可测函数组成的集合。则 <span class="math inline">\(\mathbb{M}\)</span> 是乘法系。又因为 <span class="math inline">\(\mathbb{M}\)</span> 包含所有形如 <span class="math inline">\(\mathbb{1}_{B_1}\otimes\mathbb{1}_{B_2}\)</span>
的函数，所以 <span class="math inline">\(\sigma(\mathbb{M})=\mathcal{F}_1\otimes\mathcal{F}_2\)</span>。</p>
<p>又 <span class="math inline">\(\mathbb{H}\)</span> 是向量空间，包含
<span class="math inline">\(\{1\}\cup\mathbb{M}\)</span>，并且在有界收敛下封闭。（对
5 需要用两次控制收敛定理或者非负函数的单调收敛定理）,所以根据 Dynkin
乘法系引理，<span class="math inline">\(\mathbb{H}\)</span> 包含所有
<span class="math inline">\(\mathcal{F}_1\otimes\mathcal{F}_2\)</span>
可测的有界函数（或者非负函数）。<span class="math inline">\(\blacksquare\)</span></p>
<p>由此我们可以定义乘积空间中的测度为</p>
<p><span class="math display">\[\mu(E)=\int_{\Omega_1}\left(\int_{\Omega_2}\mathbb{1}_{E}\mu_2(\mathrm{d}\omega_2)\right)\mu_1(\mathrm{d}\omega_1)=\int_{\Omega_2}\left(\int_{\Omega_1}\mathbb{1}_{E}\mu_1(\mathrm{d}\omega_1)\right)\mu_2(\mathrm{d}\omega_2).\]</span>
不难验证这样定义的积分是有限可加的
(积分的线性性质)，可以取单调上升的极限，所以是可数可加的，并且当 <span class="math inline">\(E\)</span> 形如 <span class="math inline">\(E_1\times E_2\)</span> 时有 <span class="math inline">\(\mu(E)=\mu_1(E_1)\mu_2(E_2)\)</span>，从而确实给出符合要求的乘积测度。</p>
<h1 id="tonelli-fubini">✅ 14.3 Tonelli-Fubini</h1>
<div id="tonelli-------" class="statement sta_tonelli___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Tonelli
定理</span>.</span><span class="statement-spah"> </span> 如果 <span class="math inline">\(f\in(\Omega_1\times\Omega_2,\mathcal{F}_1\otimes\mathcal{F}_2)\)</span>
是<strong>非负可测</strong>的，则 <span class="math display">\[\int_{\Omega_1\times\Omega_2}
f\,\mathrm{d}(\mu_1\times\mu_2)
=\int_{\Omega_1}\left(\int_{\Omega_2}
f\,\mathrm{d}\mu_2\right)\,\mathrm{d}\mu_1
=\int_{\Omega_2}\left(\int_{\Omega_1}
f\,\mathrm{d}\mu_1\right)\,\mathrm{d}\mu_2.\]</span></p>
</div>
<p>上一讲里面已经证明了右边两者相等。要把左边也连上，只需补一句标准话：用非负简单函数递增逼近
<span class="math inline">\(f\)</span>，对简单函数这三者相等（按照乘积测度的定义，它就是集合示性函数的分部积分），再用单调收敛定理把等式传到极限。</p>
<p>令一般可测 <span class="math inline">\(f\)</span> 可积：<span class="math inline">\(\int
|f|\,\mathrm{d}(\mu_1\times\mu_2)&lt;\infty\)</span>，写 <span class="math inline">\(f=f^+-f^-\)</span>。</p>
<ol type="1">
<li>由 Tonelli 可得 <span class="math display">\[
\int |f|\, \mathrm d(\mu_1\times\mu_2)
=\int\left(\int |f(\omega_1,\omega_2)|\,\mathrm d\mu_2\right)\,\mathrm
d\mu_1
=\int\left(\int |f(\omega_1,\omega_2)|\,\mathrm d\mu_1\right)\,\mathrm
d\mu_2&lt;\infty.
\]</span> 因而对 <span class="math inline">\(\mu_1\)</span>-几乎处处的
<span class="math inline">\(\omega_1\)</span>，截面 <span class="math inline">\(f(\omega_1,\cdot)\in
L^1(\mu_2)\)</span>；同理交换坐标亦然。</li>
<li>再对 <span class="math inline">\(f^\pm\)</span>
分别应用上一节的等式并相减，得到 <span class="math display">\[
\int_{\Omega_1\times\Omega_2} f\, \mathrm d(\mu_1\times\mu_2)
=\int_{\Omega_1}\left(\int_{\Omega_2} f\,\mathrm d\mu_2\right)d\mu_1
=\int_{\Omega_2}\left(\int_{\Omega_1} f\,\mathrm d\mu_1\right)d\mu_2.
\]</span> 且两个迭代积分都有限。这就是 <strong>Fubini
定理</strong>。</li>
</ol>
<h1 id="independence">✅ 15.1 Independence</h1>
<p>本讲介绍了事件和 <span class="math inline">\(\sigma\)</span>-
域之间的独立性概念。</p>
<p>要点总结：</p>
<ol type="1">
<li>若干个事件 <span class="math inline">\(\{A_n\}\)</span>
独立不是指它们两两独立，而是其中任何有限多个子事件都独立。</li>
<li>验证若干 <span class="math inline">\(\sigma\)</span>- 域 <span class="math inline">\(\{\mathcal{F}_i\}\)</span>
独立只需要验证生成它们的 <span class="math inline">\(\pi\)</span>- 系
<span class="math inline">\(\{C_i:\ \mathcal{F}_i=\sigma(C_i)\}\)</span>
独立。</li>
</ol>
<div id="borel-cantelli--------ii" class="statement sta_borel_cantelli____ii plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Borel-Cantelli 引理 II</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{A_n\}\)</span> 是独立的事件列，则若 <span class="math inline">\(\sum_{n=1}^\infty\mathbb{P}(A_n)=\infty\)</span>，则
<span class="math inline">\(\mathbb{P}(\{A_n,
\mathrm{i.o.}\})=1\)</span>。</p>
</div>
<p>想法还是要用独立性，转到事件的交上去。</p>
<p><span class="math display">\[\mathbb{P}(\{A_n,\
\mathrm{i.o.}\})=\mathbb{P}(\bigcap_{n=1}^\infty\bigcup_{k\geq
n}A_k)=\lim_{n\to\infty}\mathbb{P}(\bigcup_{k\geq n}A_k).\]</span>
观察两边，要想用上独立性，就得取补： <span class="math display">\[1-\mathbb{P}(\bigcup_{k\geq
n}A_k)=\mathbb{P}(\bigcap_{k\geq
n}A_k^c)=\lim_{M\to\infty}\prod_{k=n}^M\mathbb{P}(A_k^c)=\lim_{M\to\infty
y}\prod_{k=n}^M(1-\mathbb{P}(A_k)).\]</span> 利用 <span class="math inline">\(1-x\leq e^{-x}\)</span> 有 <span class="math display">\[\lim_{M\to\infty}\prod_{k=n}^M(1-\mathbb{P}(A_k))\leq\lim_{M\to\infty}\prod_{k=n}^Me^{-\mathbb{P}(A_k)}=\lim_{M\to\infty}e^{-\sum_{k=n}^M\mathbb{P}(A_k)}.\]</span>
上式右边对任何固定的 <span class="math inline">\(n\)</span> 其极限都是
0，从而 <span class="math inline">\(\mathbb{P}(\bigcup_{k\geq
n}A_k)\to1\)</span>，结论得证。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="independent-random-variables">✅ 15.2 Independent Random
Variables</h1>
<p>上一讲介绍了独立事件和独立事件域的概念，这一讲介绍了独立随机变量的概念。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
30.1</span>.</span><span class="statement-spah"> </span>一族随机变量
<span class="math inline">\(\{X_i\}_{i\in I}\)</span>
称作是独立的，如果它们的 <span class="math inline">\(\sigma-\)</span> 域
<span class="math inline">\(\{\sigma(X_i)\}_{i\in I}\)</span>
是独立的。</p>
</div>
<p>由于 <span class="math inline">\(\sigma(X_i)\)</span> 可以由 <span class="math inline">\(\pi-\)</span> 系 <span class="math inline">\(\{X_i\in(-\infty, t_i]\}\)</span>
生成，所以只要验证这个 <span class="math inline">\(\pi\)</span>-
系的独立性即可。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
30.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(X=(X_1,\ldots,X_n)\)</span>，其中每个 <span class="math inline">\(X_i:(\Omega,\mathcal{F},\mathbb{P})\to(\mathcal{S}_i,\mathcal{B}_i)\)</span>
是随机变量，<span class="math inline">\(\mu_X\)</span> 是 <span class="math inline">\(\mathcal{B}_1\otimes\cdots\otimes\mathcal{B}_n\)</span>
上的测度: <span class="math inline">\(\mu_X(B)=\mathbb{P}(X\in
B)\)</span>。则 <span class="math inline">\(X_1,X_2,\ldots,X_n\)</span>
独立当且仅当 <span class="math inline">\(\mu_X=\mu_{X_1}\otimes\cdots\otimes\mu_{X_n}\)</span>。</p>
</div>
<p><strong>证明</strong>：<span class="math inline">\(\Leftarrow\)</span>:</p>
<p><span class="math display">\[\begin{align*}\mathbb{P}(X_1\in
B_1,\ldots,X_n\in B_n)&amp;=\mu_X(B_1\times \cdots\times B_n)\\
&amp;=\mu_{X_1}(B_1)\cdots\mu_{X_n}(B_n)\\
&amp;=\mathbb{P}(X_1\in B_1)\cdots\mathbb{P}(X_n\in
B_n).\end{align*}\]</span></p>
<p><span class="math inline">\(\Rightarrow\)</span>: 简单。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
30.3</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(X_1,X_2,\ldots,X_n\)</span> 都是 <span class="math inline">\(L^1\)</span> 可积的随机变量，则 <span class="math inline">\(X_1X_2\cdots X_n\in L^1\)</span> 且 <span class="math inline">\(\mathbb{E}[X_1\cdots
X_n]=\mathbb{E}[X_1]\cdots\mathbb{E}[X_n]\)</span>。</p>
</div>
<p>首先对 <span class="math inline">\(|X_1X_2\cdots X_n|\)</span> 用
Tonelli 定理得出 <span class="math inline">\(|X_1X_2\cdots X_n|\)</span>
可积，然后再对 <span class="math inline">\(X_1X_2\cdots X_n\)</span> 用
Fubini 定理。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
30.4</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(X_1,\ldots,X_n,Y_1,\ldots,Y_m\)</span>
是一组独立的随机变量，则 <span class="math inline">\(f(X_1,\ldots,X_n)\)</span> 和 <span class="math inline">\(g(Y_1,\ldots,Y_m)\)</span> 也是独立的。</p>
</div>
<p>这是因为 <span class="math inline">\(\sigma(f(X_1,\ldots,X_n))\subseteq\sigma(X_1,\ldots,X_n)\)</span>，<span class="math inline">\(\sigma(g(Y_1,\ldots,Y_m))\subseteq\sigma(Y_1,\ldots,Y_m)\)</span>，所以也是独立的。</p>
<h1 id="kolmogorovs-extension-theorem-part-2">✅ 16.2 Kolmogorov’s
Extension Theorem, Part 2</h1>
<p>回忆一个 Radon 测度是指，它是一个有限的 Borel
测度，并且满足内外的正则性：从内部可以用紧集任意逼近，从外部可以用开集任意逼近。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
31.1</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\mathbb{R}^d\)</span> 上的任何有限 Borel 测度都是
Radon 测度。</p>
</div>
<p><strong>证明</strong>：设 <span class="math inline">\(\mathcal{F}\)</span>
是所有可以从外部被开集任意逼近的那些子集构成的集合。我们要证明 <span class="math inline">\(\mathcal{F}\)</span> 包含 <span class="math inline">\(\mathcal{B}(\mathbb{R}^d)\)</span>。</p>
<ol type="1">
<li><span class="math inline">\(\mathcal{F}\)</span>
包含所有闭集。实际上对闭集 <span class="math inline">\(F\)</span>，令
<span class="math inline">\(G_\epsilon=\cup_{x\in
F}B(x,\epsilon)\)</span>，则 <span class="math inline">\(G_\epsilon\downarrow
\overline{F}=F\)</span>。从而由测度连续性即得。</li>
<li><span class="math inline">\(\mathcal{F}\)</span>
对有限集合运算封闭，从而 <span class="math inline">\(\mathcal{F}\)</span> 是一个代数。</li>
<li><span class="math inline">\(\mathcal{F}\)</span>
对可数不交并封闭。</li>
</ol>
<p>由此即得结论。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="kolmogorovs-0-1-law">✅ 17.1 Kolmogorov’s 0-1 Law</h1>
<p>本讲介绍了独立随机变量序列的尾事件，以及 Kolmogrov 0-1 律。</p>
<p>设 <span class="math inline">\(\{X_n\}\)</span> 是独立的随机变量序列
(不是两两独立，而是任何有限多个都独立)称 <span class="math inline">\(\mathcal{T}=\cap_{n=1}^\infty\sigma(X_n,X_{n+1},\ldots)\)</span>
为尾事件域。</p>
<div id="kolmogrov-0-1----" class="statement sta_kolmogrov_0_1__ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Kolmogrov 0-1 律</span>.</span><span class="statement-spah"> </span>对任何 <span class="math inline">\(A\in\mathcal{T}\)</span> 有 <span class="math inline">\(\mathbb{P}(A)\in\{0,1\}\)</span>。</p>
</div>
<p><strong>证明概要</strong>：</p>
<ul>
<li><span class="math inline">\(\sigma(X_1,\ldots,X_n)\)</span> 和 <span class="math inline">\(\sigma(X_{n+1},X_{n+2},\ldots)\)</span>
是独立的。因为考虑如下两个集合族： <span class="math display">\[\{\text{all finite intersections like }\cap A_i,
A_i\in\sigma(X_i),i=1,2,\ldots,n\}.\]</span> <span class="math display">\[\{\text{all finite intersections like }\cap A_j,
A_j\in\sigma(X_j),j=n+1,n+2,\ldots\}.\]</span> 这俩都是 <span class="math inline">\(\pi\)</span>- 系且互相独立，所以它们生成的 <span class="math inline">\(\sigma\)</span>- 域也独立。前者可以生成 <span class="math inline">\(\sigma(X_1,\ldots,X_n)\)</span>，后者可以生成
<span class="math inline">\(\sigma(X_{n+1},X_{n+2},\ldots)\)</span>。</li>
<li>于是 <span class="math inline">\(\sigma(X_1,\ldots,X_n)\)</span> 和
<span class="math inline">\(\mathcal{T}\)</span> 是独立的。</li>
<li>于是 <span class="math inline">\(\cup_{n=1}^\infty\sigma(X_1,\ldots,X_n)\)</span>
作为代数，当然也是 <span class="math inline">\(\pi\)</span>- 系，和
<span class="math inline">\(\mathcal{T}\)</span> 是独立的。</li>
<li>于是 <span class="math inline">\(\sigma\)</span>- 域 <span class="math inline">\(\sigma(X_1,\ldots,X_n,\ldots)\)</span> 和 <span class="math inline">\(\mathcal{T}\)</span> 独立，从而 <span class="math inline">\(\mathcal{T}\)</span> 和 <span class="math inline">\(\mathcal{T}\)</span> 独立，从而得证。</li>
</ul>
<p><span class="math inline">\(\blacksquare\)</span></p>
<div class="statement proposition plain">
<p><span class="statement-heading"><span class="statement-label">命题
32.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{X_i\}_{i=1}^\infty\)</span>
是一个随机变量的无限序列，如果 <span class="math inline">\(Y\)</span> 是
<span class="math inline">\(\sigma(X_1,X_2,\ldots)\)</span> 可测的，且
<span class="math inline">\(Y\)</span> 有界，则对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，都存在 <span class="math inline">\(N\)</span> 和 Borel 可测的有界函数 <span class="math inline">\(F:\mathbb{R}^N\to\mathbb{R}\)</span> 使得 <span class="math display">\[\mathbb{E}|Y -
F(X_1,\ldots,X_N)|&lt;\epsilon,\quad \mathrm{a.e.}\]</span></p>
</div>
<p><strong>证明</strong>：记 <span class="math inline">\(Y_n=\mathbb{E}[Y\mid\sigma(X_1,\ldots,X_n)]\)</span>，则
<span class="math inline">\(\{Y_n\}\)</span> 是一致可积鞅，且在 <span class="math inline">\(L^1\)</span> 范数下收敛到 <span class="math inline">\(Y\)</span>。每个 <span class="math inline">\(Y_n\)</span> 根据 Doob-Dynkin 引理都形如 <span class="math inline">\(Y_n=F(X_1,\ldots,X_n)\)</span>。此即为结论。</p>
<p>或者也可以这样证：先取简单函数 <span class="math display">\[\varphi =
\sum_{k=1}^n a_k\mathbb{1}_{A_k},\quad
A_k\in\mathcal{B}(\mathbb{R}^{\mathbb{N}})\]</span> 满足 <span class="math inline">\(|Y -\varphi|_1&lt;\epsilon/2\)</span>。然后记
<span class="math inline">\(M=\max\{|a_1|,\ldots,|a_k|\}\)</span>。对每个
<span class="math inline">\(A_k\)</span>，取柱集 <span class="math inline">\(C_k\)</span> 使得 <span class="math display">\[\mu(A_k\Delta C_k) &lt;
\frac{\epsilon}{2nM}.\]</span> 于是 <span class="math display">\[\left|
\sum_{k=1}^n a_k\mathbb{1}_{A_k} -  \sum_{k=1}^n
a_k\mathbb{1}_{C_k}\right|\leq  \sum_{k=1}^n |a_k|
|\mathbb{1}_{A_k}-\mathbb{1}_{C_k}|= \sum_{k=1}^n
|a_k|\mathbb{1}_{A_k\Delta C_k}\leq M \sum_{k=1}^n\mathbb{1}_{A_k\Delta
C_k}.\]</span> 右边函数每一项的积分 <span class="math inline">\(&lt;\epsilon/2n\)</span>，全部 <span class="math inline">\(n\)</span> 项合起来的积分 <span class="math inline">\(&lt;\epsilon\)</span>，所以简单函数 $ <em>{k=1}^n
a_k</em>{C_k}$ 就是所求的 <span class="math inline">\(F\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="convolution">✅ 17.2 Convolution</h1>
<p>本讲介绍了概率测度之间的卷积。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
33.1</span>.</span><span class="statement-spah"> </span>两个概率测度
<span class="math inline">\(\mu,\nu\)</span> 之间的卷积定义为 <span class="math display">\[\mu\ast \nu(B) =
\int_{\mathbb{R}^d\times\mathbb{R}^d}\mathbb{1}_B(x+y)\mu\otimes\nu(\,\mathrm{d}x\,\mathrm{d}y)=\int_{\mathbb{R}^d}\mu(B-y)\nu(\mathrm{d}y).\]</span></p>
</div>
<h1 id="strong-law-of-large-numbers-part-1">✅ 18.1 Strong Law of Large
Numbers, Part 1</h1>
<p>本讲介绍了 Kolmogrov 强大数定理的表述，以及证明思想。</p>
<p>基本思想是利用截断的序列与原序列是尾等价的，先对截断的序列证明结论，再回到原序列。</p>
<div id="---------------" class="statement sta______ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">强大数定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{X_n\}\)</span> 是 <span class="math inline">\(\mathrm{i.i.d}\)</span> 的 <span class="math inline">\(L^1\)</span> 序列且 <span class="math inline">\(\mathbb{E}[X_n]=a\)</span>，则 <span class="math inline">\(\dfrac{S_n}{n}\to a, \mathrm{a.e.}\)</span>。</p>
</div>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
34.1</span>.</span><span class="statement-spah">
</span>同一个概率空间上的两个随机变量序列 <span class="math inline">\(\{X_n\},\,\{Y_n\}\)</span> 称作是尾等价的，如果
<span class="math display">\[\sum_{n=1}^\infty\mathbb{P}(X_n\ne
Y_n)&lt;\infty.\]</span></p>
</div>
<p>这样根据 Borel-Cantelli 引理，<span class="math inline">\(\{X_n\ne
Y_n\,\mathrm{i.o.}\}\)</span> 是零测集，从而 <span class="math inline">\(X_n=Y_n\)</span>
最终会几乎处处成立，从而二者的极限行为一致。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
34.2</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{X_n\}\)</span> 和 <span class="math inline">\(\{Y_n\}\)</span> 是尾等价的，<span class="math inline">\(b_n\uparrow\infty\)</span>，则 <span class="math display">\[\lim\limits_{n\to\infty}\dfrac{1}{b_n}\sum_{j=1}^n
X_n = X \Leftrightarrow
\lim\limits_{n\to\infty}\dfrac{1}{b_n}\sum_{j=1}^n Y_n = X.\]</span></p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
34.3</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(X\in L^1,\,\epsilon&gt;0\)</span>，则 <span class="math display">\[\sum_{n=1}^\infty\mathbb{P}(X\geq n\epsilon)
\leq\frac{1}{\epsilon}\mathbb{E}|X|.\]</span></p>
</div>
<p>值得与 Markov 不等式比较一下，这个不等式更强。</p>
<p><strong>证明概要</strong>：只要证明结论对 <span class="math inline">\(\epsilon=1\)</span> 成立即可。对任意实数 <span class="math inline">\(x\ge 0\)</span>，我们有 <span class="math display">\[\sum_{n=1}^{\infty}\mathbb{1}_{[n,\infty)}(x)=
\sharp\{n\in\mathbb{Z}_+\mid n\le x\}= \lfloor x\rfloor
\le x.\]</span> 对 <span class="math inline">\(|X|\)</span> 使用上式得
<span class="math display">\[\sum_{n=1}^{\infty}\mathbb{1}_{[n,\infty)}(|X|)\le
|X|.\]</span> 两边求期望即得 <span class="math display">\[\sum_{n=1}^\infty\mathbb{P}(|X|\ge n)\le
\mathbb{E}|X|.\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
34.4</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(\{X_n\}\)</span> 是 <span class="math inline">\(\mathrm{i.i.d}\)</span> 的 <span class="math inline">\(L^1\)</span> 序列，令 <span class="math inline">\(Y_n = X_n\mathbb{1}_{\{|X_n|\leq n\}}\)</span>，则
<span class="math inline">\(\{Y_n\}\)</span> 与 <span class="math inline">\(\{X_n\}\)</span> 是尾等价的。</p>
</div>
<p><strong>证明</strong>： <span class="math display">\[\sum_{n=1}^\infty\mathbb{P}(X_n\ne
Y_n)=\sum_{n=1}^\infty\mathbb{P}(|X_n|&gt;n)=\sum_{n=1}^\infty\mathbb{P}(|X_1|&gt;n)\le\mathbb{E}|X_1|&lt;\infty.\]</span>
<span class="math inline">\(\blacksquare\)</span></p>
<p>于是接下来的任务就是证明 <span class="math inline">\(S_n^Y =
\dfrac{Y_1+\cdots+Y_n}{n}\to a,\,\mathrm{a.e.}\)</span>。</p>
<h1 id="kolmogorovs-convergence-criterion">✅ 18.2 Kolmogorov’s
Convergence Criterion</h1>
<p>本讲介绍了 Kolmogrov 收敛判定：独立随机变量序列如果是 <span class="math inline">\(L^2\)</span> 意义下的 Cauchy
序列，则也是逐点收敛意义下的 Cauchy 序列。</p>
<p>在上一讲中，我们通过把 <span class="math inline">\(L^1\)</span>
的序列 <span class="math inline">\(\{X_n\}\)</span> 取截断得到 <span class="math inline">\(Y_n=X_n\mathbb{1}_{\{|X_n|\leq
n\}}\)</span>，这是一个与 <span class="math inline">\(\{X_n\}\)</span>
尾等价的序列。从而只要证明 <span class="math inline">\(\frac{\sum_{k=1}^n Y_k}{n}\to
a\)</span>。为此我们分两步：</p>
<ol type="1">
<li>证明 <span class="math inline">\(\frac{\sum_{k=1}^n
(Y_k-\mathbb{E}Y_k)}{n}\to 0\)</span>。</li>
<li>证明 <span class="math inline">\(\mathbb{E}Y_n\to a\)</span>，从而
<span class="math inline">\(\frac{\sum_{k=1}^n\mathbb{E}Y_k}{n}\to
a\)</span>。结合上一点就证明了强大数定理。</li>
</ol>
<p>2 用控制收敛定理很容易得出，所以关键是证明 1。</p>
<p>我们首先证明 <span class="math inline">\(\sum_{k=1}^n
\frac{Y_k-\mathbb{E}Y_k}{n}\)</span> 是个收敛的序列，然后用下一讲介绍的
Kronecker 引理来得出 <span class="math inline">\(\frac{\sum_{k=1}^n
(Y_k-\mathbb{E}Y_k)}{n}\to 0\)</span>。</p>
<div id="kolmogrov-------------" class="statement sta_kolmogrov_____ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Kolmogrov 收敛判定</span>.</span><span class="statement-spah"> </span>：若独立且 <span class="math inline">\(L^2\)</span> 可积的随机变量序列 <span class="math inline">\(\{Y_n\}\)</span> 满足 <span class="math display">\[\sum\mathrm{Var}(Y_n)&lt;\infty.\]</span> 则
<span class="math display">\[\sum_{n=1}^\infty(Y_n-\mathbb{E}Y_n)\]</span>
几乎处处收敛。并且这个收敛也是 <span class="math inline">\(L^2\)</span>
收敛。</p>
</div>
<p><strong>证明概要</strong>：记 <span class="math inline">\(Z_n=Y_n-\mathbb{E}Y_n\)</span>，则 <span class="math inline">\(\mathbb{E}Z_n=0\)</span> 且 <span class="math inline">\(\sum_{n=1}^\infty\mathbb{E}Z_n^2&lt;\infty\)</span>。我们来证明
<span class="math inline">\(\sum_{n=1}^\infty Z_n\)</span>
几乎处处收敛。</p>
<p>记 <span class="math inline">\(S_n=\sum_{k=1}^nZ_k\)</span>，利用
Markov 不等式不难有 <span class="math display">\[\mathbb{P}(|S_n|\geq\epsilon)\leq
\frac{1}{\epsilon^2}\mathbb{E}[S_n^2].\]</span>
有意思的是，上面的不等式中在左边把 <span class="math inline">\(S_n\)</span> 换成 <span class="math inline">\(S_n^\ast=\max\limits_{1\leq i\leq n}|S_n|\)</span>
仍然成立：</p>
<div id="kolmogrov----------------" class="statement sta_kolmogrov______ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Kolmogrov 极大不等式</span>.</span><span class="statement-spah"> </span>：对任何正数 <span class="math inline">\(\epsilon&gt;0\)</span> 有 <span class="math display">\[\mathbb{P}(S_n^\ast\geq\epsilon)\leq
\frac{1}{\epsilon^2}\mathbb{E}[S_n]^2.\]</span></p>
</div>
<p><strong>证明</strong>：记 <span class="math inline">\(\tau=\min\{j\mid |S_j|\geq\epsilon\}\)</span>。则
<span class="math inline">\(\{S_n^\ast\geq\}=\{\tau\leq n\}\)</span>。
<span class="math display">\[\mathbb{E}[S_n^2\mathbb{1}_{\{S_n^\ast\geq\epsilon\}}]=\mathbb{E}[S_n^2\mathbb{1}_{\{\tau\leq
n\}}]=\sum_{k=1}^n\mathbb{E}[S_n^2\mathbb{1}_{\{\tau=k\}}].\]</span>
使用技巧 <span class="math inline">\(S_n^2=(S_k + S_n - S_k)^2\)</span>
我们有 <span class="math display">\[\mathbb{E}[S_n^2\mathbb{1}_{\{\tau=k\}}] =
\mathbb{E}[(S_k^2 + (S_n-S_k)^2)\mathbb{1}_{\{\tau=k\}}] +
\mathbb{E}[2S_k(S_n-S_k)\mathbb{1}_{\{\tau=k\}}].\]</span> 注意到第二项
<span class="math display">\[\mathbb{E}[2S_k(S_n-S_k)\mathbb{1}_{\{\tau=k\}}]
=2\mathbb{E}[S_k\mathbb{1}_{\{\tau=k\}}]\cdot\mathbb{E}[S_n-S_k]=0.\]</span>
所以 <span class="math display">\[\mathbb{E}[S_n^2]\geq\sum_{k=1}^n\mathbb{E}[S_k^2\mathbb{1}_{\{\tau=k\}}]\geq\epsilon^2\sum_{k=1}^n\mathbb{E}[\mathbb{1}_{\{\tau=k\}}]=\epsilon^2\mathbb{P}(\tau\leq
n)=\epsilon^2 \mathbb{P}(S_n^\ast\geq\epsilon).\]</span></p>
<p>回到 Kolmogrov 收敛定理的证明。</p>
<p>Kolmogrov 极大不等式告诉我们</p>
<p><span class="math display">\[\mathbb{P}(\max_{n\leq k \leq m}|S_k -
S_n|\geq\epsilon)\leq
\frac{1}{\epsilon^2}\mathbb{E}|S_m-S_n|^2=\frac{1}{\epsilon^2}\sum_{k=n}^m
\mathbb{E}Z_k^2.\]</span> 令 <span class="math inline">\(m\to\infty\)</span> 我们有 <span class="math display">\[\mathbb{P}(\sup_{k\geq n}|S_k -
S_n|\geq\epsilon)\leq\frac{1}{\epsilon^2}\sum_{k=n}^\infty
\mathbb{E}Z_k^2.\]</span> 于是 <span class="math display">\[\mathbb{P}(\sup_{k,j\geq n}|S_k -
S_j|\geq\epsilon)\leq\frac{2}{\epsilon^2}\sum_{k=n}^\infty
\mathbb{E}Z_k^2.\]</span> 所以随机变量序列 <span class="math display">\[\delta_n := \sup_{k,j\geq n}|S_k - S_j|\]</span>
依测度收敛到 0。但是 <span class="math inline">\(\{\delta_n\}\)</span>
是一个单调下降的非负序列，它必然有一个几乎处处收敛的极限 <span class="math inline">\(\delta\)</span>，<span class="math inline">\(\delta\)</span> 也非负。<span class="math inline">\(\{\delta_n\}\)</span> 依测度收敛到
0，又几乎处处收敛到 <span class="math inline">\(\delta\)</span>，那必须
<span class="math inline">\(\delta\)</span> 几乎处处为 0，即 <span class="math inline">\(\{S_n\}\)</span> 是 Cauchy 序列。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="strong-law-of-large-numbers-part-2">19.1 Strong Law of Large
Numbers, Part 2</h1>
<p>介绍了证明强大数定理的第二个工具：Kronecker 引理。</p>
<div id="kronecker-------" class="statement sta_kronecker___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Kronecker 引理</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(\{b_k\}\uparrow\infty\)</span> 且 <span class="math inline">\(\lim\limits_{n\to\infty}\sum\limits_{k=1}^n\dfrac{x_k}{b_k}\)</span>
存在，则 <span class="math inline">\(\lim\limits_{n\to\infty}\dfrac{1}{b_n}\sum\limits_{k=1}^n
x_k=0\)</span>。</p>
</div>
<p><strong>证明概要</strong>：记 <span class="math inline">\(u_n=\sum\limits_{k=1}^n\dfrac{x_k}{b_k},\,u_0=0\)</span>，则
<span class="math inline">\(\lim\limits_{n\to\infty}u_n=s\)</span>
存在。 <span class="math display">\[\begin{align*}\frac{1}{b_n}\sum_{k=1}^n
x_k&amp;=\frac{1}{b_n}\sum_{k=1}^n(u_k-u_{k-1})b_k=\frac{1}{b_n}\sum_{k=1}^nu_kb_k-\frac{1}{b_n}\sum_{k=0}^{n-1}u_kb_{k+1}\\&amp;=u_n-\frac{b_n-b_1}{b_n}s-\sum_{k=1}^{n-1}\frac{b_{k+1}-b_k}{b_n}(u_k-s).\end{align*}\]</span>
而最后一个余项的绝对值小于等于 <span class="math display">\[\begin{align*}\sum_{k=1}^{n-1}\frac{b_{k+1}-b_k}{b_n}|u_k-s|=\left(\sum_{k=1}^{N}+\sum_{k=N+1}^{n-1}\right)\frac{b_{k+1}-b_k}{b_n}|u_k-s|\end{align*}\]</span>
这里对 <span class="math inline">\(n&gt;N\)</span> 有 <span class="math inline">\(|u_n-s|&lt;\epsilon\)</span> 成立。</p>
<p>当 <span class="math inline">\(n\to\infty\)</span>
时第一个和项是一个有界的值除以 <span class="math inline">\(b_n\)</span>
从而趋于 0。第二个和项显然不大于 <span class="math inline">\(\dfrac{b_n}{b_n}\epsilon\)</span>，所以这个余项可以任意小。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
36.1</span>.</span><span class="statement-spah"> </span><span class="math inline">\(Y_n' = Y_n/n\)</span> 满足 Kolmogrov
收敛判定。</p>
</div>
<p><strong>证明概要</strong>： <span class="math display">\[\begin{align*}\sum_{n=1}^\infty\mathrm{Var}(Y_n')&amp;=\sum_{n=1}^\infty\frac{\mathbb{E}Y_n^2
- (\mathbb{E}Y_n)^2}{n^2}\leq
\sum_{n=1}^\infty\frac{\mathbb{E}Y_n^2}{n^2}\\&amp;=\sum_{n=1}^\infty\frac{\mathbb{E}X_n^2\mathbb{1}_{\{|X_n|\leq
n\}}}{n^2}\\&amp;=\mathbb{E}\left[|X_1|^2\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}}\right]\\&amp;\leq\mathbb{E}\left[|X_1|^2\sum_{n=1}^\infty\frac{1}{n^2},\
|X_1|\leq 2\right] +
\mathbb{E}\left[|X_1|^2\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}},\
|X_1|&gt;2\right]\\&amp;\leq4\sum_{n=1}^\infty\frac{1}{n^2}+\mathbb{E}\left[|X_1|^2\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}},\ |X_1|&gt;2\right] .\end{align*}\]</span> 为什么要用 <span class="math inline">\(|X_1|\)</span> 是否大于 2
把它分成两部分？这里其实可以用任何大于等于 2 的数，不过 2
已经足够了，这样做的原因下面就会看到。</p>
<p>现在第一项是有限的，我们只要说明第二项也有限即可。你可能想把 <span class="math inline">\(\mathbb{1}_{\{|X_1|\leq n\}}\)</span>
扔掉，但是注意强大数定律中 <span class="math inline">\(|X_1|\)</span> 是
<span class="math inline">\(L^1\)</span> 可积的，未必是 <span class="math inline">\(L^2\)</span> 可积的，所以扔掉是不行的。我们得把
<span class="math inline">\(\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}}\)</span> 这个东西估计一下。注意到对任何正整数 <span class="math inline">\(k\)</span>，<span class="math inline">\(\sum_{n=k}^\infty\frac{1}{n^2}\)</span> 就是 <span class="math inline">\(\frac{1}{\lfloor t\rfloor^2}\)</span> 在 <span class="math inline">\([k,\infty)\)</span> 上的积分， 所以当 <span class="math inline">\(x&gt;2\)</span> 时 <span class="math display">\[\begin{align*}
\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{x\leq n\}}&amp;=\sum_{n\geq
x}^\infty\frac{1}{n^2}=\sum_{n= \lceil
x\rceil}^\infty\frac{1}{n^2}\\&amp;=\int_{\lceil
x\rceil}^\infty\frac{1}{\lfloor t\rfloor^2}\,\mathrm{d}t\\&amp;\leq
\int_{\lceil
x\rceil}^\infty\frac{1}{(t-1)^2}\,\mathrm{d}t\\&amp;=\frac{1}{\lceil
x\rceil -
1}\\&amp;\leq\frac{1}{x-1}&lt;\frac{2}{x}.\end{align*}\]</span> 所以取
<span class="math inline">\(x&gt;2\)</span> 主要是为了最后一步的 <span class="math inline">\(\frac{1}{x-1}&lt;\frac{2}{x}\)</span>。</p>
<p>于是我们就证明了在 <span class="math inline">\(|X_1|&gt;2\)</span>
上有 <span class="math display">\[\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}}&lt;\frac{2}{|X_1|}.\]</span> 两边乘以 <span class="math inline">\(|X_1|^2\)</span> 并积分，则 <span class="math display">\[\mathbb{E}\left[|X_1|^2\sum_{n=1}^\infty\frac{1}{n^2}\mathbb{1}_{\{|X_1|\leq
n\}},\ |X_1|&gt;2\right] &lt; 2\mathbb{E}|X_1|.\]</span>
这就证明了结论。</p>
<h1 id="renewal-theory">19.2 Renewal Theory</h1>
<p>本讲以灯泡寿命为例子，介绍了强大数定理在更新理论中的应用。</p>
<p>设灯泡的寿命互相独立，且服从某个共同的非负随机变量 <span class="math inline">\(X,\ \mathbb{E}X&lt;\infty\)</span>。设长度为 <span class="math inline">\(t\)</span> 的时刻内需要报废的灯泡数最多为 <span class="math inline">\(N_t\)</span>，即 <span class="math inline">\(S_{N_t}\leq t &lt; S_{N_t+1}\)</span>。则 <span class="math display">\[\lim_{t\to\infty}\frac{N_t}{t}\to\frac{1}{\mathbb{E}X},\quad
\mathrm{a.e.}\]</span> 实际上由定义有 <span class="math display">\[\frac{S_{N_t}}{N_t}\leq \frac{t}{N_t} &lt;
\frac{S_{N_t+1}}{N_t}.\]</span> 如果我们能证明 <span class="math inline">\(t\to\infty\)</span> 时同样有 <span class="math inline">\(N_t\to\infty,\mathrm{a.e.}\)</span>，则利用强大数定理就有
<span class="math inline">\(S_{N_t}/N_t\to\mathbb{E}X\)</span>，从而结论得证。</p>
<p>我们考虑 <span class="math inline">\(\Omega_1=\{\omega\in\Omega\mid
S_n(\omega)&lt;\infty,\ \forall n\geq1\}\)</span>。<span class="math inline">\(\Omega_1\)</span> 作为一列递减的测度均为 1
的集合列的极限，测度显然也是 1。我们只要证明在 <span class="math inline">\(\Omega_1\)</span> 上有 <span class="math inline">\(S_{N_t}/N_t\to\mathbb{E}X\)</span> 成立。</p>
<p>首先 <span class="math inline">\(N_t\)</span> 随着 <span class="math inline">\(t\)</span> 递增是没有问题的，如果它对某个 <span class="math inline">\(\omega\)</span> 是有界的，则 <span class="math inline">\(N_t(\omega)\leq M\)</span> 对所有 <span class="math inline">\(t\)</span> 成立。即不管 <span class="math inline">\(t\)</span> 是多少都有 <span class="math inline">\(S_M\leq t &lt; S_{M+1}\)</span>，这只能要求 <span class="math inline">\(S_{M+1}(\omega)=\infty\)</span>，从而 <span class="math inline">\(\omega\)</span> 不属于 <span class="math inline">\(\Omega_1\)</span>。</p>
<p>一个有意思的引理：</p>
<blockquote>
<p><strong>引理</strong>：设 <span class="math inline">\(X\in
L^1\)</span>，如果 <span class="math inline">\(\{X_n\}\)</span> 是一列
<span class="math inline">\(\mathrm{i.i.d}\)</span> 且服从和 <span class="math inline">\(X\)</span> 同样的分布，则 <span class="math inline">\(\dfrac{X_n}{n}\to0,\mathrm{a.e.}\)</span>。</p>
</blockquote>
<p>老技巧，只要证明 <span class="math inline">\(\mathbb{P}(\{|X_n|\geq
n\epsilon,\ \mathrm{i.o.}\})=0\)</span> 即可。根据 Borel-Cantelli
引理，只要证明 <span class="math inline">\(\sum_{n=1}^\infty\mathbb{P}(|X_n|\geq
n\epsilon)&lt;\infty\)</span> 即可，而这在 18.1 中已经证明过了。</p>
<h1 id="total-variation">✅ 21.1 Total Variation</h1>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
38.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu,\nu\)</span> 是 <span class="math inline">\((S,\mathcal{B})\)</span>
上的两个概率测度。定义它们之间的全变差为 <span class="math display">\[\mathrm{d_{TV}}(\mu,\nu) =
\sup_{B\in\mathcal{B}}|\mu(B)-\nu(B)|.\]</span></p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
38.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu,\nu\)</span> 是 <span class="math inline">\((S,\mathcal{B})\)</span> 上的两个概率测度，<span class="math inline">\(\alpha\)</span> 是有限测度且 <span class="math inline">\(\mu,\nu\ll\alpha\)</span>。设 <span class="math inline">\(\mathrm{d}\mu =
f\,\mathrm{d}\alpha,\mathrm{d}\nu=g\,\mathrm{d}\alpha\)</span>，则 <span class="math display">\[\mathrm{d_{TV}}(\mu,\nu) =
\frac{1}{2}\|f-g\|_{L^1(\alpha)}.\]</span></p>
</div>
<p><strong>证明</strong>：对任何 <span class="math inline">\(B\in
\mathcal{B}\)</span>， <span class="math display">\[|\mu(B) - \nu(B)| =
\left|\int_B (f-g)\,\mathrm{d}\alpha\right|.\]</span> <span class="math display">\[|\mu(B^c) - \nu(B^c)| = \left|\int_{B^c}
(f-g)\,\mathrm{d}\alpha\right|.\]</span>
上面两个式子，左边的值是一样的，右边之和大于等于 <span class="math inline">\(\|f-g\|\)</span>，所以 <span class="math display">\[\mathrm{d_{TV}}(\mu,\nu)\le \|f-g\|.\]</span>
另一方面，取 <span class="math inline">\(A=\{f &gt; g\}\)</span>，则由于
<span class="math inline">\(\mu,\nu\)</span> 是概率测度，所以 <span class="math display">\[0=\int_S (f-g)\,\mathrm{d}\alpha=\int_A
(f-g)\,\mathrm{d}\alpha+ \int_{A^c}(f-g)\,\mathrm{d}\alpha=\int_A
|f-g|\,\mathrm{d}\alpha- \int_{A^c}|f-g|\,\mathrm{d}\alpha.\]</span> 即
<span class="math display">\[\mu(A)-\nu(A)=\int_A
(f-g)\,\mathrm{d}\alpha=\int_A
|f-g|\,\mathrm{d}\alpha=\frac{1}{2}\|f-g\|_{L1}.\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<p>给定一族 <span class="math inline">\(\{\mu_n\}_{n\ge1}\)</span>，取
<span class="math display">\[\alpha =
\sum_{n=1}^\infty\frac{\mu_n}{2^n}.\]</span> 则 <span class="math inline">\(\mu_n\ll\alpha_n\)</span>。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
38.3</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\mathrm{d_{TV}}\)</span> 是 <span class="math inline">\((S,\mathcal{B})\)</span> 上的完备度量。</p>
</div>
<p><strong>证明</strong>：取 <span class="math inline">\(\alpha\)</span>
如上使得 <span class="math inline">\(\mu_n\ll\alpha\)</span>，则问题转化为使用 <span class="math inline">\(L^1(\alpha)\)</span> 是完备度量空间。<span class="math inline">\(\blacksquare\)</span>。</p>
<h1 id="weak-convergence">✅ 22.1 Weak Convergence</h1>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
39.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathcal{S}\)</span> 是一个度量空间，<span class="math inline">\(\mu_n,\mu\)</span> 是 <span class="math inline">\((\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span>
上的概率测度。如果有 <span class="math display">\[\int
f\,\mathrm{d}\mu_n\to \int f \,\mathrm{d}\mu,\quad \forall f\in
C_b(\mathcal{S}).\]</span> 就称 <span class="math inline">\(\mu_n\)</span> 弱收敛到 <span class="math inline">\(\mu\)</span>。</p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
39.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{X_n\}, X\)</span> 都是从概率空间 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})\to
(\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span> 的随机变量。 如果 <span class="math inline">\(X_n\to_\mathbb{P}X\)</span> 且 <span class="math inline">\(g\)</span> 是连续函数，则 <span class="math inline">\(g(X_n)\to_\mathbb{P}g(X)\)</span>。</p>
</div>
<p>证明：设 <span class="math inline">\(\epsilon,\delta&gt;0\)</span>。记 <span class="math display">\[B_{\epsilon,\delta}(g)=\{x\in\mathcal{S}\mid
\exists y\in\mathcal{S}, d(x,y)\leq\delta,
|g(x)-g(y)|\geq\epsilon\}.\]</span> <span class="math inline">\(g\)</span> 的连续性保证了对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，<span class="math inline">\(\lim_{\delta\to0}B_{\epsilon,\delta}(g)\downarrow
\emptyset\)</span>。</p>
<p>于是 <span class="math display">\[\{\omega\mid
|g(X_n(\omega))-g(X(\omega))|\geq\epsilon\}\subset\{\omega\mid
d(X_n(\omega), X(\omega))\geq\delta\}\cup\{\omega\mid X(\omega)\in
B_{\epsilon,\delta}(g)\}.\]</span> 于是 <span class="math display">\[\mathbb{P}(|g(X_n(\omega))-g(X(\omega))|\geq\epsilon)\le
\mathbb{P}(d(X_n(\omega), X(\omega))\geq\delta) + \mathbb{P}(X\in
B_{\epsilon,\delta}(g)).\]</span> 也就是 <span class="math display">\[\mathbb{P}(|g(X_n)-g(X)|\geq\epsilon)\le
\mathbb{P}(d(X_n, X)\geq\delta) +\mu_X(B_{\epsilon,\delta}(g)).\]</span>
所以，对给定的 <span class="math inline">\(\epsilon\)</span>，我们可以取
<span class="math inline">\(\delta\)</span>
使得第二项任意小，再取最后大的 <span class="math inline">\(n\)</span>
使得第一项任意小。这就证明了结论。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement proposition plain">
<p><span class="statement-heading"><span class="statement-label">命题
39.3</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(X_n\to_\mathbb{P}X\)</span>，则 <span class="math inline">\(X_n\to_w X\)</span>。</p>
</div>
<p>证明：设 <span class="math inline">\(f\in
C_b(\mathcal{S})\)</span>。则 <span class="math inline">\(\int
f\,\mathrm{d}\mu_{X_n}=\mathbb{E}[f(X_n)]\)</span>。于是我们要证明 <span class="math display">\[\mathbb{E}[f(X_n)]\to \mathbb{E}[f(X)].\]</span>
但是根据引理，<span class="math inline">\(f(X_n)\to_\mathbb{P}f(X)\)</span>。又因为 <span class="math inline">\(f\)</span>
有界，所以由依测度收敛的控制收敛定理即得。<span class="math inline">\(\blacksquare\)</span></p>
<div id="portmanteau-------" class="statement sta_portmanteau___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Portmanteau 定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{\mu_n\},\mu\)</span> 都是空间 <span class="math inline">\((\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span>
上的概率测度。以下结论是等价的：</p>
<ol type="1">
<li><span class="math inline">\(\mu_n\to_w\mu\)</span>。</li>
<li><span class="math inline">\(\int f\,\mathrm{d}\mu_n\to\int
f\,\mathrm{d}\mu,\quad \forall
f\in\mathrm{Lip}_b(\mathcal{S})\)</span>。</li>
<li><span class="math inline">\(\limsup \mu_n(F)\le \mu(F)\)</span>
对任何闭集 <span class="math inline">\(F\)</span> 成立。</li>
<li><span class="math inline">\(\liminf \mu_n(G)\ge \mu(G)\)</span>
对任何开集 <span class="math inline">\(G\)</span> 成立。</li>
<li><span class="math inline">\(\mu_n(A)\to \mu(A)\)</span> 对任何满足
<span class="math inline">\(\mu(\partial A)=0\)</span> 的集合 <span class="math inline">\(A\in\mathcal{B}(\mathcal{S})\)</span> 成立。</li>
</ol>
</div>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>Portmanteau
的原意是把若干词拼起来组成新词。这里表示把一些看起来不同的结论放在一起。</p>
</div>
<p><span class="math inline">\(1\Rightarrow 2\)</span> 显然。</p>
<p><span class="math inline">\(2\Rightarrow3\)</span>：取 <span class="math inline">\(\psi\in{\rm Lip}_b(\mathbb{R})\)</span>
为如下的截断函数：</p>
<p><span class="math display">\[\psi(x)=\begin{cases}
1, &amp; x &lt; 0\\
0, &amp; x &gt; 1\\
1-x, &amp; 0\leq x\leq 1
\end{cases}\]</span> 不难看出 <span class="math inline">\(\|\phi\|_{\rm
Lip}\leq1\)</span>。</p>
<p>给定闭集 <span class="math inline">\(F\)</span>，考虑 <span class="math display">\[f_k(x) = \phi(k \cdot d(x, F)).\]</span> 则 <span class="math display">\[|f_k(x)-f_k(y)|\leq k |d(x,F)-d(y,F)|\leq k\cdot
d(x,y).\]</span> 这里用到了距离到集合的函数是 1-Lipschitz。从而 <span class="math inline">\(f_k\in{\rm Lip}_b(\mathcal{S})\)</span>。 注意到
<span class="math display">\[\lim_{k\to\infty}f_k(x)=\begin{cases}
f_k(x)\downarrow\psi(\infty) = 0, &amp; d(x,F)&gt; 0\\
f_k(x) = \phi(0) = 0, &amp; d(x,F)=0
\end{cases} = \mathbb{1}_F.\]</span> 总之 <span class="math inline">\(f_k\downarrow \mathbb{1}_F\)</span>。于是 <span class="math display">\[\limsup\mu_n(F)=\limsup\int
\mathbb{1}_F\,\mathrm{d}\mu_n\le \limsup\int f_k\,\mathrm{d}\mu_n = \int
f_k\,\mathrm{d}\mu\]</span> 上面的式子对所有 <span class="math inline">\(k\)</span> 都成立。然而根据控制收敛定理，<span class="math inline">\(\int f_k\,\mathrm{d}\mu\to \int
\mathbb{1}_F\,\mathrm{d}\mu= \mu(F)\)</span>。得证。</p>
<p><span class="math inline">\(3\Leftrightarrow4\)</span>：对闭集 <span class="math inline">\(F=G^c\)</span> 应用 3 即可。反之对 <span class="math inline">\(G=F^c\)</span> 应用 4。</p>
<p><span class="math inline">\(3,4\Rightarrow5\)</span>：如果 <span class="math inline">\(\mu(\partial A)=0\)</span>，则 <span class="math inline">\(\mu(A)=\mu(\overline{A})=\mu({\rm
int}(A))\)</span>。 <span class="math display">\[\varlimsup\mu_n(A)\le\varlimsup\mu_n(\overline{A})
\le\mu(\overline{A})=\mu(A)=\mu({\rm int}(A))\le\varliminf\mu_n({\rm
int}(A))\le\varliminf\mu_n(A).\]</span></p>
<p><span class="math inline">\(5\Rightarrow1\)</span>：取任意 <span class="math inline">\(f\in C_b(\mathcal S)\)</span>，记 <span class="math inline">\(m=\inf f\)</span>, <span class="math inline">\(M=\sup f\)</span>，并令 <span class="math display">\[
g=\frac{f-m}{M-m}\in C_b(\mathcal S),\qquad 0\le g\le 1.
\]</span> 若已证 <span class="math inline">\(\int
g\,\mathrm{d}\mu_n\to\int
g\,\,\mathrm{d}\mu\)</span>，则由线性缩放可还原对 <span class="math inline">\(f\)</span> 的结论。</p>
<p>对任意有限测度 <span class="math inline">\(\nu\)</span> 及 <span class="math inline">\(0\le h\le 1\)</span> 的可测函数，有层蛋糕表示：
<span class="math display">\[
\int h\,\mathrm{d}\nu= \int_0^1 \nu\big(\{h\ge t\}\big)\,\mathrm{d}t.
\]</span> 因为 <span class="math display">\[h(x)=\int_0^{h(x)}\,\mathrm{d}t=\int_0^1\mathbb{1}_{\{h(x)\ge
t\}}\,\mathrm{d}t.\]</span> 再用 Tonelli 交换积分次序。</p>
<p>据此，只需证明 <span class="math display">\[
\int_0^1 \mu_n\big(\{g\ge t\}\big)\,\mathrm{d}t\longrightarrow\int_0^1
\mu\big(\{g\ge t\}\big)\,\mathrm{d}t.
\]</span> 从而我们只要证明 <span class="math inline">\(\mu_n(\{g\ge
t\})\to \mu(\{g\ge t\})\)</span> 对几乎处处的 <span class="math inline">\(t\in[0,1]\)</span> 成立即可。</p>
<p>对每个 <span class="math inline">\(t\in[0,1]\)</span>，记 <span class="math display">\[\{t\in[0,1]\mid \mu(\partial\{g\ge
t\})&gt;0\}\subset\{t\in[0,1]\mid \mu(\{g=t\})&gt;0\}:=E.\]</span></p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>这里只是包含关系，不是相等关系。例如，取 <span class="math inline">\(g(x)\)</span> 是任何在 <span class="math inline">\([-1,1]\)</span> 上为 0，在 <span class="math inline">\(|x|&gt;1\)</span> 时取值在 <span class="math inline">\((0,1]\)</span> 之间的连续函数，则 <span class="math display">\[\{g(x)&gt; 0 \}=(-\infty, -1)\cup(1,\infty),\quad
\{g(x) = 0\} = [-1,1].\]</span> 前者的边界只要两个点 <span class="math inline">\(\pm1\)</span>，是后者严格的子集。</p>
</div>
<p>则 <span class="math inline">\(\mu_n(\{g\ge t\})\to \mu(\{g\ge
t\})\)</span> 对所有 <span class="math inline">\(t\in[0,1]\setminus
E\)</span> 成立。 所以我们只要再证明 <span class="math inline">\(E\)</span> 是可数集合即可。</p>
<p>对每个 <span class="math inline">\(k\in\mathbb N\)</span>，集合 <span class="math display">\[
E_k:=\{t:\ \mu(\{g=t\})\ge 1/k\}
\]</span> 必为有限集，否则将导致 <span class="math inline">\(\sum_{t\in
E_k}\mu(\{g=t\})=\infty\)</span>，与 <span class="math inline">\(\mu(\mathcal S)=1\)</span> 矛盾。从而 <span class="math inline">\(E=\bigcup_{k\ge1}E_k\)</span> 可数。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="weak-convergence-over-mathbbrd">✅ 22.2 Weak Convergence over
<span class="math inline">\(\mathbb{R}^d\)</span></h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
40.1</span>.</span><span class="statement-spah"> </span>在 <span class="math inline">\(\mathcal{S}=\mathbb{R}^d\)</span> 的情形，<span class="math inline">\(\mu_n\to_w \mu\)</span> 等价于对任何 <span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span> 有 <span class="math display">\[\int f\,\mathrm{d}\mu_n\to \int
f\,\mathrm{d}\mu.\]</span> 注意，这里的 <span class="math inline">\(f\)</span> 加强为具有紧支集的函数。</p>
</div>
<p>证明：只要证明当 <span class="math inline">\(f\in
C_c(\mathbb{R}^d)\)</span> 时有 <span class="math display">\[\int
f\,\mathrm{d}\mu_n\to \int f\,\mathrm{d}\mu.\]</span> 即可。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
40.2</span>.</span><span class="statement-spah">
</span>如果定理结论成立，则 <span class="math display">\[\lim_{R\to\infty}\inf_n\mu_n(\overline
B_R)=1.\]</span></p>
</div>
<p>证明：令 <span class="math inline">\(g_R(x):\mathbb{R}^d\to\mathbb{R}\)</span>
是如下的连续　函数：当 <span class="math inline">\(|x|&lt; R/2\)</span>
时 <span class="math inline">\(g(x)=1\)</span>，当 <span class="math inline">\(|x|&gt;R\)</span> 时 <span class="math inline">\(g(x)=0\)</span>，当 <span class="math inline">\(R/2\le |x|\le R\)</span> 时 <span class="math inline">\(g(x)\)</span> 线性插值。则 <span class="math display">\[\mathbb{1}_{\overline B_{R/2}}\le g_R \le
\mathbb{1}_{\overline B_{R}}.\]</span> 所以 <span class="math display">\[\int g_R\,\mathrm{d}\mu_n\leq \int
\mathbb{1}_{\overline B_{R}}\,\mathrm{d}\mu_n=\mu_n(\overline
B_R).\]</span> 两边取下极限，并利用 <span class="math inline">\(g_R\)</span> 是具有紧支集的连续函数，得到 <span class="math display">\[\liminf_n\mu_n(\overline B_R)\geq \liminf_n\int
g_R\,\mathrm{d}\mu_n=\int g_R\,\mathrm{d}\mu\geq\mu(\overline
B_{R/2}).\]</span></p>
<p>给定 <span class="math inline">\(\varepsilon&gt;0\)</span>。由 <span class="math inline">\(\mu(\overline B_{R/2})\uparrow 1\)</span>，可取
<span class="math inline">\(R_0\)</span> 使 <span class="math inline">\(\mu(\overline
B_{R_0/2})&gt;1-\varepsilon\)</span>。 <span class="math display">\[\liminf_{n}\mu_n(\overline B_{R_0})\ \ge\
1-\varepsilon.\]</span> 故存在 <span class="math inline">\(N\)</span>
使得对所有 <span class="math inline">\(n\ge N\)</span>，<span class="math inline">\(\mu_n(\overline B_{R_0})\ge
1-\varepsilon\)</span>。</p>
<p>对有限个指标 <span class="math inline">\(n&lt;N\)</span>，可取 <span class="math inline">\(R_1,\dots,R_{N-1}\)</span> 使 <span class="math inline">\(\mu_n(\overline B_{R_n})\ge
1-\varepsilon\)</span>。令 <span class="math display">\[R=\max\{R_0,R_1,\dots,R_{N-1}\}.\]</span>
则对所有 <span class="math inline">\(n\)</span> 都有 <span class="math inline">\(\mu_n(\overline B_R)\ge
1-\varepsilon\)</span>。于是 <span class="math display">\[\inf_n
\mu_n(\overline B_R)\ \ge\ 1-\varepsilon.\]</span> 由 <span class="math inline">\(\varepsilon\)</span> 任意，遂得 <span class="math display">\[\lim_{R\to\infty}\inf_n \mu_n(\overline
B_R)=1.\]</span></p>
<p>回到定理证明。</p>
<p>现取任意有界连续函数 <span class="math inline">\(f\in
C_b(\mathbb{R}^d)\)</span>，令 <span class="math inline">\(f_R:=f\cdot
g_R\in C_c(\mathbb{R}^d)\)</span>。注意到 <span class="math display">\[
0\le 1-g_R\le \mathbb{1}_{\overline B_{R/2}^{c}},
\quad |f-f_R|=|f|\cdot (1-g_R)\le \|f\|_\infty\cdot\mathbb{1}_{\overline
B_{R/2}^{c}}.\]</span> 因此对所有 <span class="math inline">\(n\)</span>
有 <span class="math display">\[
\left|\int (f-f_R)\,\mathrm d\mu_n\right|
\le \|f\|_\infty\cdot\mu_n(\overline B_{R/2}^{c}),\quad
\left|\int (f-f_R)\,\mathrm{d}\mu\right|
\le \|f\|_\infty\cdot\mu(\overline B_{R/2}^{c}).
\tag{1}
\]</span></p>
<p>由上一部分已得的统一紧性 <span class="math inline">\(\displaystyle
\lim_{R\to\infty}\inf_n\mu_n(\overline B_R)=1\)</span> 以及 <span class="math inline">\(\mu(\overline B_R)\uparrow 1\)</span>，给定 <span class="math inline">\(\varepsilon&gt;0\)</span>，可取 <span class="math inline">\(R\)</span> 使得 <span class="math display">\[\sup_n\mu_n(\overline B_{R/2}^{c})\le
\varepsilon,\quad
\mu(\overline B_{R/2}^{c})\le \varepsilon.
\tag{2}\]</span> 代回 (1) 得到 <span class="math display">\[\sup_n\left|\int (f-f_R)\,\mathrm
d\mu_n\right|\le \|f\|_\infty\varepsilon,
\quad
\left|\int (f-f_R)\,\mathrm{d}\mu\right|\le \|f\|_\infty \varepsilon.
\tag{3}\]</span></p>
<p>另一方面，对这个固定的 <span class="math inline">\(R\)</span>，由假设在 <span class="math inline">\(C_c(\mathbb{R}^d)\)</span> 上的收敛有 <span class="math display">\[\int f_R\,\mathrm d\mu_n\to\int
f_R\,\mathrm{d}\mu\quad (n\to\infty)\]</span> 故存在 <span class="math inline">\(N\)</span> 使得 <span class="math inline">\(n\ge
N\)</span> 时 <span class="math display">\[\left|\int f_R\,\mathrm
d\mu_n-\int f_R\,\mathrm{d}\mu\right|\le \varepsilon.
\tag{4}\]</span></p>
<p>现在分解 <span class="math display">\[\int f\,\mathrm d\mu_n-\int
f\,\mathrm{d}\mu
=\int (f-f_R)\,\mathrm d\mu_n + \left(\int f_R\,\mathrm d\mu_n-\int
f_R\,\mathrm{d}\mu\right)
+\int (f-f_R)\,\mathrm{d}\mu.\]</span></p>
<p>由 (3), (4) 得到当 <span class="math inline">\(n\ge N\)</span> 时
<span class="math display">\[\left|\int f\,\mathrm d\mu_n-\int
f\,\mathrm{d}\mu\right|
\le 2\|f\|_\infty\varepsilon+\varepsilon.\]</span> 由于 <span class="math inline">\(\varepsilon&gt;0\)</span> 任意，便得 <span class="math display">\[\int f\,\mathrm d\mu_n\to\int
f\,\mathrm{d}\mu\quad(n\to\infty).\]</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
40.3</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{\mu_n\},\mu\)</span> 是 <span class="math inline">\(\mathbb{R}^d\)</span> 上的概率分部，则 <span class="math inline">\(\mu_n\to_w\mu\)</span> 当且仅当 <span class="math display">\[\int f\,\mathrm{d}\mu_n\to \int
f\,\mathrm{d}\mu,\quad \forall f\in
C_c^\infty(\mathbb{R}^d).\]</span></p>
</div>
<p>这里进一步把 <span class="math inline">\(f\)</span>
加强成了具有紧支集且光滑的函数。</p>
<p>证明：任取一个光滑函数 <span class="math inline">\(\rho\)</span> 满足
<span class="math inline">\(0\le \rho\le \mathbb{1}_{\overline
B_1}\)</span>。并归一化使得 <span class="math inline">\(\rho\)</span>
是概率密度。</p>
<p>任取 <span class="math inline">\(\epsilon&gt;0\)</span>，<span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span>。令 <span class="math display">\[f_\epsilon(x) = \int_{\mathbb{R}^d}f(x+\epsilon
t)\rho(t)\,\mathrm{d}t=\frac{1}{\epsilon^d}\int
f(y)\rho(\frac{y-x}{\epsilon})\,\mathrm{d}y.\]</span> 直观上，<span class="math inline">\(f_\epsilon\)</span> 就是 <span class="math inline">\(f\)</span> 在半径为 <span class="math inline">\(\epsilon\)</span> 邻域内，以 <span class="math inline">\(\rho\)</span> 为密度的平均值。显然 <span class="math inline">\(f_\epsilon\)</span> 是光滑且具有紧支集的函数且
<span class="math display">\[\|f - f_\epsilon\|_\infty \to 0.\]</span>
取 <span class="math inline">\(f_\delta\)</span> 满足 <span class="math inline">\(\|f - f_\delta\|_\infty&lt;\epsilon.\)</span>$
<span class="math display">\[\int f\,\mathrm{d}\mu- \int
f\,\mathrm{d}\mu_n = \int (f-f_\epsilon)\,\mathrm{d}\mu+ \int
f_\epsilon\,\mathrm{d}\mu- \int f_\epsilon\,\mathrm{d}\mu_n
+\int f_\epsilon-f\,\mathrm{d}\mu_n.
\]</span> 第一项和第三项都不超过 <span class="math inline">\(\epsilon\)</span>，中间项可以通过取 <span class="math inline">\(n\)</span> 足够大使得也不超过 <span class="math inline">\(\epsilon\)</span>， 所以 <span class="math display">\[\left|\int f\,\mathrm{d}\mu- \int
f\,\mathrm{d}\mu_n\right|\le 3\epsilon.\]</span> 由 <span class="math inline">\(\epsilon\)</span> 任意性即得。</p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>我们来证明 <span class="math inline">\(f_\varepsilon \to
f\)</span> 是一致收敛的：</p>
<p>由于 <span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span>
有界。设 <span class="math display">\[\|f\|_\infty:=\sup_{x\in\mathbb{R}^d}|f(x)|&lt;\infty.\]</span>
（这是因为 <span class="math inline">\(\operatorname{supp} f\)</span>
紧且 <span class="math inline">\(f\)</span>
在紧集上连续，故取得最大值；在支集外 <span class="math inline">\(f=0\)</span>。）</p>
<p>于是对任意 <span class="math inline">\(h\in\mathbb{R}^d\)</span>
与任意 <span class="math inline">\(x\)</span>, <span class="math display">\[|f(x+h)-f(x)|\le |f(x+h)|+|f(x)|\le
2\|f\|_\infty.\]</span> 对 <span class="math inline">\(x\)</span>
取上确界得到 <span class="math display">\[\|f(\cdot+h)-f(\cdot)\|_\infty\le
2\|f\|_\infty.\]</span> 再对所有 <span class="math inline">\(|h|\le
r\)</span> 取上确界，便有 <span class="math display">\[\omega_f(r):=\sup_{|h|\le
r}\|f(\cdot+h)-f(\cdot)\|_\infty\le 2\|f\|_\infty
&lt;\infty.\]</span></p>
<p>设 <span class="math inline">\(\rho\in
C_c^\infty(\mathbb{R}^d)\)</span>，<span class="math inline">\(\rho\ge0\)</span>，<span class="math inline">\(\int \rho=1\)</span>，<span class="math inline">\(\mathrm{supp}\,\rho\subset
\overline{B_1(0)}\)</span>。令 <span class="math display">\[
\rho_\varepsilon(x)=\varepsilon^{-d}\rho(x/\varepsilon),\quad
f_\varepsilon=f*\rho_\varepsilon.
\]</span> 对任意 <span class="math inline">\(x\in\mathbb{R}^d\)</span>，
<span class="math display">\[
f_\varepsilon(x)-f(x)
=\int_{\mathbb{R}^d}\rho_\varepsilon(y)\bigl(f(x-y)-f(x)\bigr)\,dy.
\]</span> 因为 <span class="math inline">\(\mathrm{supp}\,\rho_\varepsilon\subset
\overline{B_\varepsilon(0)}\)</span>，有 <span class="math display">\[
|f_\varepsilon(x)-f(x)|
\le \int \rho_\varepsilon(y)\,\sup_{|y|\le \varepsilon}|f(x-y)-f(x)|\,dy
\le \omega_f(\varepsilon).
\]</span></p>
<p>由于 <span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span>
连续且支撑紧，<span class="math inline">\(f\)</span> 在 <span class="math inline">\(\mathbb{R}^d\)</span> 上一致连续，故 <span class="math inline">\(\omega_f(r)\to0\)</span> 当 <span class="math inline">\(r\to0\)</span>。于是 <span class="math display">\[
\|f_\varepsilon-f\|_\infty \xrightarrow[\varepsilon\to0]{} 0,
\]</span> 这正是一致收敛。</p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
40.4</span>.</span><span class="statement-spah"> </span>当 <span class="math inline">\(\mathcal{S}=\mathbb{R}\)</span> 时，<span class="math inline">\(\mu_n\to_w\mu\)</span> 当且仅当 <span class="math display">\[F_n(t)=\mu_n((-\infty, t])\to \mu((-\infty, t]) =
F(t),\quad \forall t, \text{ $F$ continous at $t$}.\]</span></p>
</div>
<p>证明：<span class="math inline">\(\Rightarrow\)</span> 由 Portmanteau
定理即得。</p>
<p><span class="math inline">\(\Leftarrow\)</span>：设 <span class="math inline">\(f\in C_c(\mathbb{R})\)</span>
是具有紧支集的连续函数，则 <span class="math inline">\(f\)</span>
也是一致连续的。</p>
<p>设 <span class="math inline">\(\pi= \{x_0&lt;x_1&lt;\cdots&lt;
x_k\}\)</span> 是 <span class="math inline">\(\mathop{\mathrm{supp}}f\)</span>
的一个划分，满足：</p>
<ol type="1">
<li><span class="math inline">\(x_j\)</span> 都是 <span class="math inline">\(F\)</span> 的连续点；</li>
<li><span class="math inline">\(|x_j-x_{j+1}|\leq
\epsilon\)</span>；</li>
<li><span class="math inline">\(|f(x_j)-f(x_{j+1})|\leq\delta\)</span>。</li>
</ol>
<p>则 <span class="math inline">\(f_\pi = \sum_{j=1}^k
\mathbb{1}_{(x_{j-1},x_j]}\)</span> 满足 <span class="math inline">\(\|f_\pi - f\|_\infty &lt; \epsilon\)</span>。 于是
<span class="math display">\[\left|\int
(f-f_\pi)\,\mathrm{d}\mu_n\right| \leq \epsilon.\]</span> <span class="math display">\[\left|\int (f-f_\pi)\,\mathrm{d}\mu\right| \leq
\epsilon.\]</span> <span class="math display">\[\left|\int
f_\pi\,\mathrm{d}\mu - \int f_\pi\,\mathrm{d}\mu\right|\le \epsilon
\sum_{j=1}^k|F_n(x_j) - F(x_j)|\xrightarrow{x\to\infty}0.\]</span></p>
<h1 id="vague-convergence">✅ 23.1 Vague Convergence</h1>
<p>回忆弱收敛是指，一族概率测度 <span class="math inline">\(\{\mu_n\}\)</span> 收敛到一个概率测度 <span class="math inline">\(\mu\)</span>。如果这些测度都是 <span class="math inline">\(\mathbb{R}^d\)</span>
上的，那么这等价于用连续有界函数 <span class="math inline">\(C_b(\mathbb{R}^d)\)</span>，或者连续紧支集函数
<span class="math inline">\(C_c(\mathbb{R}^d)\)</span>，甚至光滑紧支集函数
<span class="math inline">\(C_c^\infty(\mathbb{R}^d)\)</span>
的积分检查的收敛。</p>
<p>如果我们不要求 <span class="math inline">\(\mu_n,\mu\)</span>
是概率测度呢？只要求它们是 Borel 测度呢？</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
41.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu_n,\mu\)</span> 是 <span class="math inline">\(\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d)\)</span>
上的 Borel 测度。如果对任何 <span class="math inline">\(f\in
C_c(\mathbb{R}^d)\)</span> 有 <span class="math display">\[\int
f\,\mathrm{d}\mu_n\to \int f\,\mathrm{d}\mu.\]</span> 就称 <span class="math inline">\(\mu_n\)</span> vaguely 收敛到 <span class="math inline">\(\mu\)</span>。记作 <span class="math inline">\(\mu_n\to_v\mu\)</span>。</p>
</div>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
41.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathcal{S}\)</span>
是一个拓扑空间。其上的一族概率测度 <span class="math inline">\(\Lambda\)</span> 称作是 tight 的，如果对任意 <span class="math inline">\(\epsilon&gt;0\)</span>，都存在紧集 <span class="math inline">\(K_\epsilon\)</span> 使得 <span class="math inline">\(\mu_(K^c)&lt;\epsilon\)</span> 对任何 <span class="math inline">\(\mu\in\Lambda\)</span> 成立。</p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
41.3</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{\mu_n\}\)</span> 是 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的概率测度，且 <span class="math inline">\(\mu_n\to_v \mu\)</span>。则
<span class="math inline">\(\mu\)</span> 是概率测度当且仅当 <span class="math inline">\(\{\mu_n\}\)</span> 是 tight 的。这时 <span class="math inline">\(\mu_n\to_w\mu\)</span>。</p>
</div>
<p><strong>证明</strong>：</p>
<p><span class="math inline">\(\Rightarrow\)</span>：如果 <span class="math inline">\(\mu\)</span> 是概率测度，则在 22.2
的引理中我们证明了 <span class="math display">\[\lim_{R\uparrow\infty}\inf_n\mu_n(\overline B_R)
= 1.\]</span> 由此即得结论。</p>
<p><span class="math inline">\(\Leftarrow\)</span>：给定 <span class="math inline">\(\epsilon &gt; 0\)</span>。取紧集 <span class="math inline">\(K_\epsilon\)</span> 使得 <span class="math inline">\(\mu_n(K_\epsilon)\ge1-\epsilon\)</span>。再取具有紧支集的
<span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span> 满足 <span class="math inline">\(1_{K_\epsilon}\le f\le 1\)</span>。则 <span class="math display">\[\mu(\mathbb{R}^d)=\int 1\,\mathrm{d}\mu\ge \int
f\,\mathrm{d}\mu=\lim_{n\to\infty}\int
f\,\mathrm{d}\mu_n\ge\varliminf_{n\to\infty}\int
1_{K_\epsilon}\,\mathrm{d}\mu_n=\varliminf_{n\to\infty}\mu_n(K_\epsilon)\ge
1-\epsilon.\]</span> 由 <span class="math inline">\(\epsilon\)</span>
任意性可得 <span class="math inline">\(\mu(\mathbb{R}^d)\ge1\)</span>。</p>
<p>另一方面，如果 <span class="math inline">\(\mu(\mathbb{R}^d) &gt;
1\)</span> 的话，则我们可以取紧集 <span class="math inline">\(K=\overline B_R\)</span> 满足 <span class="math inline">\(\mu(K)&gt;1\)</span>。仍然取 <span class="math inline">\(f\in C_c(\mathbb{R}^d)\)</span> 满足 <span class="math inline">\(1 \ge f \ge \mathbb{1}_K\)</span>，则 <span class="math display">\[1=\mu_n(\mathbb{R}^d)=\int
1\,\mathrm{d}\mu_n\ge\int f\,\mathrm{d}\mu_n\to \int f\,\mathrm{d}\mu\ge
\mu(K)&gt;1.\]</span> 矛盾！<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="prokhorovs-compactness-theorem">✅ 23.2 Prokhorov’s Compactness
Theorem</h1>
<div id="prokhorov-------------" class="statement sta_prokhorov_____ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Prokhorov 紧性定理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathcal{S}\)</span> 是可分度量空间，<span class="math inline">\(\{\mu_n\}\)</span> 是 <span class="math inline">\((\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span>
上的概率测度，则 <span class="math inline">\(\{\mu_n\}\)</span> 有
vaguely 收敛的子序列。</p>
</div>
<p><strong>证明</strong>：将有理数 <span class="math inline">\(\mathbb
Q\)</span> 排列为 <span class="math inline">\(\mathbb{Q}=\{q_1,q_2,\ldots\}\)</span>，并记 <span class="math inline">\(F_n=F_{\mu_n}\)</span>。</p>
<ul>
<li><span class="math inline">\(\{F_n(q_1)\}_{n=1}^\infty\)</span> 是
<span class="math inline">\([0,1]\)</span>
中的有界序列，所以存在收敛子序列 <span class="math inline">\(\{F_{m_1(k)}(q_1)\}_{k=1}^\infty\)</span>。</li>
<li><span class="math inline">\(\{F_{m_1(k)}(q_2)\}_{k=1}^\infty\)</span> 是 <span class="math inline">\([0,1]\)</span> 中的有界序列，所以存在收敛子序列
<span class="math inline">\(\{F_{m_2(k)}(q_2)\}_{k=1}^\infty\)</span>。</li>
<li>…</li>
</ul>
<p>这样我们会得到一串子序列 <span class="math inline">\(\{m_j(k)\}\)</span> 使得 <span class="math inline">\(m_j(\cdot)\)</span> 是 <span class="math inline">\(m_{j-1}(\cdot)\)</span> 的子序列；并且 <span class="math display">\[F_{m_j(k)}(q_j)\to G(q_j).\]</span> 于是 <span class="math inline">\(F_{m_k(k)}(q) \to G(q)\)</span> 对所有 <span class="math inline">\(q\in\mathbb Q\)</span> 成立。</p>
<p>现在的 <span class="math inline">\(G\)</span> 只在 <span class="math inline">\(\mathbb Q\)</span> 上有定义。我们想把它变成一个
<span class="math inline">\(\mathbb{R}\)</span> 上的分布函数。令</p>
<p><span class="math display">\[F(x) = \inf\,\{G(q)\mid q\in\mathbb{Q},\
q &gt; x\}.\]</span> 显然 <span class="math inline">\(F\)</span>
是递增的。我们来说明 <span class="math inline">\(F\)</span>
也是右连续的：设 <span class="math inline">\(x_n\downarrow
x\)</span>，则 <span class="math display">\[\begin{aligned}
\lim_{n\to\infty}F(x_n)&amp;=\inf F(x_n)=\inf_n\inf\,\{G(q)\mid
q\in\mathbb{Q},\ q &gt; x_n\}\\&amp;=\inf\,\{G(q)\mid q\in\mathbb{Q}&gt;
\text{ some }x_n\}\\
&amp;=\inf\,\{G(q)\mid q\in\mathbb{Q}&gt; x\}\\
&amp;=F(x).
\end{aligned}.\]</span> 所以 <span class="math inline">\(F\)</span>
确实是右连续的。</p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>我们使用了 <span class="math inline">\(\inf_n \inf S_n =
\inf(\cup_{n=1}^\infty S_n)\)</span> 对任何集合族 <span class="math inline">\(\{S_n\}\)</span> 成立这一事实。</p>
</div>
<p>此外还有 <span class="math display">\[\lim_{x\to -\infty} F(x) =
\inf\{G(q)\}\geq 0,\quad \lim_{x\to \infty} F(x) = \sup\{G(q)\}\leq
1.\]</span> 所以 <span class="math inline">\(F\)</span>
是一个次分布函数。它给出一个有限 Borel 测度。</p>
<p>要证明 <span class="math inline">\(\mu_{n_k}\to_v\mu\)</span>，只要证明对任何 <span class="math inline">\(F\)</span> 的连续点 <span class="math inline">\(x\)</span> 有 <span class="math display">\[F_{n_k}(x)\to F(x).\]</span> 即可。设有理数序列
<span class="math inline">\(q_j\uparrow x,r_j\downarrow x\)</span>。由于
<span class="math inline">\(F_{n_k}\)</span> 都是递增的，所以 <span class="math display">\[F_{n_k}(q_j)\le F_{n_k}(x) \le F_{n_k}(r_j),\quad
\forall k, j.\]</span> 令 <span class="math inline">\(k\to\infty\)</span> 可得 <span class="math display">\[G(q_j)\leq \varliminf_k F_{n_k}(x)\le
\varlimsup_k F_{n_k}(x)\le G(r_j).\]</span> 从而 <span class="math display">\[\sup_j G(q_j)\leq \varliminf_k F_{n_k}(x)\le
\varlimsup_k F_{n_k}(x)\le \inf_j G(r_j).\]</span> 一方面右边 <span class="math inline">\(\inf_{r&gt;x}G(r)=F(x)\)</span>。</p>
<p>另一方面，对任意 <span class="math inline">\(q &lt; y &lt;
x\)</span>，由 <span class="math display">\[G(q)\leq \inf_{s &gt; y}
G(s) = F(y).\]</span> 对所有 <span class="math inline">\(q&lt;y\)</span>
取上确界，再对所有 <span class="math inline">\(y&lt;x\)</span>
取上确界，得 <span class="math display">\[\sup_{q&lt;x}G(q) =
\sup_{y&lt;x}\sup_{q&lt;y}G(q)\le \sup_{y&lt;x}F(y) = F(x-).\]</span>
由于 <span class="math inline">\(x\)</span> 是连续点可得 <span class="math inline">\(F(x)= \sup_{q&lt;x}G(q)=\sup_j G(q_j)\)</span>。
于是 <span class="math inline">\(F(x) = \varliminf_k F_{n_k}(x)=
\varlimsup_k F_{n_k}(x)\)</span>。</p>
<p>先对 <span class="math inline">\(\varphi\in C_c^1(\mathbb
R)\)</span>。记 <span class="math inline">\(K=\operatorname{supp}\varphi\)</span> 紧。对每个
<span class="math inline">\(k\)</span>, <span class="math display">\[\int \varphi\,\mathrm{d}\mu_{n_k}
=\int_{(-\infty,\infty)} \varphi\,\mathrm{d}F_{n_k}
=\Big[\varphi(x)F_{n_k}(x)\Big]_{-\infty}^{+\infty}
-\int F_{n_k}(x)\varphi'(x)\,\mathrm{d}x
= -\int_K F_{n_k}(x)\varphi'(x)\,\mathrm{d}x.\]</span> 同理 <span class="math display">\[\int \varphi\,\,\mathrm{d}\mu= -\int_K
F(x)\varphi'(x)\,\mathrm{d}x.\]</span> 我们有 <span class="math inline">\(F_{n_k}(x)\to F(x)\)</span> 对 <span class="math inline">\(x\)</span> <strong>几乎处处</strong>成立，且 <span class="math inline">\(0\le F_{n_k}\le 1\)</span>。支配收敛给出 <span class="math display">\[\int\varphi\,\mathrm{d}\mu_{n_k}\to-\int_K
F(x)\varphi'(x)\,\mathrm{d}x=\int
\varphi\,\mathrm{d}\mu.\]</span></p>
<p>再用 <span class="math inline">\(C_c^1\)</span> 在 <span class="math inline">\(C_c\)</span> 上的一致稠密性：给定任意 <span class="math inline">\(\psi\in C_c(\mathbb R)\)</span> 与 <span class="math inline">\(\epsilon&gt;0\)</span>，可取 <span class="math inline">\(\varphi\in C_c^1\)</span> 使 <span class="math inline">\(\|\psi-\varphi\|_\infty&lt;\epsilon\)</span>。因为
<span class="math inline">\(\mu_{n_k},\mu\)</span> 都是有限测度， <span class="math display">\[\left|\int \psi\,\mathrm d\mu_{n_k}-\int
\psi\,\mathrm{d}\mu\right|
\le \left|\int \varphi\,\mathrm{d}\mu_{n_k}-\int
\varphi\,\mathrm{d}\mu\right|
+ \epsilon\cdot(\mu_{n_k}(\mathbb R)+\mu(\mathbb R))
  \le \left|\int \varphi\,\mathrm{d}\mu_{n_k}-\int
\varphi\,\mathrm{d}\mu\right|+2\epsilon.\]</span> 令 <span class="math inline">\(k\to\infty\)</span> 后，再令 <span class="math inline">\(\epsilon\downarrow0\)</span> 即得 <span class="math inline">\(\mu_{n_k}\to_v\mu\)</span>。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
42.1</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{\mu_n\}\)</span> 还是 tight
的，则存在弱收敛的子序列，其弱收敛的极限是一个概率测度 <span class="math inline">\(\mu\)</span>。</p>
</div>
<h1 id="skorohods-theorem">✅ 23.3 Skorohod’s Theorem</h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
43.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathcal{S}\)</span> 是可分度量空间，<span class="math inline">\(\mu_n,\mu\)</span> 都是 <span class="math inline">\((\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span>
上的概率测度，如果 <span class="math inline">\(\mu_n\to_w\mu\)</span>，则存在概率空间 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})\)</span>
和随机变量 <span class="math inline">\(Y_n,Y:
\Omega\to\mathcal{S}\)</span> 满足：</p>
<ol type="1">
<li><span class="math inline">\(Y_n,Y\)</span> 的分布分别是 <span class="math inline">\(\mu_n,\mu\)</span>。</li>
<li><span class="math inline">\(Y_n\to Y\ \mathrm{a.e.}\)</span>。</li>
</ol>
</div>
<p>我们只在 <span class="math inline">\(\mathcal{S}=\mathbb{R}\)</span>
的情形证明这个结论。</p>
<p><strong>Inverting the CDF</strong></p>
<p>设 <span class="math inline">\(F:\mathbb{R}\to [0,1]\)</span>
是一个分布函数。<span class="math inline">\(F\)</span>
未必是单射。我们来试着定义 <span class="math inline">\(F\)</span> 的逆
<span class="math inline">\(F^\leftarrow\)</span>。这里的问题在于 <span class="math inline">\(F\)</span> 的平坦处（即 <span class="math inline">\(F\)</span> 在区间 <span class="math inline">\((a,b)\)</span> 上是常数），<span class="math inline">\(F^{-1}\)</span>
是没有定义的。这时我们一律规定取区间的左端点 <span class="math inline">\(a\)</span> 作为 <span class="math inline">\(F^{-1}\)</span>：</p>
<p><span class="math display">\[F^\leftarrow(x)=
\sup\{y\in\mathbb{R}\mid F(y)&lt;x\}.\]</span></p>
<p>直观上，就是取高度为 <span class="math inline">\(x\)</span>
的水平横线与 <span class="math inline">\(F\)</span>
的图像的第一个交点的横坐标。</p>
<p><span class="math inline">\(F^\leftarrow\)</span> 满足：</p>
<p><span class="math display">\[F^{\leftarrow}(u)\le
t\Longleftrightarrow  F(t)\ge u.\]</span></p>
<p>几何上这很显然：<span class="math inline">\(F(t)\ge u\)</span> 说明在
<span class="math inline">\(t\)</span> 处，<span class="math inline">\(F\)</span> 的图像已经和高度为 <span class="math inline">\(u\)</span> 的水平线相交了，即交点横坐标必然在
<span class="math inline">\(t\)</span> 或者 <span class="math inline">\(t\)</span> 的左侧，即 <span class="math inline">\(F^\leftarrow\le t\)</span>。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
43.2</span>.</span><span class="statement-spah"> </span>取 <span class="math inline">\(Y = F^\leftarrow\)</span>，则 <span class="math inline">\(Y\)</span> 的分布函数就是 <span class="math inline">\(F\)</span>。</p>
</div>
<p>证明： <span class="math display">\[\begin{aligned}
\mathbb{P}(Y\le t)&amp;=\lambda(\{x\in(0,1): Y(x)\le t\})\\
&amp;=\lambda(\{x\in(0,1): x\le F(t)\})\\
&amp;=\lambda((0, F(t)])\\
&amp;=F(t).
\end{aligned}
\]</span></p>
<p>回到 Skorohod 定理的证明。我们取 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})=((0,1),\mathcal{B}(0,1),\lambda)\)</span>。<span class="math inline">\(Y_n=F_n^\leftarrow\)</span>。<span class="math inline">\(Y=F^\leftarrow\)</span>。这样就解决了“存在随机变量的分布恰好是
<span class="math inline">\(\mu_n\)</span> 和 <span class="math inline">\(\mu\)</span>” 这一步。我们再来证明 <span class="math inline">\(Y_n\)</span> 几乎处处收敛到 <span class="math inline">\(Y\)</span>。</p>
<p>记 <span class="math display">\[E = \{t\in(0,1)\mid F^\leftarrow(t)
&lt; F^\to(t)\}.\]</span> 即 <span class="math inline">\(E\)</span> 是
<span class="math inline">\(F\)</span>
的图像中的那些“平坦”对应的高度值。则 <span class="math inline">\(E\)</span> 是可数集。 我们要证明 <span class="math inline">\(Y_n(x)\to Y(x)\)</span> 对任何 <span class="math inline">\(x\notin E\)</span> 成立。</p>
<ul>
<li><p>取一列 <span class="math inline">\(F\)</span> 的连续点 <span class="math inline">\(y_j\uparrow Y(x)\)</span>。弱收敛给出 <span class="math inline">\(F_n(y_j)\to F(y_j)\)</span> 对每个 <span class="math inline">\(j\)</span> 成立。由于 <span class="math display">\[y_j&lt;Y(x) = \sup\{u\mid F(u) &lt; x\}.\]</span>
所以 <span class="math inline">\(F(y_j)&lt;x\)</span>。从而 <span class="math inline">\(F_n(y_j)&lt;x\)</span> 对充分大的 <span class="math inline">\(n\)</span> 成立。但这说明对这些充分大的 <span class="math inline">\(n\)</span> 也有 <span class="math display">\[Y_n(x) = \sup\{y\mid F_n(y) &lt; x\}\ge
y_j.\]</span> 于是 <span class="math display">\[\varliminf_n Y_n(x)\ge
\sup_j y_j = Y(x).\]</span></p></li>
<li><p>取一列 <span class="math inline">\(F\)</span> 的连续点 <span class="math inline">\(y_j\downarrow Y(x)\)</span>。弱收敛给出 <span class="math inline">\(F_n(y_j)\to F(y_j)\)</span> 对每个 <span class="math inline">\(j\)</span> 成立。由于 <span class="math inline">\(x\in E\)</span>，所以 <span class="math display">\[y_j&gt;Y(x) = Y^\leftarrow(x) = Y^\to(x) =
\inf\{u\mid F(u)&gt;x\}.\]</span> 所以 <span class="math inline">\(F(y_j)&gt;x\)</span>。从而 <span class="math inline">\(F_n(y_j)&gt;x\)</span> 对充分大的 <span class="math inline">\(n\)</span> 成立。但这说明对这些充分大的 <span class="math inline">\(n\)</span> 也有 <span class="math display">\[Y_n(x) = \sup\{y\mid F_n(y) &lt; x\}\le
y_j.\]</span> 于是 <span class="math display">\[\varlimsup_n Y_n(x)\le
\inf_j y_j = Y(x).\]</span></p></li>
</ul>
<h1 id="complex-integration-and-dynkins-theorem">✅ 24.1 Complex
Integration and Dynkin’s Theorem</h1>
<p>这一节将 Dynkin 函数系引理推广到了复可测的函数上。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
44.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\((\Omega,\mathcal{F},\mu)\)</span>
是一个可测空间，<span class="math inline">\(f:\Omega\to(\mathbb{C},\mathcal{B}(\mathbb{R}^2))\)</span>
是一个可测函数。我们称 <span class="math inline">\(f\)</span> 是 <span class="math inline">\(L^1\)</span> 可积的，当且仅当 <span class="math inline">\(f\)</span> 的实部和虚部都是 <span class="math inline">\(L^1\)</span> 可积的。</p>
</div>
<div id="-------------dynkin----------------" class="statement sta______dynkin______ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">复版本的 Dynkin 函数系引理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mathbb{H}\in\mathbb{B}(\Omega)\)</span> 是一个由
<span class="math inline">\(\mathbb{C}\)</span>- 值有界可测函数组成的
<span class="math inline">\(\mathbb{C}\)</span>- 向量空间，满足：</p>
<ul>
<li>包含 1</li>
<li>在有界收敛下封闭</li>
<li>对复共轭封闭</li>
</ul>
<p>又设 <span class="math inline">\(\mathbb{M}\subset\mathbb{H}\)</span>
是一个乘法系，则 <span class="math inline">\(\mathbb{H}\)</span>
包含所有关于 <span class="math inline">\(\sigma(\mathbb{M})\)</span>
可测的有界函数。即</p>
<p><span class="math display">\[\mathbb{B}(\Omega,\sigma(\mathbb{M}))\subset\mathbb{H}.\]</span></p>
</div>
<p>证明：</p>
<p><strong>把生成集从乘法系扩到代数：</strong>令 <span class="math inline">\(\mathcal{A}\)</span> 为由 <span class="math inline">\(\mathbb{M}\)</span>
生成的（复）<strong>代数</strong>。由于 <span class="math inline">\(\mathbb{M}\)</span> 乘法封闭，<span class="math inline">\(\mathcal{A}\subset\mathbb{H}\)</span>。显然 <span class="math inline">\(\sigma(\mathcal{A})=\sigma(\mathbb{M})\)</span>。</p>
<p>记 <span class="math display">\[\mathcal{L}:=\{f\in\mathbb{B}(\Omega,\sigma(\mathcal{A})):\
f\in\mathbb{H}\}.\]</span> 则 <span class="math inline">\(\mathcal{L}\)</span> 是一个复向量空间，且：</p>
<ul>
<li><span class="math inline">\(1\in\mathcal{L}\)</span>（因 <span class="math inline">\(1\in\mathcal{A}\subset\mathbb{H}\)</span> 且 <span class="math inline">\(\sigma(\mathcal{A})\)</span>-可测）；</li>
<li><strong>有界收敛封闭：</strong>若 <span class="math inline">\(|f_n|\le C,\ f_n\to f\)</span> 点态，且 <span class="math inline">\(f_n\in\mathcal{L}\)</span>，则 <span class="math inline">\(f\)</span> 仍 <span class="math inline">\(\sigma(\mathcal{A})\)</span>-可测且 <span class="math inline">\(f\in\mathbb{H}\)</span>，故 <span class="math inline">\(f\in\mathcal{L}\)</span>；</li>
<li><strong>复共轭封闭：</strong>若 <span class="math inline">\(f\in\mathcal{L}\)</span>，则 <span class="math inline">\(\overline f\in\mathbb{H}\)</span>，且仍 <span class="math inline">\(\sigma(\mathcal{A})\)</span>-可测，因此 <span class="math inline">\(\overline f\in\mathcal{L}\)</span>。并且 <span class="math inline">\(\mathcal{A}\subset\mathcal{L}\)</span>。</li>
</ul>
<p>应用<strong>函数版单调类定理（实值）</strong>：</p>
<p><span class="math display">\[\mathcal{C}_{\mathbb
R}:=\{\mathrm{Re}\,a,\ \Im a:\ a\in\mathcal{A}\}\
\text{生成的实值代数}.\]</span> 上一段的说明保证 <span class="math inline">\(\mathcal{C}_{\mathbb R}\subset
\mathcal{L}\)</span>（这里用到了<strong>共轭封闭</strong>来把 <span class="math inline">\(\mathrm{Re}\,a,\Im a\)</span> 放进 <span class="math inline">\(\mathbb{H}\)</span>，从而放进 <span class="math inline">\(\mathcal{L}\)</span>）。
于是得到：所有<strong>有界实值</strong>、<span class="math inline">\(\sigma(\mathcal{A})\)</span>-可测的函数都在 <span class="math inline">\(\mathcal{L}\subset\mathbb{H}\)</span>。</p>
<p>任取有界复值 <span class="math inline">\(\sigma(\mathcal{A})\)</span>-可测 <span class="math inline">\(f\)</span>。写 <span class="math inline">\(f=u+iv\)</span>（(u,v) 。由第 2 步 <span class="math inline">\(u,v\in\mathcal{L}\subset\mathbb{H}\)</span>。因
<span class="math inline">\(\mathbb{H}\)</span> 为复向量空间，<span class="math inline">\(f=u+iv\in\mathbb{H}\)</span>。 结合 <span class="math inline">\(\sigma(\mathcal{A})=\sigma(\mathbb{M})\)</span>，即得
<span class="math inline">\(\mathbb{B}(\Omega,\sigma(\mathbb{M}))\subset\mathbb{H}\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="characteristic-function">✅ 24.2 Characteristic Function</h1>
<p>本讲介绍了随机变量的特征函数及其基本性质。整体内容比较基础。</p>
<h1 id="the-riemann-lebesgue-lemma">✅ 25.1 The Riemann-Lebesgue
lemma</h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
46.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(f\in L^1(\mathbb{R}^n)\)</span>，则其特征函数
<span class="math display">\[\varphi(t) = \int_{\mathbb{R}^n}e^{it\cdot
x}f(x)\,\,\mathrm{d}x.\]</span> 满足 <span class="math display">\[\lim_{t\to\infty}\varphi(t) = 0.\]</span></p>
</div>
<p><strong>证明</strong>：首先，我们假设 <span class="math inline">\(f\)</span>
无穷次可微，并且具有紧支集。由分部积分，我们得到</p>
<p><span class="math display">\[it_j\varphi(t) =
\int_{\mathbb{R}^n}\underbrace{it_je^{it\cdot x}}_{\frac{\partial
x}{\partial x_j}e^{it\cdot
x}}f(x)\,\,\mathrm{d}x=-\int_{\mathbb{R}^n}e^{it\cdot x}\frac{\partial
x}{\partial x_j}f(x)\,\,\mathrm{d}x.\]</span> 两边取绝对值，我们有 <span class="math display">\[|t_j\varphi(t)|\leq
\int_{\mathbb{R}^n}\left|\frac{\partial x}{\partial
x_j}f(x)\right|\,\,\mathrm{d}x=M_j&lt;\infty.\]</span> 于是 <span class="math display">\[|t|\cdot |\varphi(t)|\leq
\sqrt{M_1^2+\cdots+M_n^2} &lt; \infty.\]</span> 所以在 <span class="math inline">\(f\)</span> 光滑且紧支集的情形，我们得到 <span class="math inline">\(\varphi(t)=O(|t|^{-1})\)</span>。</p>
<p>对一般的 <span class="math inline">\(L^1\)</span> 型 <span class="math inline">\(f\)</span>，我们用一个具有紧支集的光滑函数来逼近
<span class="math inline">\(f\)</span>。首先 <span class="math display">\[f\mathbb{1}_{\overline{B}_R}\to f \text{ in }L^1
\text{ as }R\to\infty.\]</span> 所以我们可以假设 <span class="math inline">\(\mathrm{supp}(f)\subset\overline{B}_R\)</span>。
令 <span class="math display">\[\mathbb{H}=
\{h\in\mathbb{B}(\overline{B}_R)\mid \exists\
{g_n}\xrightarrow{L^1}h\text{ with }g_n\in
C^\infty(\overline{B}_R)\}.\]</span> 则</p>
<ul>
<li><span class="math inline">\(1\in\mathbb{H}\)</span>；因为我们可以取类似“钟形”的光滑函数
<span class="math inline">\(g_n\in C^\infty(\overline{B}_R)\)</span>
使得 <span class="math inline">\(g_n\)</span> 在缩小一点的闭球 <span class="math inline">\(\overline{B}_{R-1/n}\)</span> 上恒为 1。</li>
<li><span class="math inline">\(\mathbb{H}\)</span>
在有界收敛下封闭；因为如果 <span class="math inline">\(h_n\to
h\)</span>，则根据控制收敛定理，<span class="math inline">\(|h_n-h|_1\to
0\)</span>。由于 <span class="math inline">\(h_n\in\mathbb{H}\)</span>，设 <span class="math inline">\(g_n\in C^\infty(\overline{B}_R)\)</span> 满足
<span class="math inline">\(|h_n-g_n|_1&lt;1/n\)</span>，则
由三角不等式有 <span class="math display">\[|h-g_n|\leq 1/n +
||h_n-g_n|_1\to 0.\]</span> 记 <span class="math inline">\(\mathbb{M}=C^\infty_c(\mathbb{R}^n)\)</span>
是全体具有紧支集的光滑函数组成的集合，则 <span class="math inline">\(\mathbb{M}\)</span> 是乘法系，且 <span class="math inline">\(\mathbb{M}\subset \mathbb{H}\)</span>。于是 <span class="math inline">\(\mathbb{B}(\overline{B}_R,\sigma(\mathbb{M}))\subset\mathbb{H}\)</span>。但是
<span class="math inline">\(\sigma(\mathbb{M})=\mathcal{B}(\mathbb{R}^n)\)</span>，所以所有在
<span class="math inline">\(\overline{B}_R\)</span> 上有界，且 Borel
可测的函数都在 <span class="math inline">\(\mathbb{H}\)</span> 中。</li>
</ul>
<p>最后，取 <span class="math inline">\(g\in
C^\infty_c(\mathbb{R}^n)\)</span> 满足 <span class="math inline">\(|f-g|_1&lt;\epsilon\)</span>。则 <span class="math display">\[|\varphi(t) - \hat{g}(t)|\leq |f-g|_1 &lt;
\epsilon.\]</span> 而我们已经证明了 <span class="math inline">\(|\hat{g}|=O(1/t)\)</span>，所以我们可以取 <span class="math inline">\(R&gt;0\)</span> 使得 <span class="math inline">\(|t|&gt;R\)</span> 时有 <span class="math inline">\(|\hat{g}|&lt;\epsilon\)</span>。从而 <span class="math inline">\(|t|&gt;R\)</span> 时有 <span class="math display">\[|\varphi(t)| &lt; |\hat{g}(t)|+\epsilon &lt;
2\epsilon.\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>证明中，我们不加证明使用了两个结论：</p>
<ol type="1">
<li>光滑函数 <span class="math inline">\(g_n\)</span> 的存在性；</li>
<li><span class="math inline">\(\sigma(\mathbb{M})=\mathcal{B}(\mathbb{R}^n)\)</span>。</li>
</ol>
<p>这两点原因如下：任意 <span class="math inline">\(\mathbb{R}^n\)</span>
中的开球都能写成某个紧支撑光滑函数的开阈值原像。给定中心 <span class="math inline">\(a\in\mathbb{R}^n\)</span> 和半径 <span class="math inline">\(r&gt;0\)</span>，定义标准“钟形”函数 <span class="math display">\[\phi_{a,r}(x)=\begin{cases}
\exp\Bigl(-\dfrac{1}{1-\frac{|x-a|^2}{r^2}}\Bigr), &amp; |x-a|&lt;r,\\
0,&amp; |x-a|\ge r.
\end{cases}\]</span> 则 <span class="math inline">\(\phi_{a,r}\in
C_c^\infty(\mathbb{R}^n)\)</span>，并且 <span class="math display">\[\phi_{a,r}^{-1}((0,+\infty))=\{x\in\mathbb{R}^n\mid\phi_{a,r}(x)&gt;0\}=B(a,r)\]</span>。因此每个开球
<span class="math inline">\(B(a,r)\)</span> 都属于 <span class="math inline">\(\sigma(\mathbb{M})\)</span>。</p>
</div>
<h1 id="fourier-inversion">✅ 25.2 Fourier inversion</h1>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
47.1</span>.</span><span class="statement-spah"> </span>对 <span class="math inline">\(\xi\geq0\)</span>，定义函数 <span class="math display">\[S(\xi) =
\int_{-r}^r\frac{\sin\xi}{\xi}\,\mathrm{d}\xi.\]</span> 则 <span class="math inline">\(S(\xi)\)</span> 是 <span class="math inline">\([0,+\infty)\)</span> 上的连续函数，并且 <span class="math display">\[\lim_{\xi\to\infty}S(\xi) = \pi.\]</span></p>
</div>
<p><strong>证明</strong>：由于被积函数 <span class="math inline">\(\frac{\sin\xi}{\xi}\)</span> 在 <span class="math inline">\(\mathbb{R}\)</span>
上连续。由微积分基本定理，连续函数的变上限积分是连续的，故 <span class="math inline">\(S\)</span> 在 <span class="math inline">\([0,\infty)\)</span> 上连续。</p>
<p>对 <span class="math inline">\(a&gt;0\)</span> 定义 <span class="math display">\[F(a)=\int_0^\infty e^{-ax}\frac{\sin
x}{x}\,\mathrm{d}x.\]</span></p>
<p>可以在积分号下求导，得到 <span class="math display">\[F'(a)=-\int_0^\infty e^{-ax}\sin
x\,\mathrm{d}x=-\frac{1}{1+a^2}.\]</span> 故 <span class="math display">\[F(a)=C-\arctan a.\]</span> 当 <span class="math inline">\(a\to+\infty\)</span> 时，<span class="math inline">\(e^{-ax}\)</span> 强衰减，<span class="math inline">\(F(a)\to 0\)</span>，而 <span class="math inline">\(\arctan a\to \frac{\pi}{2}\)</span>，故 <span class="math inline">\(C=\frac{\pi}{2}\)</span>。于是 <span class="math display">\[F(a)=\frac{\pi}{2}-\arctan
a=\arctan\frac{1}{a}.\]</span> 令 <span class="math inline">\(a\downarrow 0\)</span> 即得结论。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
47.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu\)</span> 是 <span class="math inline">\((\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
上的概率测度，则对任何 <span class="math inline">\(a&lt;b\in\mathbb{R}\)</span> 有 <span class="math display">\[\mu((a,b)) + \frac{1}{2}\mu(\{a,b\}) =
\lim_{R\to\infty}\frac{1}{2\pi}\int_{-R}^R\frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi}\hat{\mu}(\xi)\,\mathrm{d}\xi.\]</span></p>
</div>
<p><strong>证明</strong>： <span class="math display">\[\begin{aligned}
I(R) &amp;=
\frac{1}{2\pi}\int_{-R}^R\frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi}\hat{\mu}(\xi)\,\mathrm{d}\xi\\
&amp;=\frac{1}{2\pi}\int_{-R}^R \frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi}
\,\mathrm{d}\xi\int_\mathbb{R}e^{i\xi x}\mu(\mathrm{d}x) \\
&amp;=\frac{1}{2\pi}\int_\mathbb{R}e^{i\xi x} \mu(\mathrm{d}x)
\int_{-R}^R \frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi} \,\mathrm{d}\xi\\
&amp;=\frac{1}{2\pi}\int_\mathbb{R}\mu(\mathrm{d}x) \int_{-R}^R
\frac{e^{i\xi(x-a)}-e^{i\xi(x-b)}}{i\xi} \,\mathrm{d}\xi\\
&amp;=\frac{1}{2\pi}\int_\mathbb{R}\mu(\mathrm{d}x) \int_{-R}^R
\frac{\sin\xi(x-a)-\sin\xi(x-b)}{\xi} \,\mathrm{d}\xi.
\end{aligned}\]</span> 这里我们可以使用 Fubini 定理交换关于 <span class="math inline">\(\xi\)</span> 和 <span class="math inline">\(x\)</span> 的积分顺序是因为 <span class="math display">\[F(x,\xi)=e^{i\xi
x}\frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi}\mathbb{1}_{[-R,R]}(\xi).\]</span>
满足 <span class="math display">\[|F(x,\xi)|\le
|a-b|\mathbb{1}_{[-R,R]}(\xi).\]</span> 从而 <span class="math display">\[\int_{\mathbb{R}}\int_{\mathbb{R}}|F(x,\xi)|\,\mathrm{d}\mu\,\mathrm{d}\xi\leq
\int_{\mathbb{R}}\int_{\mathbb{R}}
|a-b|\mathbb{1}_{[-R,R]}(\xi)\,\mathrm{d}\mu\,\mathrm{d}\xi
=|a-b|\cdot \mu(\mathbb{R})\cdot (2R)&lt;\infty.\]</span></p>
<p>然后注意到 <span class="math display">\[\begin{aligned}
\int_{-R}^R\frac{\sin\xi(x-a)}{\xi}\,\mathrm{d}\xi&amp;=\int_{-R(x-a)}^{R(x-a)}\frac{\sin\eta}{\eta}\,\mathrm{d}\eta=\begin{cases}
S(R(x-a)), &amp; x-a &gt; 0,\\
-S(R(a-x)), &amp; x - a &lt; 0.
\end{cases} \\
&amp;= \mathrm{sgn}(x-a)S(R|x-a|).
\end{aligned}\]</span> 所以 <span class="math display">\[I(R)=\frac{1}{2\pi}\int_\mathbb{R}\big[\mathrm{sgn}(x-a)S(R|x-a|)
-\mathrm{sgn}(x-b)S(R|x-b|)\big]\mu(\mathrm{d}x).\]</span>
现在，被积函数是有界的（不超过 <span class="math inline">\(S(r)\)</span>
在 <span class="math inline">\([0,+\infty)\)</span> 上的上界 x
2），所以可以用控制收敛定理得到 <span class="math display">\[\lim_{R\to\infty}I(R)=
\frac{1}{2}\int_\mathbb{R}[\mathrm{sgn}(x-a)-\mathrm{sgn}(x-b)]\mu(\mathrm{d}x).\]</span>
注意到现在的被积函数满足 <span class="math display">\[\mathrm{sgn}(x-a)-\mathrm{sgn}(x-b)=\begin{cases}
0, &amp; x &gt; b \text{ or } x &lt; a,\\
1, &amp; x = a \text{ or } x = b,\\
2, &amp; a &lt; x &lt; b.
\end{cases}.\]</span> 所以 <span class="math display">\[\lim_{R\to\infty}I(R) = \frac{1}{2}\mu(\{a,b\}) +
\mu((a,b)).\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
47.3</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu\)</span> 是 <span class="math inline">\((\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
上的概率测度，<span class="math inline">\(\hat{\mu}\)</span> 是关于
Legesgue <span class="math inline">\(L^1\)</span> 的，则其有密度函数
<span class="math inline">\(\rho\)</span>，满足 <span class="math display">\[\rho(x)=\frac{1}{2\pi}\int_\mathbb{R}e^{-itx}\hat{\mu}(t)\,\mathrm{d}t.\]</span></p>
</div>
<p><strong>证明</strong>：令 <span class="math inline">\(\rho\)</span>
如上定义，则 <span class="math display">\[\begin{aligned}
\int_a^b\rho(x)\,\mathrm{d}x&amp;=
\frac{1}{2\pi}\int_a^b\,\mathrm{d}x\int_\mathbb{R}\hat{\mu}(\xi)e^{-i\xi
x}\,\mathrm{d}\xi\\
&amp;=\frac{1}{2\pi}\int_\mathbb{R}\hat{\mu}(\xi)\,\mathrm{d}\xi\int_a^b
e^{-i\xi x}\,\mathrm{d}x\\
&amp;=\frac{1}{2\pi}\int_\mathbb{R}\hat{\mu}(\xi)\frac{e^{-ia\xi}-e^{-ib\xi}}{i\xi}\,\mathrm{d}\xi\\
&amp;=\lim_{R\to\infty} I(R)\\
&amp;=\mu((a,b)) + \frac{\mu(\{a,b\})}{2}.
\end{aligned}\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<h1 id="the-continuity-theorem">✅ 25.3 The Continuity Theorem</h1>
<p>本讲介绍了测度弱收敛的连续性定理。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
48.1</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{\mu_n\}_{n=1}^\infty\)</span> 是一列 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的概率测度。假设极限 <span class="math inline">\(\varphi(t) =
\lim\limits_{n\to\infty}\hat{\mu_n}\)</span> 存在，并且 <span class="math inline">\(\varphi(t)\)</span> 在 <span class="math inline">\(t=0\)</span> 处连续，则存在概率测度 <span class="math inline">\(\mu\)</span> 使得 <span class="math inline">\(\hat{\mu}=\varphi\)</span>，并且 <span class="math inline">\(\mu_n\rightarrow_{w}\mu\)</span>。</p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
48.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\mu,\nu\)</span> 是 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的两个概率测度，<span class="math inline">\(K&gt;0\)</span>
是任意正实数，则 <span class="math display">\[\int_{\mathbb{R}^d}\hat{\mu}(Kx)\nu(\mathrm{d}x)=\int_{\mathbb{R}^d}\hat{\nu}(Ky)\mu(\mathrm{d}y).\]</span></p>
</div>
<p><strong>证明</strong>：要证明的是 <span class="math display">\[\int_{\mathbb{R}^d}\nu(\mathrm{d}x)\int_{\mathbb{R}^d}e^{iKx\cdot
\xi}\mu(\mathrm{d}\xi)=\int_{\mathbb{R}^d}\mu(\mathrm{d}y)\int_{\mathbb{R}^d}e^{iKy\cdot
\xi}\nu(\mathrm{d}\xi).\]</span> 直接 Fubini 即可。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
48.3</span>.</span><span class="statement-spah"> </span><span class="math display">\[\int_{\mathbb{R}^d}[1-\mathrm{Re}\,\hat{\mu}(Kx)]\nu(\mathrm{d}x)=\int_{\mathbb{R}^d}[1-\mathrm{Re}\,\hat{\nu}(Ky)]\mu(\mathrm{d}x).\]</span></p>
</div>
<p><strong>证明</strong>：在前一个引理中两边取实部，然后被 1
减去即可。</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
48.4</span>.</span><span class="statement-spah"> </span>假设 <span class="math inline">\(\rho\)</span> 是一个 <span class="math inline">\(\mathbb{R}^d\)</span>
上的概率密度，其支集位于闭的单位球 <span class="math inline">\(\bar{B}_1\)</span> 内。设 <span class="math inline">\(M&gt;0\)</span> 使得 <span class="math inline">\(|\hat{\rho}(t)|\leq1/2\)</span> 对任何 <span class="math inline">\(|t|\geq M\)</span> 成立，则对任何 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的概率测度 <span class="math inline">\(\mu\)</span> 和正数 <span class="math inline">\(\alpha&gt;0\)</span> 有 <span class="math display">\[\mu\{x\in\mathbb{R}^d:\ |x|\geq\alpha\}\leq
2\int_{\bar{B}_1}\left[1-\mathrm{Re}\,\hat{\mu}\left(\frac{M}{\alpha}x\right)\right]\rho(x)\,\mathrm{d}x.\]</span></p>
</div>
<p><strong>证明</strong>：设 <span class="math display">\[\hat{\mu}(t)=\int_{\mathbb{R}^d}e^{it\cdot
x}\mu(\mathrm{d}x),\quad \hat{\rho}(t)=\int_{\mathbb{R}^d}e^{it\cdot
x}\rho(x)\,\mathrm{d}x.\]</span> 令 <span class="math inline">\(K=\frac{M}{\alpha}\)</span>，由于 <span class="math inline">\(\rho\)</span> 的支集包含在 <span class="math inline">\(\bar B_1\)</span> 中，所以 <span class="math display">\[2\int_{\bar
B_1}\bigl[1-\mathrm{Re}\,\hat{\mu}(Kx)\bigr]\rho(x)\,\mathrm{d}x=2\int_{\mathbb{R}^d}\bigl[1-\mathrm{Re}\,\hat{\rho}(Ky)\bigr]\mu(\mathrm{d}y).\]</span>
由假设，当 <span class="math inline">\(|y|\ge\alpha\)</span> 时有 <span class="math inline">\(|K y|=\frac{M}{\alpha} |y|\ge M\)</span>，从而
<span class="math display">\[1-\mathrm{Re}\,\hat{\rho}(K
y)\ge1-|\hat{\rho}(K y)|\ge\frac{1}{2}.\]</span> 故 <span class="math inline">\(|y|\ge\alpha\)</span> 时有 <span class="math display">\[2\bigl(1-\mathrm{Re}\,\hat{\rho}(K y)\bigr)\ge
\mathbb{1}_{\{|y|\ge\alpha\}}(y).\]</span> 这个式子对 <span class="math inline">\(|y|&lt;\alpha\)</span> 也成立，所以同时对 <span class="math inline">\(\mu\)</span> 积分得到 <span class="math display">\[2\int_{\mathbb{R}^d}\bigl[1-\mathrm{Re}\,\hat{\rho}(K
y)\bigr]\mu(\mathrm{d}y)\ge\int_{\mathbb{R}^d}\mathbb{1}_{\{|y|\ge\alpha\}}\mu(\mathrm{d}y)=\mu(\{|y|\ge\alpha\}).\]</span>
把左边换回原式即得 <span class="math display">\[\mu(\{|x|\ge\alpha\})\le2\int_{\bar
B_1}\left[1-\mathrm{Re}\,\hat{\mu}\left(\tfrac M\alpha
x\right)\right]\rho(x)\,\mathrm{d}x.\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
48.5</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{\mu_n\}_{n=1}^\infty\)</span> 是 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的概率测度，且 <span class="math inline">\(\varphi(t)=\lim\limits_{n\to\infty}\hat{\mu}_n(t)\)</span>
处处存在，并且 <span class="math inline">\(\varphi\)</span> 在 <span class="math inline">\(t=0\)</span> 处连续。则 <span class="math inline">\(\{\mu_n\}_{n=1}^\infty\)</span> 是 tight 的。</p>
</div>
<p><strong>证明</strong>：记 <span class="math display">\[I_n(\alpha)=2\int_{\bar
B_1}\bigl[1-\mathrm{Re}\,\hat{\mu}_n(\tfrac M\alpha
x)\bigr]\rho(x)\,\mathrm{d}x.\]</span></p>
<p>由于 <span class="math inline">\(|1-\mathrm{Re}\,\hat{\mu}_n|\le
2\)</span> 且 <span class="math inline">\(\rho\)</span>
为概率密度，故由控制收敛定理 <span class="math display">\[\lim_{n\to\infty}I_n(\alpha)=I(\alpha)=2\int_{\bar
B_1}\bigl[1-\mathrm{Re}\,\varphi(\tfrac M\alpha
x)\bigr]\rho(x)\,\mathrm{d}x.\]</span></p>
<p>由于 <span class="math inline">\(\varphi\)</span> 在 <span class="math inline">\(0\)</span> 处连续且对每个 <span class="math inline">\(x\)</span> 有 <span class="math inline">\(\tfrac
M\alpha x\to 0\)</span>，仍由控制收敛定理得 <span class="math display">\[I(\alpha)\xrightarrow{\alpha\to\infty}0.\]</span></p>
<p>给定 <span class="math inline">\(\epsilon&gt;0\)</span>。取 <span class="math inline">\(\alpha_1\)</span> 使得 <span class="math inline">\(I(\alpha_1)\le\epsilon/2\)</span>。再取 <span class="math inline">\(N\)</span> 使得对所有 <span class="math inline">\(n\ge N\)</span> 有 <span class="math display">\[I_n(\alpha_1)\le I(\alpha_1)+\epsilon/2\le
\epsilon.\]</span></p>
<p>从而 <span class="math inline">\(\mu_n(\{|x|\ge \alpha_1\})\le
I_n(\alpha_1)\le\epsilon\)</span> 对所有 <span class="math inline">\(n\ge N\)</span> 成立。</p>
<p>对那些 <span class="math inline">\(n&lt;N\)</span>，由于 <span class="math inline">\(\hat{\mu}_n\)</span> 作为特征函数在 0
处连续，<span class="math inline">\(\alpha\to\infty\)</span> 时 <span class="math inline">\(I_n(\alpha)\to 0\)</span>，因此可取 <span class="math inline">\(\alpha_0\)</span> 使 <span class="math display">\[\max_{1\le n&lt;N}\mu_n(\{|x|\ge \alpha_0\})\le
\max_{1\le n&lt;N} I_n(\alpha_0)\le\epsilon.\]</span></p>
<p>令 <span class="math inline">\(R=\max\{\alpha_0,\alpha_1\}\)</span>。则</p>
<ul>
<li>若 <span class="math inline">\(n\ge N\)</span>，则 <span class="math inline">\(\mu_n(\{|x|\ge R\})\le \mu_n(\{|x|\ge
\alpha_1\})\le\epsilon\)</span>；</li>
<li>若 <span class="math inline">\(n&lt; N\)</span>，同理 <span class="math inline">\(\mu_n(\{|x|\ge R\})\le \mu_n(\{|x|\ge
\alpha_0\})\le\epsilon\)</span>。</li>
</ul>
<p>于是 <span class="math display">\[\sup_{n\ge1}\mu_n(\{|x|\ge
R\})\le\epsilon.\]</span> 这正是 tightness 的定义。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
48.6</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{\mu_n\}_{n=1}^\infty\)</span> 是 <span class="math inline">\((\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))\)</span>
上的概率测度，且 <span class="math inline">\(\varphi(t)=\lim\limits_{n\to\infty}\hat{\mu}_n(t)\)</span>
处处存在，并且 <span class="math inline">\(\varphi\)</span> 在 <span class="math inline">\(t=0\)</span> 处连续。则存在概率测度 <span class="math inline">\(\mu\)</span> 使得 <span class="math inline">\(\varphi=\hat{\mu}\)</span> 并且 <span class="math inline">\(\mu_n\to_w \mu\)</span>。</p>
</div>
<p><strong>证明</strong>：由于 <span class="math inline">\(\{\mu_n\}\)</span> 是 tight 的，根据
Prokhorov，存在子序列 <span class="math inline">\(\{\mu_{n_k}\}\)</span>
弱收敛到某个概率测度 <span class="math inline">\(\mu_{n_k}\to_w\mu\)</span>。于是 <span class="math display">\[\varphi=\lim_{k\to\infty}\hat\mu_{n_k}
=\hat{\mu}.\]</span> 从而对整个序列也有 <span class="math display">\[\varphi=\lim_{n\to\infty}\hat\mu_{n}
=\hat{\mu}.\]</span> 这样我们就证明了 <span class="math inline">\(\varphi=\hat\mu\)</span> 是概率测度 <span class="math inline">\(\mu\)</span> 的 Fourier 变换。</p>
<p>我们断言整个 <span class="math inline">\(\{\mu_n\}\)</span>
都弱收敛到 <span class="math inline">\(\mu\)</span>。若不然，存在有界连续函数 <span class="math inline">\(g\)</span> 使得 <span class="math display">\[\int_{\mathbb{R}^d} g \,\mathrm{d}\mu_n
\nrightarrow \int_{\mathbb{R}^d} g \,\mathrm{d}\mu.\]</span> 于是对任何
<span class="math inline">\(\epsilon&gt;0\)</span>，存在子序列 <span class="math inline">\(\{\mu_{n_k'}\}\)</span> 使得 <span class="math display">\[\left|\int_{\mathbb{R}^d} g \,\mathrm{d}\mu_n -
\int_{\mathbb{R}^d} g \,\mathrm{d}\mu\right|\ge\epsilon,\quad \forall
k.\]</span> 但是 <span class="math inline">\(\{\mu_{n_k'}\}\)</span>
也是 tight 的，所以再用一次 Prokhorov 定理，存在二级子序列 <span class="math inline">\(\{\mu_{n_k''}\}\subset\{\mu_{n_k'}\}\)</span>
使得 <span class="math inline">\(\mu_{n_k''}\to_w\nu\)</span>。于是 <span class="math inline">\(\hat\mu_{n_k''}\to
\hat\nu\)</span>。我们上面已经证明了 <span class="math inline">\(\hat\mu_{n_k''}\to\hat\mu\)</span>，从而
<span class="math inline">\(\hat\mu=\hat\nu\)</span>，由 Fourier
inversion 有 <span class="math inline">\(\mu=\nu\)</span>。即 <span class="math inline">\(\mu_{n_k''}\to_w\mu\)</span>。矛盾。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="central-limit-theorem">✅ 26.1 Central Limit Theorem</h1>
<div id="basic-central-limit-theorem" class="statement sta_basic_central_limit_theorem plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Basic
Central Limit Theorem</span>.</span><span class="statement-spah">
</span>设 <span class="math inline">\(\{X_n\}_{n=1}^\infty\)</span> 是
i.i.d 的 <span class="math inline">\(L^2\)</span>
随机变量，具有共同的期望 <span class="math inline">\(\mathbb{E}[X_n]=a\)</span> 和 <span class="math inline">\(\mathrm{Var}[X_n]=\sigma^2\)</span>。则 <span class="math display">\[\frac{S_n-na}{\sigma\sqrt{n}}\to_w
\mathcal{N}(0,1).\]</span></p>
</div>
<p><strong>证明</strong>：记 <span class="math inline">\(Z_n =
\frac{S_n-na}{\sigma\sqrt{n}}\)</span>。我们只要证明特征函数的收敛 <span class="math display">\[\varphi_{Z_n}(t) \to e^{-t^2/2},\quad \forall
t\in\mathbb{R}.\]</span> 那么根据 Levy 连续性定理：</p>
<ul>
<li>若一列特征函数 <span class="math inline">\(\varphi_{Z_n}\)</span>
对每个 <span class="math inline">\(t\)</span> 都有极限 <span class="math inline">\(\varphi(t)\)</span>，且 <span class="math inline">\(\varphi\)</span> 在 <span class="math inline">\(t=0\)</span> 处连续，那么</li>
<li><span class="math inline">\(\varphi\)</span>
本身就是某个概率分布的特征函数；</li>
<li><span class="math inline">\(Z_n\)</span>
的分布按弱收敛收敛到这个分布。</li>
</ul>
<p>就得到 <span class="math inline">\(Z_n\to_w
\mathcal{N}(0,1)\)</span>，因为 <span class="math inline">\(e^{-t^2/2}\)</span> 显然在 0
处连续，且它就是标准正态的特征函数。</p>
<p>记 <span class="math inline">\(Y_1=X_1-a\)</span>，则 <span class="math inline">\(\mathbb{E}Y_1=0\)</span> 且 <span class="math inline">\(\mathbb{E}Y_1^2 =
\sigma^2&lt;\infty\)</span>，所以 <span class="math inline">\(Y_1\)</span> 的特征函数 <span class="math inline">\(\varphi(t)\)</span> 是 <span class="math inline">\(C^2\)</span> 的。根据 Taylor 展开， <span class="math display">\[\varphi(t) = \varphi(0)+\varphi'(0)t +
\frac{1}{2}\varphi''(r(t))t^2,\quad 0&lt;r(t)&lt;t.\]</span>
注意到 <span class="math display">\[\varphi'(0) = \mathbb{E}[iY_1
e^{itY_1}]\Big|_{t=0}=i\mathbb{E}Y_1 = 0.\]</span> 所以 <span class="math display">\[\varphi(t) =
\varphi(0)+\frac{1}{2}\varphi''(r(t))t^2,\quad
0&lt;r(t)&lt;t.\]</span> 利用 <span class="math display">\[\lim_{t\to
0}\varphi''(r(t))=\varphi''(0)=-\mathbb{E}Y_1^2 =
-\sigma^2.\]</span> 以及熟知的微积分结论 <span class="math display">\[\lim_{n\to\infty}\left(1+ \frac{c_n}{n}\right)^n=
e^c,\quad c_n\to c.\]</span> 可得 <span class="math display">\[\begin{aligned}
\lim_{n\to\infty}\left(\varphi\left(\frac{\xi}{\sigma\sqrt{n}}\right)\right)^n
&amp;=\lim_{n\to\infty}\left(1+\frac{1}{2}\varphi''\left(r\left(\frac{\xi}{\sigma\sqrt{n}}\right)\right)\frac{\xi^2}{\sigma^2
n}\right)^n\\
&amp;=\lim_{n\to\infty}\left(1+ \frac{-\xi^2/2}{n}\right)^n\\
&amp;=e^{-\xi^2/2}.
\end{aligned}\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<div id="cramer-wold-device" class="statement sta_cramer_wold_device plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Cramer-Wold Device</span>.</span><span class="statement-spah"> </span> 设 <span class="math inline">\(\{X_n\}\)</span> 和 <span class="math inline">\(X\)</span> 都是 <span class="math inline">\(\mathbb{R}^d\)</span> 中的随机向量。则 <span class="math inline">\(X_n\to_w X\)</span> 当且仅当对任何 <span class="math inline">\(\xi\in\mathbb{R}^d\)</span> 有 <span class="math inline">\(\xi\cdot X_n\to_w \xi\cdot X\)</span>。</p>
</div>
<p><strong>证明</strong>：如果对 <span class="math inline">\(\xi\in\mathbb{R}^d\)</span> 有 <span class="math inline">\(\xi\cdot X_n\to_w \xi\cdot X\)</span>，则 <span class="math display">\[\exp(i\xi\cdot X_n)\to_w \exp(i\xi \cdot
X).\]</span> 所以 <span class="math display">\[\mathbb{E}f(\exp(i\xi\cdot X_n))\to
\mathbb{E}f(\exp(i\xi \cdot X)).\quad \forall f\in
C_b(\mathbb{C}).\]</span> 取 <span class="math inline">\(f(z)\)</span>
满足 <span class="math inline">\(f(z)=z\,(|z|\leq 1)\)</span> 和 <span class="math inline">\(f(z)=1\,(|z|&gt;1)\)</span>，则 <span class="math display">\[\varphi_{X_n}(\xi) \to \varphi_X(\xi).\]</span>
由连续性定理可得 <span class="math inline">\(X_n\to_w X\)</span>。</p>
<p>反过来，若 <span class="math inline">\(X_n\to_w
X\)</span>，则对任何实数 <span class="math inline">\(u\)</span>， <span class="math display">\[\varphi_{\xi\cdot
X_n}(u)=\mathbb{E}[e^{iu\xi\cdot X_n}]\to \mathbb{E}[e^{iu\xi\cdot
X}]=\varphi_{\xi\cdot X}(u).\]</span> 由连续性定理，<span class="math inline">\(\xi\cdot X_n\to_w \xi\cdot X\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>这个结论的证明可以直接用 <strong>Portmanteau 定理</strong>：若
<span class="math inline">\(X_n\to_w
X\)</span>，则对任意<strong>有界连续</strong>函数 <span class="math inline">\(h:\mathbb{R}^d\to\mathbb{R}\)</span>，有 <span class="math inline">\(\mathbb{E}[h(X_n)]\to
\mathbb{E}[h(X)]\)</span>。</p>
</div>
<div id="multivariate-clt" class="statement sta_multivariate_clt plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Multivariate CLT</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(X_1,X_2,\dots\)</span> 是 <span class="math inline">\(\mathbb{R}^d\)</span> 上的 i.i.d. 随机向量，<span class="math inline">\(\mu=\mathbb{E}X_1\in\mathbb
R^d\)</span>，协方差矩阵 <span class="math inline">\(\Sigma=\mathrm{Cov}(X_1)\)</span>（允许奇异）。令
<span class="math display">\[S_n=\sum_{k=1}^n X_k,\qquad
Z_n=\frac{S_n-n\mu}{\sqrt n}.\]</span> 则 <span class="math display">\[Z_n \ \to_w \ N_d(0,\Sigma).\]</span></p>
</div>
<p><strong>取任意方向做投影，化为一维问题。</strong></p>
<p>对任意 <span class="math inline">\(\xi\in\mathbb{R}^d\)</span>，令
<span class="math inline">\(Y_{k,\xi}=\xi^\top (X_k-\mu)\)</span>。则
<span class="math inline">\(Y_{1,\xi},Y_{2,\xi},\dots\)</span> 是一维
i.i.d.，且 <span class="math display">\[\mathbb{E}Y_{k,\xi}=0,\quad
\mathrm{Var}(Y_{k,\xi})=\xi^\top\Sigma\xi.\]</span> 并且 <span class="math display">\[\xi^\top Z_n=\frac1{\sqrt n}\sum_{k=1}^n
Y_{k,\xi}.\]</span></p>
<p><strong>对每个 <span class="math inline">\(\xi\)</span>
应用一维中心极限定理。</strong></p>
<p>由一维 CLT（Lindeberg–Lévy）得 <span class="math display">\[\xi^\top
Z_n \ \to_w\ \mathcal{N}\big(0,\ \xi^\top\Sigma\xi\big),\quad
\forall\xi\in\mathbb{R}^d.\]</span></p>
<p><strong>用 Cramér–Wold 得出向量弱收敛。</strong></p>
<p>既然对所有 <span class="math inline">\(\xi\)</span> 都有 <span class="math inline">\(\xi^\top Z_n \Rightarrow
\mathcal{N}(0,\xi^\top\Sigma\xi)\)</span>，由
<strong>Cramér–Wold</strong>知 <span class="math inline">\(Z_n\to_w
Z\)</span>（某极限向量），并且该极限 <span class="math inline">\(Z\)</span> 的任意线性投影都是正态，且 <span class="math display">\[\mathrm{Var}(\xi^\top Z)=\xi^\top\Sigma\xi,\quad
\forall\xi.\]</span> 这唯一刻画了 <span class="math inline">\(Z\)</span>
的分布为 <span class="math inline">\(\mathcal{N}_d(0,\Sigma)\)</span>。因此 <span class="math display">\[Z_n \Rightarrow
\mathcal{N}_d(0,\Sigma).\]</span></p>
<h1 id="infinitely-divisible-distributions">✅ 26.2 Infinitely Divisible
Distributions</h1>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
50.1</span>.</span><span class="statement-spah"> </span><span class="math inline">\((\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
上的一个概率分布 <span class="math inline">\(\mu\)</span>
称作是无穷可除的，如果对任何正整数 <span class="math inline">\(n\)</span>，都存在 <span class="math inline">\((\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
上的概率分布 <span class="math inline">\(\mu_n\)</span> 使得 <span class="math inline">\(\mu=\mu_n^{\ast n}\)</span>。</p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
50.2</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\mu\)</span>
是无穷可除分布，当且仅当存在随机变量的三角列 <span class="math display">\[\{X_{n,k}\}_{k=1}^{n}\]</span> 满足对每个 <span class="math inline">\(n\)</span>，<span class="math inline">\(\{X_{n,k}\}\)</span> 是 i.i.d 的，并且 <span class="math display">\[S_n = \sum_{k=1}^{n}X_k \to_w
X\overset{d}{=}\mu.\]</span></p>
</div>
<p><strong>证明</strong>：<span class="math inline">\(\Rightarrow\)</span>：由无穷可除的定义，显然。</p>
<p><span class="math inline">\(\Leftarrow\)</span>: 固定任意 <span class="math inline">\(l\in\mathbb N\)</span>。对第 <span class="math inline">\(nl\)</span> 行把和分成 <span class="math inline">\(l\)</span> 个相邻的块： <span class="math display">\[S_{nl}=\sum_{k=1}^{nl}X_{nl,k}=\sum_{i=1}^l
S_n^{(i)},\qquad
S_n^{(i)}:=\sum_{j=n(i-1)+1}^{ni} X_{nl,j}.\]</span>
由于同一行内独立同分布，<span class="math inline">\((S_n^{(1)},\dots,S_n^{(l)})\)</span>
相互独立且同分布。</p>
<p>设 <span class="math inline">\(\mu_{nl}=\mathcal
L(S_{nl})\)</span>。因为 <span class="math inline">\(S_{nl}\Rightarrow
X\)</span>，<span class="math inline">\({\mu_{nl}}\)</span> tight。定义
<span class="math display">\[\epsilon_l(r):=\sup_{n\ge1}\mathbb
P(|S_{nl}|&gt;r)\downarrow 0\quad (r\to\infty).\]</span> 对任意 <span class="math inline">\(r&gt;0\)</span> 与任意 <span class="math inline">\(n\)</span>，由独立性有 <span class="math display">\[\mathbb P(S_n^{(1)}&gt;r,\dots,S_n^{(l)}&gt;r)
=\prod_{i=1}^l\mathbb P(S_n^{(i)}&gt;r)
\le \mathbb{P}(S_{nl}&gt;lr)\le \epsilon_l(lr).\]</span> 故 <span class="math inline">\(\mathbb{P}(S_n^{(1)}&gt;r)\le
\epsilon_l(lr)^{1/l}\)</span>，同理 <span class="math inline">\(\mathbb
P(S_n^{(1)}&lt;-r)\le \epsilon_l(lr)^{1/l}\)</span>，于是 <span class="math display">\[\sup_{n}\mathbb P\big(|S_n^{(1)}|&gt;r\big)\le
2\epsilon_l(lr)^{1/l}\xrightarrow{r\to\infty}0,\]</span> 即 <span class="math inline">\(\{\mathcal L(S_n^{(1)})\}_n\)</span> 紧。由
Prokhorov 定理，存在子列 <span class="math inline">\(n_j\)</span> 使得
<span class="math display">\[S_{n_j}^{(1)}\overset{j\to\infty}{\Rightarrow}
Y_l.\]</span> 由于 <span class="math inline">\(\mathcal
L(S_n^{(i)})=\mathcal L(S_n^{(1)})\)</span>，所以 <span class="math inline">\(S_{n_j}^{(i)}\Rightarrow Y_l\)</span> 亦成立。</p>
<p>对每个 <span class="math inline">\(t\in\mathbb R\)</span>，有 <span class="math display">\[\varphi_{S_{n_j l}}(t)
=\prod_{i=1}^l \varphi_{S_{n_j}^{(i)}}(t)
=\big(\varphi_{S_{n_j}^{(1)}}(t)\big)^{l}.
\]</span> 当 <span class="math inline">\(j\to\infty\)</span> 时，左边因
<span class="math inline">\(S_{n_j l}\Rightarrow X\)</span> 收敛到 <span class="math inline">\(\varphi_X(t)\)</span>；右边因 <span class="math inline">\(S_{n_j}^{(1)}\Rightarrow Y_l\)</span> 收敛到 <span class="math inline">\(\big(\varphi_{Y_l}(t)\big)^l\)</span>。因此 <span class="math display">\[\varphi_X(t)=\big(\varphi_{Y_l}(t)\big)^l,\qquad
\forall t\in\mathbb R.\]</span> 由 Lévy 连续性定理知 <span class="math inline">\(\mu=\mu_{Y_1}{*l}\)</span>。由于 <span class="math inline">\(l\)</span> 任意，<span class="math inline">\(\mu\)</span> 为无穷可除。证毕。 <span class="math inline">\(\blacksquare\)</span></p>
<h1 id="average-uniformity">✅ 27.1 Average Uniformity</h1>
<p>设 <span class="math inline">\(\{X_{n,k}\}_{k=1}^n\)</span>
是一个随机变量三角列，满足 <span class="math display">\[\mathbb{E}[X_{n,k}]=0,\
\mathbb{E}[X_{n,k}^2]=\sigma_{n,k}^2,\
\sum_{k=1}^n\sigma_{n,k}^2=1.\]</span></p>
<ul>
<li><strong>(DV) The decaying variance conditon</strong> <span class="math display">\[\max_{1\leq k\leq
n}\sigma_{n,k}^2\xrightarrow{n\to\infty} 0.\]</span></li>
<li><strong>(UAN) The uniform asymptotic negligiblility
condition</strong> <span class="math display">\[\forall \epsilon &gt;
0,\ \lim_{n\to\infty}\max_{1\leq k\leq
n}\mathbb{P}(|X_{n,k}|&gt;\epsilon)=0.\]</span></li>
</ul>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
51.1</span>.</span><span class="statement-spah"> </span>DV <span class="math inline">\(\Rightarrow\)</span> UAN.</p>
</div>
<p><strong>证明</strong>：由切比雪夫不等式 <span class="math inline">\(\mathbb{P}(|X_{n,k}|&gt;\epsilon) \leq
\frac{\sigma_{n,k}^2}{\epsilon^2}\)</span> 即得。</p>
<p>但是，仅有 DV
条件仍不能保证中心极限定理的成立。我们需要一个更强的条件：</p>
<div id="lindberg-------" class="statement sta_lindberg___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Lindberg 条件</span>.</span><span class="statement-spah"> </span><span class="math display">\[\lim_{n\to\infty}\sum_{k=1}^n
\mathbb{E}[X_{n,k}^2: |X_{n,k}|&gt;\epsilon
]=0,\quad\forall\epsilon&gt;0.\]</span></p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
51.2</span>.</span><span class="statement-spah"> </span>Lindberg <span class="math inline">\(\Rightarrow\)</span> DV.</p>
</div>
<p>证明： <span class="math display">\[\sigma_{n,k}^2=\mathbb{E}[X_{n,k}^2:
|X_{n,k}|\leq\epsilon]+\mathbb{E}[X_{n,k}^2:
|X_{n,k}|&gt;\epsilon]\leq\epsilon^2 + \sum_{j=1}^n\mathbb{E}[X_{n,j}^2:
|X_{n,j}|&gt;\epsilon].\]</span></p>
<p>对 <span class="math inline">\(k\)</span> 取最大值得 <span class="math display">\[\max_{1\le k\le n}\sigma_{n,k}^2\le \epsilon^2 +
\sum_{j=1}^n \mathbb{E}\big[X_{n,j}^2:\ |X_{n,j}|&gt;
\epsilon\big].\]</span> 由 Lindeberg 条件，右端和式随 <span class="math inline">\(n\to\infty\)</span> 收敛到 <span class="math inline">\(0\)</span>，故 <span class="math display">\[\limsup_{n\to\infty}\max_{1\le k\le
n}\sigma_{n,k}^2\le \epsilon^2.\]</span> 由于 <span class="math inline">\(\epsilon&gt;0\)</span> 任意，必有 <span class="math display">\[\max_{1\le k\le n}\sigma_{n,k}^2
\xrightarrow[n\to\infty]{} 0.\]</span> 即 DV 成立。<span class="math inline">\(\blacksquare\)</span></p>
<div id="lindberg-feller-------------------" class="statement sta_lindberg_feller_______ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Lindberg-Feller 中心极限定理</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{X_{n,k}\}\)</span> 满足 Lindberg 条件，则 <span class="math inline">\(S_n\to_w\mathcal{N}(0,1)\)</span>。</p>
<p>反之，如果 <span class="math inline">\(\{X_{n,k}\}\)</span> 满足 DV
条件，且 <span class="math inline">\(S_n\to_w\mathcal{N}(0,1)\)</span>，则 <span class="math inline">\(\{X_{n,k}\}\)</span> 也满足 Lindberg 条件。</p>
</div>
<h1 id="lindberg-feller-clt">✅ 27.2 Lindberg-Feller CLT</h1>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
52.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(a_j,b_j\)</span> 是复数且 <span class="math inline">\(|a_j|, |b_j|\leq1\)</span>，则 <span class="math display">\[|a_1\cdots a_n - b_1\cdots b_n|\leq\sum_{j=1}^n
|a_j-b_j|.\]</span></p>
</div>
<p>证明：用归纳法即可。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
52.2</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(X\)</span> 是 <span class="math inline">\(L^2\)</span> 可积的随机变量，<span class="math inline">\(\varphi\)</span> 是其特征函数，则 <span class="math display">\[\left|\varphi(t) - 1 - it\mathbb{E}X +
\frac{1}{2}\mathbb{E}[X^2]t^2\right|\leq
\mathbb{E}\left[X^2\wedge\frac{|X|^3}{3!}t\right].\]</span></p>
</div>
<p>证明：根据 Taylor 定理， <span class="math display">\[\left|e^{it} -
1 - it\right|\leq \frac{t^2}{2}.\]</span> <span class="math display">\[\left|e^{it} - 1 - it+ \frac{1}{2}t^2\right|\leq
\frac{|it|^3}{3!}.\]</span> 合起来就得到 <span class="math display">\[\left|e^{it} - 1 - it+ \frac{1}{2}t^2\right|\leq
t^2\wedge \frac{|it|^3}{3!}.\]</span> 取 <span class="math inline">\(tX\)</span> 代入并求期望，得到 <span class="math display">\[\left|\mathbb{E}\left[e^{itX} - 1 - itX+
\frac{1}{2}t^2X^2\right]\right|\leq \mathbb{E}\left[t^2X^2\wedge
\frac{|X|^3}{3!}t^3\right].\]</span> 即为所证。<span class="math inline">\(\blacksquare\)</span></p>
<div id="lindberg-feller-clt-part-1" class="statement sta_lindberg_feller_clt_part_1 plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Lindberg-Feller CLT Part 1</span>.</span><span class="statement-spah"> </span>如果三角列 <span class="math inline">\(\{X_{n,k}\}\)</span> 满足 Lindberg 条件，则 <span class="math inline">\(S_n\to_w\mathcal{N}(0,1)\)</span>。</p>
</div>
<div class="statement note definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">注</span>：</span><span class="statement-spah">
</span>注意 Lindberg-Feller CLT 仍然要求 <span class="math inline">\(\{X_{n,k}\}\)</span> 对每个 <span class="math inline">\(n\)</span> 都是 i.i.d 序列。</p>
</div>
<p><strong>证明</strong>：只要证 <span class="math inline">\(\varphi_{S_n}\to e^{-t^2/2}\)</span> 即可。</p>
<p>根据第一个引理，结合 <span class="math inline">\(\sum_{k=1}^n\sigma_{n,k}^2=1\)</span>，我们得到</p>
<p><span class="math display">\[|\varphi_{S_n}(t) - e^{-t^2/2}|\leq
\sum_{k=1}^n\left|\varphi_{X_{n,k}}(t) -
e^{-\sigma_{n,k}^2t^2/2}\right|.\]</span> 注意这个特征函数的分解就用到了
i.i.d 性质。</p>
<p><span class="math display">\[\begin{aligned}
|\varphi_{X_{n,k}}(t) - e^{-\sigma_{n,k}^2t^2/2}| &amp;\le
|\varphi_{X_{n,k}}(t)-(1-\frac{t^2\sigma_{n,k}^2}{2})|+|(1-\frac{t^2\sigma_{n,k}^2}{2})-e^{-\sigma_{n,k}^2t^2/2}|.
\end{aligned}\]</span> 记第一项是 <span class="math inline">\(A_{n,k}\)</span>，第二项是 <span class="math inline">\(B_{n,k}\)</span>，问题转化为证明 <span class="math display">\[\lim_{n\to\infty}\sum_{k=1}^n
(A_{n,k}+B_{n,k})=0.\]</span> 我们任取一个正数 <span class="math inline">\(\epsilon&gt;0\)</span>。注意到 <span class="math inline">\(\mathbb{E}[X_{n,k}]=0\)</span>，所以 <span class="math display">\[\begin{aligned}
A_{n,k}&amp;=|\varphi_{X_{n,k}}(t)-(1-\frac{t^2\sigma_{n,k}^2}{2})|\leq
t^2\left(\mathbb{E}X_{n,k}^2\wedge \frac{|X_{n,k}|^3}{3!}t\right)\\
&amp;\le t^2\left(
\mathbb{E}\left[X_{n,k}^2\wedge \frac{|X_{n,k}|^3}{3!}t:
|X_{n,k}|\leq\epsilon\right]
+\mathbb{E}\left[X_{n,k}^2\wedge \frac{|X_{n,k}|^3}{3!}t:
|X_{n,k}|&gt;\epsilon\right]
\right)\\
&amp;\le
|t|^3\frac{\epsilon}{3!}\mathbb{E}[X_{n,k}^2]+t^2\mathbb{E}\left[X_{n,k}^2:
|X_{n,k}|&gt;\epsilon\right]\\
&amp;=
|t|^3\frac{\epsilon}{3!}\sigma_{n,k}^2+t^2\mathbb{E}\left[X_{n,k}^2:
|X_{n,k}|&gt;\epsilon\right]
\end{aligned}\]</span> 所以 <span class="math display">\[\sum_{k=1}^n
A_{n,k}\le
|t|^3\frac{\epsilon}{3!}\sum_{k=1}^n\sigma_{n,k}^2+t^2\sum_{k=1}^n\mathbb{E}\left[X_{n,k}^2:
|X_{n,k}|&gt;\epsilon\right].\]</span> 于是 <span class="math display">\[\limsup_{n\to\infty}\sum_{k=1}^n A_{n,k}\leq
\frac{|t|^3}{6}\epsilon.\]</span> 由 <span class="math inline">\(\epsilon\)</span> 任意性即得。</p>
<p>再来估计 <span class="math inline">\(B_{n,k}=|(1-\frac{t^2\sigma_{n,k}^2}{2})-e^{-\sigma_{n,k}^2t^2/2}|\)</span>。利用
<span class="math inline">\(|e^{-u}-(1-u)|\leq\frac{u^2}{2}\)</span>，可得
<span class="math display">\[\sum_{k=1}^n
B_{n,k}\le\frac{1}{8}t^4\sum_{k=1}^n\sigma_{n,k}^4
\le\frac{1}{8}t^4\max_{k}\sigma_{n,k}^2.\]</span> 由于 Lindberg
条件意味着 DV 条件，故 <span class="math inline">\(n\to\infty\)</span>
时上式右边趋于 0，得证。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="conditional-expectation-part-1">✅ 30.2 Conditional Expectation,
Part 1</h1>
<p>无要点</p>
<h1 id="orthogonal-projections">✅ 31.1 Orthogonal Projections</h1>
<p>一些关于 Hilber 空间 <span class="math inline">\(L^2\)</span>
的基本结论，无要点</p>
<h1 id="conditioning-on-random-variables">✅ 32.3 Conditioning on Random
Variables</h1>
<div class="statement proposition plain">
<p><span class="statement-heading"><span class="statement-label">命题
55.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(X:(\Omega,\mathcal F)\to(S,\mathcal
B)\)</span>，<span class="math inline">\(Y:(\Omega,\mathcal
F)\to(T,\mathcal C)\)</span> 为随机变量。若 <span class="math inline">\(X\)</span> 与 <span class="math inline">\(Y\)</span> 独立，且 <span class="math inline">\(f\in \mathbb B(S\times T,\mathcal B\otimes\mathcal
C)\)</span>（有界可测），则对 <span class="math inline">\(\mu_X\)</span>-a.e. 的 <span class="math inline">\(x\)</span> 有 <span class="math display">\[\mathbb{E}\left[f(X,Y)\mid X=x\right]=\int_T
f(x,y)\,\mu_Y(\mathrm d y).\]</span> 等价地， <span class="math display">\[\mathbb E\left[f(X,Y)\mid \sigma(X)\right]=
g(X)\quad a.s.,\quad
g(x):=\int_T f(x,y)\,\mu_Y(\mathrm d y).\]</span></p>
</div>
<p><strong>证明</strong>：由独立性，联合分布 <span class="math inline">\(\mu_{X,Y}=\mu_X\otimes \mu_Y\)</span>。令 <span class="math display">\[g(x):=\int_T
f(x,y)\,\mu_Y(\,\mathrm{d}y).\]</span> 则按核积分的可测性引理，<span class="math inline">\(g\)</span> 是 <span class="math inline">\(\mathcal
B\)</span>-可测且有界。</p>
<p>取任意 <span class="math inline">\(h\in\mathbb B(S,\mathcal
B)\)</span>，有（把期望写成对联合分布的积分并用 Fubini/Tonelli） <span class="math display">\[
\begin{aligned}
\mathbb E\left[f(X,Y)h(X)\right]
&amp;=\int_{S\times T}
f(x,y)h(x)\,(\mu_X\otimes\mu_Y)(\,\mathrm{d}x\,\mathrm{d}y)\\
&amp;=\int_{S}\left(\int_{T} f(x,y)\,\mu_Y(\,\mathrm{d}y)\right)
h(x)\,\mu_X(\,\mathrm{d}x)\\
&amp;=\int_S g(x)h(x)\,\mu_X(\,\mathrm{d}x)\\
&amp;=\mathbb E\left[g(X)h(X)\right].
\end{aligned}
\]</span> 以上对一切有界 <span class="math inline">\(\mathcal
B\)</span>-可测 <span class="math inline">\(h\)</span>
成立，故按条件期望的刻画， <span class="math display">\[
\mathbb E\left[f(X,Y)\mid \sigma(X)\right]=g(X)\quad a.e.
\]</span> 从而对 <span class="math inline">\(\mu_X\)</span>-a.e. 的
<span class="math inline">\(x\)</span>， <span class="math display">\[
\mathbb E\left[f(X,Y)\mid X=x\right]=g(x)=\int_T
f(x,y)\,\mu_Y(\,\mathrm{d}y).
\]</span> 证毕。</p>
<h1 id="probability-kernels-part-1">✅ 33.1 Probability Kernels, Part
1</h1>
<p>本讲引入了概率核的概念。</p>
<p>设 <span class="math inline">\((S_i,\mathcal{B}_i), i=1,2\)</span>
是两个可测空间，一个概率核 <span class="math inline">\(Q(x,
B):S_1\times\mathcal{B}_2\to[0,1]\)</span> 是一个二元函数，满足：</p>
<ol type="1">
<li>对任何 <span class="math inline">\(x\in S_1\)</span>，<span class="math inline">\(Q(x,\cdot):\mathcal{B}_2\to[0,1]\)</span> 是 <span class="math inline">\((S_2,\mathcal{B}_2)\)</span> 上的概率测度。</li>
<li>对任何 <span class="math inline">\(B\in
\mathcal{B}_2\)</span>，<span class="math inline">\(Q(\cdot,
B):S_1\to[0,1]\)</span> 是 <span class="math inline">\((S_1,\mathcal{B}_1)\)</span> 上的可测函数。</li>
</ol>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
56.1</span>.</span><span class="statement-spah"> </span>假设 <span class="math inline">\(f(x,y)\in (S_1\times S_2,
\mathcal{B}_1\otimes\mathcal{B}_2)\)</span>
是乘积空间上的可测函数，并且是有界的或者非负的，则积分 <span class="math display">\[x\to\int_{S_2}f(x,y)Q(x,\,\mathrm{d}y)\]</span>
是关于 <span class="math inline">\(x\)</span> 的可测函数。</p>
</div>
<p>此引理不难从简单函数 <span class="math inline">\(\mathbb{1}_{B_1\times
B_2}(x,y)=\mathbb{1}_{B_1}(x)\mathbb{1}_{B_2}(y)\)</span>
出发，使用函数形式的 Dynkin 引理得到。</p>
<p>由此对任何 <span class="math inline">\((S_1,\mathcal{B}_1)\)</span>
上的测度 <span class="math inline">\(\mu\)</span>，我们可以定义乘积空间
<span class="math inline">\((S_1\times S_2,
\mathcal{B}_1\otimes\mathcal{B}_2)\)</span> 上的乘积测度 <span class="math inline">\(\mu\otimes Q\)</span>： <span class="math display">\[(\mu\otimes
Q)(E)=\int_{S_1}\mu(\mathrm{d}x)\int_{S_2}\mathbb{1}_{E}(x,y)Q(x,\,\mathrm{d}y).\]</span>
不过这真的是一个概率测度吗？你可以用积分的线性性质立刻看出它是有限可加的，并且利用积分项有界和控制收敛定理立刻看出它是可数可加的，所以确实是个概率测度。</p>
<p>有了概率核的乘积测度，我们自然要研究对这种测度的积分。由于这个测度本身就是通过对示性函数积分来定义的，所以其上的积分也具有类似的性质：</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
56.2</span>.</span><span class="statement-spah"> </span>假设 <span class="math inline">\(f(x,y)\)</span>
是乘积空间的可测函数，并且是有界或者非负的，则 <span class="math display">\[\int_{S_1\times S_2}f\,\mathrm{d}(\mu\otimes Q) =
\int_{S_1}\mu(\,\mathrm{d}x)\int_{S_2}f(x,y)Q(x,\,\mathrm{d}y).\]</span></p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
56.3</span>.</span><span class="statement-spah"> </span>若两核 <span class="math inline">\((Q,\tilde Q)\)</span> 只在 <span class="math inline">\(\mu\)</span>-零集上不同，即 <span class="math inline">\(Q(x,\cdot)=\tilde Q(x,\cdot)\)</span> for <span class="math inline">\(\mu\)</span>-a.e. <span class="math inline">\(x\)</span>，则由它们和边缘 <span class="math inline">\(\mu\)</span>
拼出来的“联合测度”是<strong>同一个</strong>测度：<span class="math inline">\(\mu\otimes Q=\mu\otimes \tilde Q\)</span>。</p>
<p>反过来，如果 <span class="math inline">\(\mathcal{B}_2\)</span>
是可数生成的，则如果 <span class="math inline">\(\mu\otimes Q=\mu\otimes
\tilde Q\)</span>，那么 <span class="math inline">\(Q(x,\cdot)=\tilde
Q(x,\cdot)\)</span> 对 <span class="math inline">\(\mu\)</span>-a.e. 的
<span class="math inline">\(x\)</span> 成立。</p>
</div>
<p><strong>意义</strong>：正则条件分布/概率核通常只在 <span class="math inline">\(\mu\)</span>-a.e. 意义下唯一。若 <span class="math inline">\(\mu\otimes Q\)</span>
会因零集上的改动而改变，那很多定义就不稳固了。这个结论保证：<strong>任选一个版本</strong>都得到<strong>同一</strong>联合测度与同一组期望值
<span class="math inline">\(\displaystyle \int f\,\mathrm{d}(\mu\otimes
Q)=\int \mu(\mathrm{d}x)\int f(x,y)\,Q(x,\mathrm{d}y)\)</span>。</p>
<p><strong>证明</strong>：<span class="math inline">\(\Rightarrow\)</span>： <span class="math display">\[\begin{aligned}
(\mu\otimes Q)(B_1\times B_2) &amp;=
\int_{S_1}\mu(\mathrm{d}x)\int_{S_2}\mathbb{1}_{B_1}(x)\mathbb{1}_{B_2}(y)
Q(x,\,\mathrm{d}y)\\
&amp;=\int_{B_1}\mu(\mathrm{d}x) Q(x,B_2) = \int_{B_1}\mu(\mathrm{d}x)
\tilde Q(x,B_2).
\end{aligned}\]</span></p>
<p><span class="math inline">\(\Leftarrow\)</span>：如果 <span class="math inline">\(\mu\otimes Q=\mu\otimes \tilde
Q\)</span>，上面的计算给出 <span class="math display">\[\int_{B_1}\mu(\mathrm{d}x)Q(x,B_2) =
\int_{B_2}\mu(\mathrm{d}x)\tilde Q(x,B_2),\quad \forall
B_1\in\mathcal{B}_1,B_2\in\mathcal{B}_2.\]</span> 于是 <span class="math display">\[\int_{S_1}[Q(x,B_2) - \tilde
Q(x,B_2)]\mathbb{1}_{B_1}(x)\mu(\mathrm{d}x) = 0,\quad\forall
B_1\in\mathcal{B}_1.\]</span> 从而 <span class="math display">\[\int_{S_1}[Q(x,B_2) - \tilde
Q(x,B_2)]h(x)\mu(\mathrm{d}x) = 0,\quad\forall
h\in\mathbb{B}(S_1,\mathcal{B}_1).\]</span> 这必须有 <span class="math inline">\(Q(x,B_2) =\tilde Q(x,B_2)\)</span>
几乎处处成立才行。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="regular-conditional-distributions">✅ 33.2 Regular Conditional
Distributions</h1>
<p>本讲使用概率核给出了 <span class="math inline">\(\mathbb{E}[f(X,
Y)\mid X=x]\)</span> 这种条件期望的严格定义。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
57.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})\)</span>
是一个概率空间，<span class="math inline">\((S_i,\mathcal{B}_i),\,i=1,2\)</span>
是两个可测空间。 <span class="math display">\[X:(\Omega,\mathcal{F})\to(S_1,\mathcal{B}_1),\quad
Y:(\Omega,\mathcal{F})\to(S_2,\mathcal{B}_2)\]</span>
是两个随机变量。于是 <span class="math display">\[(X,Y):(\Omega,\mathcal{F})\to(S_1\times
S_2,\,\mathcal{B}1\otimes\mathcal{B}_2)\]</span></p>
<p>是随机向量。记 <span class="math inline">\(\mu_{X,Y}\)</span>
为此随机向量在 <span class="math inline">\((S_1\times
S_2,\,\mathcal{B}1\otimes\mathcal{B}_2)\)</span> 上 push forward
给出的测度，<span class="math inline">\(\mu_X\)</span> 是 <span class="math inline">\(X\)</span> 在 <span class="math inline">\((S_1,\mathcal{B}_1)\)</span> 上 push forward
给出的测度。如果存在概率核 <span class="math inline">\(Q(x,B)\)</span>
使得 <span class="math display">\[\mu_{X,Y}=\mu_X\otimes Q.\]</span></p>
<p>则对任何 <span class="math inline">\(f\in L^1(S_1\times
S_2,\mathcal{B}1\otimes\mathcal{B}_2)\)</span> 有 <span class="math display">\[\mathbb{E}[f(X,Y)\mid X = x] =
\int_{S_2}f(x,y)Q(x, \,\mathrm{d}y).\]</span></p>
</div>
<p>这里需要解释 <span class="math inline">\(\mathbb{E}[f(X,Y)\mid X =
x]\)</span> 这个记号的含义。这里其实引用了条件期望 (后面才会讲到)
的性质：<span class="math inline">\(\mathbb{E}[f(X,Y)\mid X]\)</span>
是一个关于 <span class="math inline">\(\sigma(X)\)</span>
可测的随机变量，从而由 Doob-Dynkin 表示定理，存在可测函数 <span class="math inline">\(g\)</span> 使得 <span class="math inline">\(\mathbb{E}[f(X,Y)\mid X] = g(X)\)</span>，所以
<span class="math inline">\(\mathbb{E}[f(X,Y)\mid X = x] =
g(x)\)</span>。这个定理说的就是 <span class="math display">\[g(x):=\mathbb{E}[f(X,Y)\mid X = x] = \tilde
g(x):=\int_{S_2}f(x,y)Q(x, \,\mathrm{d}y).\]</span></p>
<p><strong>证明</strong>：怎么证明两个关于 <span class="math inline">\(\sigma(X)\)</span> 可测的函数 (几乎处处)
相等呢？我们可以给它们同时乘以 <span class="math inline">\(h(x)\)</span>，这里 <span class="math inline">\(h(x)\)</span> 是任何一个关于 <span class="math inline">\(\sigma(X)\)</span> 可测的有界函数，然后证明它们对
<span class="math inline">\(\mu_X\)</span>
积分以后的值相等，则这两个可测函数必相等。</p>
<p><span class="math inline">\(g(x)h(x)\)</span> 这个函数对 <span class="math inline">\(\mu_X\)</span> 积分，根据积分变量替换定理，正是
<span class="math inline">\(\mathbb{E}[g(X)h(X)]\)</span>。而根据 <span class="math inline">\(g(x)\)</span> 的定义和条件期望的性质， <span class="math display">\[\mathbb{E}[g(X)h(X)]=\mathbb{E}[\mathbb{E}[f(X,Y)|X]h(X)]
= \mathbb{E}[\mathbb{E}[f(X,Y)h(X)|X]] = \mathbb{E}[f(X,
Y)h(X)].\]</span> 注意右边的期望悄悄地变成了关于 <span class="math inline">\(\mu_X\otimes Q\)</span>
的积分。这是因为上式最后的等号使用了条件期望的 telescoping 性质，而
<span class="math inline">\(f(X,Y)g(X)\)</span> 是关于 <span class="math inline">\(\mathcal{B}_1\otimes\mathcal{B}_2\)</span>
可测的函数。</p>
<p>另一方面， <span class="math display">\[\begin{aligned}
\mathbb{E}[f(X,Y)h(X)] &amp;= \int_{S_1\times
S_2}f(x,y)h(x)\mu_{X,Y}(\,\mathrm{d}x\,\mathrm{d}y) \\
&amp;= \int_{S_1\times S_2}f(x,y)h(x)\mu_X\otimes Q \\
&amp;= \int_{S_1}\mu(\mathrm{d}x) \int_{S_2}f(x,y)h(x)Q(x,\,\mathrm{d}y)
\\
&amp;= \int_{S_1}h(x)\mu(\mathrm{d}x)
h(x)\int_{S_2}f(x,y)Q(x,\,\mathrm{d}y)\\
&amp;= \int_{S_1}\tilde g(x)h(x)\mu(\mathrm{d}x)\\
&amp;= \mathbb{E}[\tilde g(x)h(x)].
\end{aligned}\]</span> 正是所要证明的。</p>
<p>不过在上面的证明中我们都假定了所有的可积性的前提。我们实际上需要假定
<span class="math inline">\(f(x,y)\)</span>
有界才能确保推导成立。对一般的 <span class="math inline">\(f(x,y)\in
L^1(S_1\times S_2,\mathcal{B}_1\otimes
\mathcal{B}_2)\)</span>，取有界函数列 <span class="math inline">\(f_n=f\mathbb{1}_{|f|\le
n}\xrightarrow{L^1}f\)</span>。由于条件期望是 contraction，所以 <span class="math display">\[\mathbb{E}[f_n(X, Y)| X] \xrightarrow{L^1}
\mathbb{E}[f(X,Y)|X].\]</span> 我们上面已经证明了 <span class="math display">\[\mathbb{E}[f_n(X, Y)| X] =
\left.\int_{S_2}f_n(x,y)Q(x,\,\mathrm{d}y)\right|_{x=X}.\]</span>
所以只要证明 <span class="math display">\[\left.\int_{S_2}f_n(x,y)Q(x,\,\mathrm{d}y)\right|_{x=X}
\xrightarrow{L^1}
\left.\int_{S_2}f(x,y)Q(x,\,\mathrm{d}y)\right|_{x=X}.\]</span>
即可。这个 <span class="math inline">\(L^1\)</span> 收敛的意思是对 <span class="math inline">\(\mu_X\)</span> 取积分，因此我们要估计 <span class="math display">\[\int_{S_1}\mu(\,\mathrm{d}x)\int_{S_2}|f_n(x,y)-f(x,y)|Q(x,\,\mathrm{d}y).\]</span>
这不正是 <span class="math inline">\(|f_n-f|\)</span>
对乘积测度的积分嘛，而我们已经知道了它是 <span class="math inline">\(L^1\)</span> 收敛的了。</p>
<p>所以如果我们能把一个联合分布分解为边际分布和一个概率核的乘积，则我们就得到了条件概率的一个表示。</p>
<blockquote>
<p><strong>问题</strong>：<span class="math inline">\(\mu_{X,Y}\)</span>
总可以表示为 <span class="math inline">\(\mu_X\otimes Q\)</span>
的形式吗？</p>
</blockquote>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
57.2</span>.</span><span class="statement-spah"> </span>如果概率核 <span class="math inline">\(Q(x, B)\)</span> 满足 <span class="math display">\[\mathbb{P}(Y\in B | X=x) = Q(x, B)\]</span>
(这个条件等价于 <span class="math display">\[\mathbb{E}[h(Y) | X] =
\left.\int h(y) Q(x,\,\mathrm{d}y)\right|_{x=X}.\]</span>
对任何有界的可测函数 <span class="math inline">\(h(y)\)</span> 成立)</p>
<p>则对 <span class="math inline">\(f(x,y)\)</span> 同样有 <span class="math display">\[\mathbb{E}[f(X,Y) | X] = \left.\int f(x,y)
Q(x,\,\mathrm{d}y)\right|_{x=X}.\]</span> 成立。</p>
</div>
<p>这个定理可以先从 <span class="math inline">\(f(x,y)=f(x)\otimes
g(y)\)</span> 形式的函数出发，然后用 Dynkin 函数系引理得到。</p>
<p>总结一下，至此我们讨论了：</p>
<ol type="1">
<li>如果 <span class="math inline">\(\mu_{X,Y}=\mu_X\otimes
Q\)</span>，那我们就有了 <span class="math inline">\(\mathbb{E}[f(X,Y)|X]\)</span> 的计算方法：积分
<span class="math inline">\(\int_{S_2}f(X,y)Q(X,\,\mathrm{d}y)\)</span>。特别地我们可以算条件概率了。</li>
<li>反之如果我们有一个概率核给出条件概率：<span class="math inline">\(\mathbb{P}(Y\in B | X=x) = Q(x,
B)\)</span>，那么它就给出 <span class="math inline">\(\mu_{X,Y}\)</span>
的一个分解：<span class="math inline">\(\mu_{X,Y}=\mu_X\otimes
Q\)</span>。</li>
</ol>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
57.3</span>.</span><span class="statement-spah"> </span>当 <span class="math inline">\(S_2\)</span> 是标准 Borel 空间或者 Polish
空间时，正则条件概率存在。</p>
</div>
<p><strong>证明</strong>：我们对 <span class="math inline">\(S=\mathbb{R}\)</span> 的情形证明。设 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})\)</span>
为概率空间，<span class="math inline">\(\mathcal
G\subset\mathcal{F}\)</span> 为子 <span class="math inline">\(\sigma\)</span>-代数，<span class="math inline">\(Y:(\Omega,\mathcal{F})\to(\mathbb{R},\mathcal{B}(\mathbb{R}))\)</span>
可测。</p>
<p>对每个 <span class="math inline">\(q\in\mathbb Q\)</span>，设 <span class="math display">\[G(q,\omega):=\mathbb P(Y\le q\mid \mathcal
G)(\omega).\]</span> 由 <span class="math inline">\(\mathbb{1}_{\{Y\le
q_1\}}\le\mathbb{1}_{\{Y\le
q_2\}}\)</span>与条件期望的单调性，丢掉可数零集 <span class="math inline">\(\bigcup_{q_1,q_2} \{\omega\mid
G(q_1,\omega)\not\le G(q_2,\omega)\}\)</span> 后可取版本使得对每个 <span class="math inline">\(\omega\)</span>，<span class="math inline">\(q\mapsto G(q,\omega)\)</span> 非降。定义 <span class="math display">\[
F(x,\omega):=\inf\{\,G(q,\omega):q\in\mathbb Q,\ q&gt;x\,\}.
\]</span> 则对每个 <span class="math inline">\(\omega\)</span>，<span class="math inline">\(F(\cdot,\omega)\)</span> 非降、右连续，且 <span class="math inline">\(\lim_{x\to-\infty}F(x,\omega)=0\)</span>、<span class="math inline">\(\lim_{x\to+\infty}F(x,\omega)=1\)</span>。并且对任意
<span class="math inline">\(A\in\mathcal G\)</span> 与 <span class="math inline">\(x\in\mathbb R\)</span>，取 <span class="math inline">\(q_n\downarrow x\)</span> 得 <span class="math display">\[
\int_A F(x,\omega)\,\mathrm d\mathbb P(\omega)
=\lim_{n}\int_A G(q_n,\omega)\,\mathrm d\mathbb P(\omega)
=\lim_{n}\mathbb P\big(A\cap{Y\le q_n}\big)
=\mathbb P\big(A\cap{Y\le u}\big).
\]</span></p>
<p>令 <span class="math inline">\(\nu(\omega,\cdot)\)</span> 是以 <span class="math inline">\(F(\cdot,\omega)\)</span> 为分布函数的
Lebesgue–Stieltjes 概率测度，由上式可得对一切 <span class="math inline">\(A\in\mathcal G\)</span> 与 <span class="math inline">\(x\in\mathbb R\)</span>， <span class="math display">\[
\int_A \nu\big(\omega,(-\infty,x]\big)\,\mathrm d\mathbb
P(\omega)=\mathbb P\big(A\cap{Y\le x}\big).
\]</span> 令 <span class="math display">\[
\mathcal D:=\{B\in\mathcal B(\mathbb R):\ \omega\mapsto \nu(\omega,B)\ \
\mathcal G\text{-可测且}\ \int_A \nu(\omega,B)\,\mathrm d\mathbb
P=\mathbb P\big(A\cap{Y\in B}\big),\ \forall A\in\mathcal G\}.
\]</span> 则 <span class="math inline">\(\mathcal D\)</span> 为 <span class="math inline">\(\lambda\)</span>-系且包含 <span class="math inline">\(\pi\)</span>-系 <span class="math inline">\(\{(a,b]\}\)</span>，故由 <span class="math inline">\(\pi-\lambda\)</span> 定理 <span class="math inline">\(\mathcal D=\mathcal B(\mathbb
R)\)</span>。于是对所有 Borel集 <span class="math inline">\(B\)</span>，<span class="math inline">\(\nu(\cdot,B)\)</span> 为 <span class="math inline">\(\mathcal G\)</span>-可测，且 <span class="math display">\[
\int_A \nu(\omega,B)\,\mathrm{d}\mathbb P=\mathbb P\big(A\cap{Y\in
B}\big),\qquad \forall A\in\mathcal G.
\]</span></p>
<p>定义 <span class="math display">\[
Q(\omega,B):=\nu\big(\omega,B\big),\qquad B\in\mathcal S.
\]</span> 则对每个 <span class="math inline">\(\omega\)</span>，<span class="math inline">\(B\mapsto Q(\omega,B)\)</span> 为 <span class="math inline">\((S,\mathcal S)\)</span>上的概率测度；对每个 <span class="math inline">\(B\)</span>，<span class="math inline">\(\omega\mapsto Q(\omega,B)\)</span> 为 <span class="math inline">\(\mathcal G\)</span>-可测。并且对一切 <span class="math inline">\(A\in\mathcal G\)</span> 与 <span class="math inline">\(B\in\mathcal S\)</span>， <span class="math display">\[
\int_A Q(\omega,B)\,\mathrm d\mathbb P
=\int_A \nu\big(\omega,B\big)\,\mathrm d\mathbb P
=\mathbb P\big(A\cap{Y\in B}\big).
\]</span> 因此 <span class="math inline">\(Q(\cdot, B)\)</span> 正是
<span class="math inline">\(\mathbb{E}[\mathbb{1}_{\{Y\in B\}}|\mathcal
G]\)</span> 的一个版本。于是 <span class="math inline">\(Q\)</span>
是给定 <span class="math inline">\(\mathcal G\)</span>
的正则条件概率核。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="probability-kernels-part-2">✅ 34.1 Probability Kernels, Part
2</h1>
<p>本讲介绍了概率核的本质是 Markov
生成元，即可测函数空间上的非负线性泛函。</p>
<p>当有一个概率核 <span class="math inline">\(Q: S_1\times
\mathcal{B}_2\to[0, 1]\)</span> 时， <span class="math display">\[f\to
\int_{S_2}f(y)Q(x,\,\mathrm{d}y),\quad
f\in\mathbb{B}(S_2,\mathcal{B}_2)\]</span> 给出了从 <span class="math inline">\(L^\infty(S_2,\mathcal{B}_2)\)</span> 到 <span class="math inline">\(L^\infty(S_1,\mathcal{B}_1)\)</span> 的线性映射
<span class="math inline">\(L_Q\)</span>，<span class="math inline">\(L_Q\)</span> 满足</p>
<ol type="1">
<li><span class="math inline">\(L_Q(1)=1\)</span>。</li>
<li>若 <span class="math inline">\(f\geq 0\)</span> 非负可测，则 <span class="math inline">\(L_Q(f)\geq 0\)</span> 也非负可测。</li>
<li>若 <span class="math inline">\(f_n\uparrow f\)</span> 则 <span class="math inline">\(L_Q(f_n)\uparrow L_Q(f)\)</span>。</li>
<li><span class="math inline">\(\|L_Q(f)\|_{\infty} \leq
\|f\|_{\infty}\)</span>。</li>
</ol>
<p>所以 <span class="math inline">\(L_Q\)</span>
是一个连续的正线性泛函？</p>
<p>反过来，如果有这样的一个泛函 <span class="math inline">\(L\)</span>，<span class="math inline">\(L\)</span>
是否给出一个概率核 <span class="math inline">\(Q\)</span> 呢？</p>
<p>答案是否定的，一般来说这不成立。但是在 <span class="math inline">\((S_1,\mathcal{B}_1)=(S_2,\mathcal{B}_2)\)</span>
的情形，这确实是对的。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
58.1</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(L:\mathbb{B}(S,\mathcal{B})\to\mathbb{B}(S,B)\)</span>
满足以上四个条件，则 <span class="math display">\[Q(x, B) =
L(\mathbb{1}_B)(x)\]</span> 给出一个概率核。并且 <span class="math inline">\(L_Q=L\)</span>，即此概率核给出的线性泛函正是 <span class="math inline">\(L\)</span>。</p>
</div>
<p><strong>证明</strong>：先证 <span class="math inline">\(Q\)</span>
为概率核。对任意固定 <span class="math inline">\(B\in\mathcal
B\)</span>，有 <span class="math display">\[Q(\cdot,B)=L(\mathbb{1}_B)\in\mathbb{B}(S,\mathcal
B).\]</span> 故 <span class="math inline">\(x\mapsto Q(x,B)\)</span>
可测。对任意固定 <span class="math inline">\(x\in S\)</span>，由 <span class="math inline">\(0\le \mathbb{1}_B\le 1\)</span> 与正性得 <span class="math display">\[0\le Q(x,B)\le Q(x,S)=L(1)(x)=1.\]</span> 且
<span class="math inline">\(Q(x,\varnothing)=0\)</span>。设 <span class="math inline">\(B=\biguplus_{k\ge1} B_k\)</span> 两两不交，令
<span class="math inline">\(f_n:=\sum_{k=1}^n
\mathbb{1}_{B_k}\)</span>，则 <span class="math inline">\(0\le
f_n\uparrow \mathbb{1}_B\)</span>，由线性与单调连续性， <span class="math display">\[Q(x,B)=L(\mathbb{1}_B)(x)=\lim_{n\to\infty}L(f_n)(x)=\lim_{n\to\infty}\sum_{k=1}^n
L(\mathbb{1}_{B_k})(x)=\sum_{k=1}^\infty Q(x,B_k).\]</span> 故 <span class="math inline">\(B\mapsto Q(x,B)\)</span> 为概率测度。于是 <span class="math inline">\(Q\)</span> 是概率核。</p>
<p>记 <span class="math display">\[L_Q(f)(x):=\int_S
f(y)Q(x,\,\mathrm{d}y).\]</span> 显然对任意 <span class="math inline">\(B\in\mathcal B\)</span>， <span class="math display">\[L(\mathbb{1}_B)=Q(\cdot,B)=\int_S
\mathbb{1}_B(y)Q(\cdot,\,\mathrm{d}y)=L_Q(\mathbb{1}_B).
\]</span></p>
<p>设 <span class="math display">\[\mathbb{H}=\{f\in\mathbb{B}(S,\mathcal B):\
L(f)=L_Q(f)\}.\]</span> 则 <span class="math inline">\(\mathbb{H}\)</span>
是向量空间，并且对有界收敛封闭。<span class="math inline">\(\mathbb{H}\)</span> 包含乘法系 <span class="math display">\[\mathbb{M}=\{\mathbb{1}_B:\ B\in\mathcal B\}.
\]</span> 显然 <span class="math inline">\(\sigma(\mathbb{M})=\mathcal{B}\)</span>。由
<strong>Dynkin 的乘法系定理（函数版）</strong>，对一切 <span class="math inline">\(f\in\mathbb{B}(S,\mathcal B)\)</span> 与 <span class="math inline">\(x\in S\)</span>， <span class="math display">\[L(f)(x)=L_Q(f)(x)=\int_S
f(y)Q(x,\,\mathrm{d}y).\]</span> 即 <span class="math inline">\(L=L_Q\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<p>如果 <span class="math inline">\(Q_1,Q_2\)</span> 是两个 <span class="math inline">\((S,\mathcal{B})\)</span> 到自身的概率核，则 <span class="math inline">\(L_{Q_1}L_{Q_2}\)</span> 也满足性质
1-4，因而也是由一个概率核给出：存在概率核 <span class="math inline">\(Q\)</span> 使得 <span class="math inline">\(L_Q =
L_{Q_1}L_{Q_2}\)</span>。我们可以把 <span class="math inline">\(Q\)</span> 明确的写出来： <span class="math display">\[L_Q(f) =
L_{Q_1}L_{Q_2}(f)=\int_{S}Q_1(x,\,\mathrm{d}y)\left(\int_Sf(z)Q_2(y,\,\mathrm{d}z)\right).\]</span>
这看起来很像乘积测度，实际上我们后面会讨论 <span class="math display">\[Q_1(x,dy)Q_2(d, dz)= Q_1\otimes Q_2(x,
dz)\]</span> 的具体含义。</p>
<h1 id="random-dynamics">✅ 34.2 Random Dynamics</h1>
<p>什么是随机动力系统：</p>
<p>有一个概率空间 <span class="math inline">\((\Omega,\mathcal{F},\mathbb{P})\)</span>，一个可测空间
<span class="math inline">\((R,\mathcal{G})\)</span>，以及一些 i.i.d
随机变量 <span class="math inline">\(\xi_n:(\Omega,\mathcal{F},\mathbb{P})\to
(R,\mathcal{G})\)</span>。此外设 <span class="math inline">\((S,\mathbb{R})\)</span> 是一个可测空间。</p>
<p>如果 <span class="math inline">\(f\)</span> 是一个 <span class="math inline">\((S, R)\to S\)</span> 的可测函数映射满足</p>
<p><span class="math display">\[X_{n+1} = f(X_n, \xi_{n+1}) =
F_n(X_0,\xi_1,\xi_2,\ldots,\xi_n),\quad F_n:S\times R^n\to S.\]</span>
即 <span class="math inline">\(f(\cdot,\xi_n)\)</span> 是一个由随机序列
<span class="math inline">\(\{\xi_n\}\)</span>
驱动的映射，则我们就称这是一个随机动力系统。</p>
<p>注意 <span class="math inline">\(X_n\)</span> 由 <span class="math inline">\(\xi_1\sim\xi_n\)</span> 决定，所以 <span class="math inline">\(\mathcal{F}_n=\sigma(X_0,X_1,\ldots,X_n)
=\sigma(X_0,\xi_1,\ldots,\xi_n)\)</span>。</p>
<p>记 <span class="math inline">\(Q_n(x,A)=\mathbb{P}(f(x, \xi_n)\in
A)\)</span>，则 <span class="math inline">\(Q_n\)</span>
是一个概率核。设 <span class="math inline">\(L_n\)</span> 是其 Markov
生成元。 <span class="math display">\[L_n(g)(x) = \int g(y)
Q_n(x,\,\mathrm{d}y)=\mathbb{E}[g(f(x,\xi_n))].\]</span> 则</p>
<p><span class="math display">\[\begin{align*}\mathbb{E}[g(X_{n+1})|\mathcal{F}_n]
&amp;= \mathbb{E}[g(f(X_n,\xi_{n+1}))|\mathcal{F}_n]\\
&amp;=\left.\mathbb{E}[g\circ f(x,\xi_{n+1})]\right|_{x=X_n} \\
&amp;=\left.\int g(y)Q_{n+1}(x,\,\mathrm{d}y)\right|_{x=X_n}\\
&amp;=L_{n+1}(g)(X_n).\end{align*}\]</span> 但是 <span class="math inline">\(L_{n+1}(g)(X_n)\)</span> 是 <span class="math inline">\(X_n\)</span> 的函数，所以它关于 <span class="math inline">\(\sigma(X_n)\)</span>
是可测的，而且是有界可测，从而两边对 <span class="math inline">\(\sigma(X_n)\)</span> 这个子 <span class="math inline">\(\sigma\)</span>- 域取条件期望，并注意到 <span class="math inline">\(\sigma(X_n)\subset\mathcal{F}_n\)</span> 有 <span class="math display">\[\mathbb{E}[g(X_{n+1})|\mathcal{F}_n] =
\mathbb{E}[g(X_{n+1})|X_n].\]</span> 这正是 Markov 性质。</p>
<h1 id="stochastic-processes">✅ 35.1 Stochastic Processes</h1>
<p>本讲介绍了随机过程的定义，以及它们的有限维分布、滤过
(filtration)、适应 (adapted) 等概念。</p>
<h1 id="the-markov-property">✅ 36.1 The Markov property</h1>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
61.1</span>.</span><span class="statement-spah"> </span>我们称随机过程
<span class="math inline">\(X_t:(\Omega,\mathcal{F}_t)\to(S_,\mathcal{B})\)</span>
具有 Markov 性质，如果对任何有界可测函数 <span class="math inline">\(f\in\mathbb{B}(S,\mathcal{B})\)</span> 有 <span class="math display">\[\mathbb{E}[f(X_t)|\mathcal{F}_s] =
\mathbb{E}[f(X_t)|X_s],\quad \mathrm{a.e.}\ \forall s &lt;
t.\]</span></p>
</div>
<p>即对 <span class="math inline">\(s\)</span>
时刻之前的所有历史取条件期望，等于只对 <span class="math inline">\(s\)</span> 时刻的历史取条件期望。</p>
<p>根据 Doob-Dynkin 引理，不难验证这个定义等价于 <span class="math display">\[\mathbb{E}[f(X_t)|\mathcal{F}_s] = F(X_s),\quad
\mathrm{a.e.}\text{ for some }
F\in\mathbb{B}(S,\mathcal{B}).\]</span></p>
<p>上面定义看起来是说，Markov
过程是关于过去和当前的。但实际上它也告诉了我们关于未来的信息：</p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
61.2</span>.</span><span class="statement-spah"> </span><span class="math display">\[\mathbb{E}[Y|\mathcal{F}_s] = E[Y|X_s],\quad
\forall Y\in\mathbb{B}(\Omega, \mathcal{F}^X_{\geq s}).\]</span>
注意，<span class="math inline">\(Y\)</span> 来自 <span class="math inline">\(\mathcal{F}^X_{\geq s}=\sigma(X_t:t\geq
s)\)</span>，而不是 Filtration <span class="math inline">\(\mathcal{F}_{\geq s}\)</span>。</p>
</div>
<p>这个推论的证明很有意思，要用到 Dynkin multiplicative system。</p>
<p><strong>证明</strong>：考虑所有形如 <span class="math display">\[Y =
g_0(X_{t_0})g_1(X_{t_1})\cdots g_n(X_{t_n})\]</span> 的函数，这里 <span class="math inline">\(s =t_0&lt;t_1&lt;\cdots &lt;t_n\)</span>，且每个
<span class="math inline">\(g_i\)</span> 都是有界可测的，从而 <span class="math inline">\(Y\)</span> 也是有界可测的，并且 <span class="math inline">\(Y\in\mathcal{F}^X_{\geq s}\)</span>。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
61.3</span>.</span><span class="statement-spah"> </span>设 <span class="math display">\[\mathcal{M} = \{g_0(X_{t_0})g_1(X_{t_1})\cdots
g_n(X_{t_n})\mid n\in\mathbb{Z}_{\geq0},\ s=t_0&lt;t_1&lt;\cdots&lt;t_n,
g_j\in\mathbb{B}(S,\mathcal{B})\}.\]</span> 则 <span class="math inline">\(\mathcal{M}\)</span> 是乘法系，且 <span class="math inline">\(\sigma(M) = \mathcal{F}^X_{\geq s}\)</span>。</p>
</div>
<p>引理的证明很简单，这里省略。</p>
<p>回到推论的证明。</p>
<p>设 <span class="math inline">\(\mathcal{H}\)</span>
是所有满足推论要求的函数构成的空间。显然 <span class="math inline">\(\mathcal{H}\)</span> 满足：</p>
<ol type="1">
<li>是向量空间；</li>
<li>包含常函数 1；</li>
<li>对有界收敛下封闭</li>
</ol>
<p>我们只要再证明 <span class="math inline">\(\mathcal{H}\)</span>
包含乘法系 <span class="math inline">\(\mathcal{M}\)</span>，从而根据
Dynkin 函数系引理它包含所有关于 <span class="math inline">\(\sigma(\mathcal{M})=\mathcal{F}^X_{\geq
s}\)</span> 可测的有界可测函数，这正是所要证明的。</p>
<p>根据 Markov 性质和 Doob-Dynkin 引理，我们可以记 <span class="math inline">\(\mathbb{E}_{\mathcal{F}_{t_{n-1}}}[g_n(X_{t_n})]=h(X_{t_{n-1}})\)</span>。于是</p>
<p><span class="math display">\[\begin{aligned}\mathbb{E}_{\mathcal{F}_s}[Y]&amp;=\mathbb{E}_{\mathcal{F}_s}[E_{\mathcal{F}_{t_{n-1}}}[Y]]\\
&amp;=\mathbb{E}_{\mathcal{F}_s}[g_0(X_{t_0})\cdots
g_{n-1}(X_{t_{n-1}})h(X_{t_{n-1}})]\\
&amp;=\mathbb{E}_{\mathcal{F}_s}[g_0(X_{t_0})\cdots
\widetilde{g_{n-1}}(X_{t_{n-1}})]\\
&amp;=\cdots\\
&amp;=\mathbb{E}_{\mathcal{F}_s}[F(X_{s})]\\
&amp;=F(X_s)
\end{aligned}\]</span> 再利用 <span class="math inline">\(\mathbb{E}_{X_s}[Y]=\mathbb{E}_{X_s}[\mathbb{E}_{\mathcal{F}_s}[Y]]=\mathbb{E}_{X_s}[F(X_s)]=F(X_s)\)</span>
即得所证。<span class="math inline">\(\blacksquare\)</span></p>
<p>上面是 Markov
性质的第一种刻画：将对未来可测的函数对当前和过去取条件期望，相当于只对当前取条件期望。</p>
<p>本讲接下来用条件独立给出了 Markov 性质的第二种刻画：</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
61.4</span>.</span><span class="statement-spah"> </span>随机过程 <span class="math inline">\(\{X_t\}\)</span> 满足 Markov 性质当且仅当 <span class="math inline">\(\mathcal{F}_s\)</span> 和 <span class="math inline">\(\mathcal{F}^X_{\geq s}\)</span> 关于 <span class="math inline">\(\sigma(X_s)\)</span>
是条件独立的，即对任何有界可测函数 <span class="math inline">\(Z\in\mathbb{B}(\Omega,\mathcal{F}_s)\)</span>，<span class="math inline">\(Y\in\mathbb{B}(\Omega,\mathcal{F}^X_{\geq
s})\)</span> 有 <span class="math display">\[\mathbb{E}[ZY\mid X_s] =
\mathbb{E}[Z\mid X_s]\cdot \mathbb{E}[Y\mid X_s].\]</span></p>
</div>
<p>注意到 <span class="math inline">\(\mathcal{F}_s\supset\sigma(X_t:
t\leq s)\)</span> 以及 <span class="math inline">\(\mathcal{F}^X_{\geq
s}=\sigma(X_t:t\geq s)\)</span>，所以这个结论可以概括为：对 Markov
过程，给定当下，过去与未来独立。</p>
<p><strong>证明</strong>：</p>
<p><span class="math inline">\(\Rightarrow\)</span>：由于 <span class="math inline">\(Z\)</span> 关于 <span class="math inline">\(\mathcal{F}_s\)</span> 可测，以及 Markov 性质，有
<span class="math display">\[\mathbb{E}[ZY\mid\mathcal{F}_s] =
Z\mathbb{E}[Y\mid \mathcal{F}_s]=Z\cdot \mathbb{E}[Y\mid X_s].\]</span>
两边同时对 <span class="math inline">\(\sigma(X_s)\)</span>
取条件期望，并利用条件期望的 Tower 性质，得到 <span class="math display">\[\mathbb{E}[ZY\mid X_s] = \mathbb{E}[Z\mid
X_s]\cdot \mathbb{E}[Y\mid\mathcal{F}_s].\]</span></p>
<p><span class="math inline">\(\Leftarrow\)</span>：对任意 <span class="math inline">\(Z\in\mathbb{B}(\Omega,\sigma(X_s))\)</span>，考虑
<span class="math inline">\(\mathbb{E}[Z
f(X_t)]\)</span>。由条件独立得：</p>
<p><span class="math display">\[\mathbb{E}[Z\cdot f(X_t)]=
\mathbb{E}\big[\mathbb{E}[Z f(X_t)\mid X_s]\big]=
\mathbb{E}\big[\mathbb{E}[Z\mid X_s]\cdot\mathbb{E}[f(X_t)\mid
X_s]\big]=\mathbb{E}[Z\cdot h(X_s)].\]</span> 其中 <span class="math inline">\(h(X_s):=\mathbb{E}[f(X_t)\mid
X_s]\)</span>。另一方面，根据条件期望定义， <span class="math display">\[\mathbb{E}[Z\cdot f(X_t)] = \mathbb{E}\big[Z
\cdot\mathbb{E}[f(X_t)\mid \mathcal{F}_s]\big].\]</span>
两个式子的右边相等，所以 <span class="math display">\[\mathbb{E}\big[Z\cdot\mathbb{E}[f(X_t)\mid
\mathcal{F}_s]\big]
= \mathbb{E}\big[Z\cdot h(X_s)\big].\]</span>
而这正是条件期望的“投影特征”：由 <span class="math inline">\(Z\)</span>
的任意性，必然有 <span class="math display">\[\mathbb{E}[f(X_t)\mid\mathcal{F}_s] = h(X_s) =
\mathbb{E}[f(X_t)\mid X_s],\quad \mathrm{a.e.}\]</span> <span class="math inline">\(\blacksquare\)</span></p>
<h1 id="probability-kernels-revisited">36.2 Probability Kernels
Revisited</h1>
<p>回顾了之前概率核的概念。没啥新的。</p>
<h1 id="markov-processes">✅ 37.1 Markov Processes</h1>
<p>设 <span class="math inline">\(\{X_t\}:(\Omega,\mathcal{F})\to(\mathcal{S},\mathcal{B}(\mathcal{S}))\)</span>
是一族随机变量，满足 Markov 性质： <span class="math display">\[\mathbb{E}[f(X_t)\mid \mathcal{F}_s] =
\mathbb{E}[f(X_t)\mid X_s],\quad \mathrm{a.e.}\ \forall s&lt;t.\]</span>
假设 <span class="math inline">\(\mathcal{S}\)</span> 足够
nice，于是我们可以定义正则条件概率 <span class="math inline">\(q_{s,t}=\mathbb{P}(X_t\in B\mid X_s)\)</span> 满足
<span class="math display">\[\mathbb{E}[f(X_s)|X_t] =
\int_\mathcal{S}f(y)q_{s,t}(X_s,\,\mathrm{d}y)=Q_{s,t}(f(X_s)).\]</span>
那么，这些算子 <span class="math inline">\(Q_{s,t}\)</span>
之间应该满足怎样的关系呢？</p>
<p>固定 <span class="math inline">\(r&lt;s&lt;t\)</span>，利用条件期望的
Tower 性质，可以得到 <span class="math display">\[Q_{r,t}f(X_r)=\mathbb{E}[f(X_t)\mid
X_r]=\mathbb{E}[\mathbb{E}[f(X_t)\mid X_s] \mid
X_r]=\mathbb{E}[Q_{s,t}f(X_s)\mid X_r]=Q_{r,s}Q_{s,t}f(X_r).\]</span>
于是正则条件概率 <span class="math inline">\(\{q_{s,t}\}\)</span> 满足
<span class="math display">\[q_{r,t}(x, B)=\int
q_{r,s}(x,\,\mathrm{d}y)q_{s,t}(y, B).\]</span> 这就是所谓的
<strong>Chapman-Kolmogorov</strong> 方程。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
63.1</span>.</span><span class="statement-spah"> </span>Markov
过程就是满足 Markov 性质，并且存在概率转移核 <span class="math inline">\(\{Q_{s,t}\}\)</span> 使得 <span class="math display">\[\mathbb{E}[f(X_t)\mid X_s] =
Q_{s,t}f(X_s).\]</span></p>
</div>
<div class="statement proposition plain">
<p><span class="statement-heading"><span class="statement-label">命题
63.2</span>.</span><span class="statement-spah"> </span>独立增量过程是
Markov 过程，其中 <span class="math display">\[q_{s,t}(x,B) =
\mathbb{E}[\mathbb{1}_B(x + X_t - X_s)].\]</span></p>
</div>
<p>视频接下来介绍了 Markov 过程的有限维分布。我们的目标是证明：对任意
<span class="math inline">\(t_0&lt;\cdots&lt;t_n\)</span> 与 <span class="math inline">\(B_0,\ldots,B_n\in\mathcal B(\mathcal
S)\)</span>，都有 <span class="math display">\[\mathbb P(X_{t_0}\in
B_0,\ldots,X_{t_n}\in B_n)=\int_{B_0}\mu_{t_0}(\mathrm d
x_0)\int_{B_1}q_{t_0,t_1}(x_0,\mathrm d
x_1)\cdots\int_{B_n}q_{t_{n-1},t_n}(x_{n-1},\mathrm d x_n).\]</span>
更方便的做法是先证明一个函数版的等式：对任意有界 Borel 函数 <span class="math inline">\(f_0,\dots,f_n:\mathcal S\to\mathbb R\)</span>，有
<span class="math display">\[\mathbb E\Big[\prod_{k=0}^n
f_k(X_{t_k})\Big]=\int_{\mathcal S}\mu_{t_0}(\mathrm
dx_0)\,f_0(x_0)\int_{\mathcal S} q_{t_0,t_1}(x_0,\mathrm
dx_1)\,f_1(x_1)\cdots\int_{\mathcal S} q_{t_{n-1},t_n}(x_{n-1},\mathrm
dx_n)\,f_n(x_n).\]</span> 然后取 <span class="math inline">\(f_k=\mathbf
1_{B_k}\)</span> 即得到有限维分布的核表示。</p>
<p>对 <span class="math inline">\(n\)</span> 的归纳，当 <span class="math inline">\(n=0\)</span> 时， <span class="math display">\[\mathbb E[f_0(X_{t_0})] = \int_{\mathcal S}
f_0(x_0)\,\mu_{t_0}(\mathrm dx_0),
\]</span> 这只是 <span class="math inline">\(X_{t_0}\)</span> 分布为
<span class="math inline">\(\mu_{t_0}\)</span>
的定义，因此命题成立。</p>
<p>现在假设 <span class="math inline">\((P_{n-1})\)</span>
已经成立，固定任意有界 Borel 函数 <span class="math inline">\(f_0,\dots,f_{n-1}\)</span>，它们在下面都视为给定的常量函数族。现在把注意力放在最后一个函数
<span class="math inline">\(f_n\)</span> 上。</p>
<p>对任意有界 Borel 函数 <span class="math inline">\(g:\mathcal
S\to\mathbb R\)</span>，定义 <span class="math display">\[\Lambda(g):=\mathbb E\Big[\Big(\prod_{k=0}^{n-1}
f_k(X_{t_k})\Big)\,g(X_{t_n})\Big],\]</span> <span class="math display">\[\Phi(g)
:=\int_{\mathcal S}\mu_{t_0}(\mathrm dx_0)\,f_0(x_0)
\int_{\mathcal S}q_{t_0,t_1}(x_0,\mathrm dx_1)\,f_1(x_1)\cdots
\int_{\mathcal S}q_{t_{n-1},t_n}(x_{n-1},\mathrm
dx_n)\,f_{n-1}(x_{n-1})\,g(x_n).\]</span> 当我们能证明对所有有界 Borel
<span class="math inline">\(g\)</span> 都有 <span class="math inline">\(\Lambda(g)=\Phi(g)\)</span> 时，把 <span class="math inline">\(g=f_n\)</span> 代入，就得到结论对 <span class="math inline">\(n\)</span> 的情形成立。</p>
<p>因此定义函数类 <span class="math display">\[\mathcal H :=
\{g\in\mathcal B_b(\mathcal S):\ \Lambda(g)=\Phi(g)\}.\]</span></p>
<p>接下来要证明 <span class="math inline">\(\mathcal H\)</span> 满足
Dynkin 函数系引理的条件，从而 <span class="math inline">\(\mathcal
H=\mathcal B_b(\mathcal S)\)</span>。</p>
<p>首先，<span class="math inline">\(\mathcal H\)</span>
是向量空间。</p>
<p>其次，由单调收敛定理，<span class="math inline">\(\mathcal H\)</span>
对有界单调极限封闭。因此 <span class="math inline">\(\mathcal H\)</span>
是一个对线性组合与有界单调极限封闭的有界可测函数类，符合 Dynkin
函数系引理的结构要求。</p>
<p>接下来需要一个生成族。假设状态空间 <span class="math inline">\((\mathcal S,\mathcal B(\mathcal S))\)</span>
是标准 Borel 空间（或足够 nice），则存在一个可数的 <span class="math inline">\(\pi\)</span>-系统（或代数） <span class="math inline">\(\mathcal C\subset\mathcal B(\mathcal S)\)</span>
生成 <span class="math inline">\(\mathcal B(\mathcal
S)\)</span>。我们只需在每个 <span class="math inline">\(C\in\mathcal
C\)</span> 上验证 <span class="math inline">\(\mathbf 1_C\in\mathcal
H\)</span>，即证明 <span class="math display">\[
\Lambda(\mathbf 1_C)=\Phi(\mathbf 1_C).
\]</span></p>
<p>取任意 <span class="math inline">\(C\in\mathcal C\)</span>。计算
<span class="math display">\[
\begin{aligned}
\Lambda(\mathbf 1_C)
&amp;=\mathbb E\Big[\Big(\prod_{k=0}^{n-1} f_k(X_{t_k})\Big)\,\mathbf
1_C(X_{t_n})\Big]\\
&amp;=\mathbb E\Big[\Big(\prod_{k=0}^{n-1} f_k(X_{t_k})\Big)\,\mathbb
E[\mathbf 1_C(X_{t_n})\mid\mathcal F_{t_{n-1}}]\Big].
\end{aligned}
\]</span></p>
<p>利用 Markov 性质和转移核的定义， <span class="math display">\[
\mathbb E[\mathbf 1_C(X_{t_n})\mid\mathcal F_{t_{n-1}}]
=\mathbb E[\mathbf 1_C(X_{t_n})\mid X_{t_{n-1}}]
=q_{t_{n-1},t_n}(X_{t_{n-1}},C),
\]</span> 于是 <span class="math display">\[
\begin{aligned}
\Lambda(\mathbf 1_C)
&amp;=\mathbb E\Big[\Big(\prod_{k=0}^{n-2} f_k(X_{t_k})\Big)\,
f_{n-1}(X_{t_{n-1}})\,q_{t_{n-1},t_n}(X_{t_{n-1}},C)\Big]\\
&amp;=\mathbb E\Big[\prod_{k=0}^{n-2} f_k(X_{t_k})\,h(X_{t_{n-1}})\Big],
\end{aligned}
\]</span> 其中定义 <span class="math display">\[
h(x):=f_{n-1}(x)\,q_{t_{n-1},t_n}(x,C).
\]</span> 显然 <span class="math inline">\(h\)</span> 是有界 Borel
函数。</p>
<p>现在可以使用归纳假设 <span class="math inline">\((P_{n-1})\)</span>：它告诉我们，对任意有界 Borel
函数 <span class="math inline">\(f_0,\dots,f_{n-2},h\)</span>， <span class="math display">\[
\mathbb E\Big[\prod_{k=0}^{n-2} f_k(X_{t_k})\,h(X_{t_{n-1}})\Big]
=
\int_{\mathcal S}\mu_{t_0}(\mathrm dx_0)\,f_0(x_0)
\cdots
\int_{\mathcal S}q_{t_{n-2},t_{n-1}}(x_{n-2},\mathrm
dx_{n-1})\,h(x_{n-1}).
\]</span></p>
<p>代入当前的 <span class="math inline">\(h\)</span> 得 <span class="math display">\[
\begin{aligned}
\Lambda(\mathbf 1_C)
&amp;=\int_{\mathcal S}\mu_{t_0}(\mathrm dx_0)\,f_0(x_0)
\int_{\mathcal S}q_{t_0,t_1}(x_0,\mathrm dx_1)\,f_1(x_1)\cdots\\
&amp;\quad\cdots
\int_{\mathcal S}q_{t_{n-2},t_{n-1}}(x_{n-2},\mathrm dx_{n-1})\,
f_{n-1}(x_{n-1})\,q_{t_{n-1},t_n}(x_{n-1},C).
\end{aligned}
\]</span></p>
<p>注意 <span class="math display">\[
q_{t_{n-1},t_n}(x_{n-1},C)
=\int_{\mathcal S}\mathbf 1_C(x_n)\,q_{t_{n-1},t_n}(x_{n-1},\mathrm
dx_n),
\]</span> 于是 <span class="math display">\[
\begin{aligned}
\Lambda(\mathbf 1_C)
&amp;=\int_{\mathcal S}\mu_{t_0}(\mathrm dx_0)\,f_0(x_0)
\int_{\mathcal S}q_{t_0,t_1}(x_0,\mathrm dx_1)\,f_1(x_1)\cdots\\
&amp;\quad\cdots
\int_{\mathcal S}q_{t_{n-2},t_{n-1}}(x_{n-2},\mathrm
dx_{n-1})\,f_{n-1}(x_{n-1})
\int_{\mathcal S}q_{t_{n-1},t_n}(x_{n-1},\mathrm dx_n)\,\mathbf
1_C(x_n)\\
&amp;=\Phi(\mathbf 1_C).
\end{aligned}
\]</span></p>
<p>因此对每个 <span class="math inline">\(C\in\mathcal C\)</span>，<span class="math inline">\(\mathbf 1_C\in\mathcal H\)</span>。</p>
<p>综上，<span class="math inline">\(\mathcal H\)</span>
是一个包含生成族指标函数的函数类，对线性组合和有界单调极限封闭。由
Dynkin 函数系引理可知 <span class="math display">\[
\mathcal H = \mathcal B_b(\mathcal S),
\]</span></p>
<h1 id="kolmogorovs-extended-extension-theorem">✅ 37.2 Kolmogorov’s
(Extended) Extension Theorem</h1>
<p>怎么构造一个 Markov 过程？</p>
<p>记 <span class="math inline">\(\Omega = \{\omega: T\to
\mathcal{S}\}\)</span> 是所有从时间 <span class="math inline">\(T\)</span> 到状态空间 <span class="math inline">\(\mathcal{S}\)</span> 的映射组成的集合。对 <span class="math inline">\(t\in T\)</span>，令 <span class="math inline">\(\pi_t\)</span> 为坐标映射 <span class="math display">\[\pi_t(\omega) = \omega(t).\]</span> 定义 <span class="math inline">\(\sigma\)</span>- 域 <span class="math inline">\(\mathcal{B}^{\otimes T} = \sigma(\{\pi_t, t\in
T\})\)</span>。即 <span class="math inline">\(\mathcal{B}^{\otimes
T}\)</span> 是使得所有坐标映射都是可测映射的最小 <span class="math inline">\(\sigma\)</span>- 域。</p>
<p>我们希望在这个乘积 <span class="math inline">\(\sigma\)</span>-
域上定义测度 <span class="math inline">\(\mathbb{P}\)</span>。我们有的是
<span class="math inline">\(\mathbb{P}\)</span> 的所有有限维投影： <span class="math display">\[\pi_\Lambda \mathbb{P}= \mu_{\Lambda}.\]</span>
其中 <span class="math inline">\(\Lambda\subset T\)</span>
是一个有限集合。<span class="math inline">\(\mathbb{P}\)</span>
必须满足<strong>相容性条件</strong>。</p>
<p>考虑代数 <span class="math display">\[\mathcal{A}= \cup_{\Lambda
\subset T\text{ finite}}\sigma(\pi_\Lambda).\]</span> 定义其上的概率为
<span class="math display">\[\mathbb{P}(A) = \mu_\Lambda(B),\quad B =
\pi_\Lambda(A).\]</span> 这是一个良定义的概率，不依赖于 <span class="math inline">\(\Lambda\)</span>
的选择。但是，这只是代数上的有限可加测度，它是可数可加的吗？</p>
<p>Kolmogorov
本质上是一个拓扑结论，在一个可分度量空间上，其测度具有内正则性质： <span class="math display">\[\mu(E)=\sup\{\mu(K)\mid K\subset E,\ K \text{
compact }\}.\]</span>
并且紧集也满足有限交性质，从而代数上的有限可加测度也是可数可加测度。</p>
<p>给定指标集 <span class="math inline">\(T\)</span>，每个 <span class="math inline">\(t\in T\)</span> 上有 Polish 空间 <span class="math inline">\((X_t,\Sigma_t)\)</span>（<span class="math inline">\(\Sigma_t\)</span> 为 Borel <span class="math inline">\(\sigma\)</span> 代数）。对每个有限子集 <span class="math inline">\(F\subset T\)</span> 给定概率测度 <span class="math inline">\(P_F\)</span> 于 <span class="math inline">\((X_F,\Sigma_F)\)</span>，并满足相容性：若 <span class="math inline">\(G\subset F\)</span> 且 <span class="math inline">\(E\in\Sigma_F\)</span>，则 <span class="math inline">\(P_F(E)=P_G(\pi_{FG}(E))\)</span>。定义柱状代数
<span class="math display">\[
\mathcal A=\text{由所有 }A\times X_{-F}\ (F\subset T\ \text{有限},\
A\in\Sigma_F)\ \text{生成的代数}.
\]</span> 在生成元上置 <span class="math display">\[
P(A\times X_{-F})=P_F(A).
\]</span> 相容性保证 <span class="math inline">\(P\)</span> 在 <span class="math inline">\(\mathcal A\)</span> 上良定且有限可加；一般而言
<span class="math inline">\(P\)</span> 未必可数可加。若 <span class="math inline">\(T\)</span> 无穷，则 <span class="math inline">\(\mathcal A\)</span> 即无限乘积 <span class="math inline">\(X=\prod_{t\in T}X_t\)</span>
的有限维柱状代数。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
64.1</span>.</span><span class="statement-spah"> </span>在 Polish 空间
<span class="math inline">\((X,\mathcal B(X))\)</span> 上，每个有限
Borel 测度 <span class="math inline">\(\mu\)</span> 是紧集内正则：对任意
<span class="math inline">\(A\in\mathcal B(X)\)</span> 与任意 <span class="math inline">\(\varepsilon&gt;0\)</span>，存在紧集 <span class="math inline">\(K\subset A\)</span> 使得 <span class="math inline">\(\mu(A)\le \mu(K)+\varepsilon\)</span>。</p>
</div>
<p>证明：先取紧致逼近全集。由紧性定理，存在递增紧集 <span class="math inline">\(K_n\uparrow X\)</span> 使 <span class="math inline">\(\mu(K_n)\uparrow\mu(X)\)</span>。对任意开集 <span class="math inline">\(U\)</span> 令 <span class="math display">\[
F_{n,m}:=\{x\in U:\ \mathrm{dist}(x,X\setminus U)\ge 1/m\}\cap K_n,
\]</span> 则 <span class="math inline">\(F_{n,m}\)</span> 紧且 <span class="math inline">\(F_{n,m}\uparrow U\)</span>，据从下连续性有 <span class="math inline">\(\mu(U)=\sup_{n,m}\mu(F_{n,m})\)</span>。对一般
<span class="math inline">\(A\)</span> 取开集 <span class="math inline">\(U\supset A\)</span> 使 <span class="math inline">\(\mu(U)\le \mu(A)+\varepsilon\)</span>，再取某个
<span class="math inline">\(F_{n,m}\subset U\)</span> 使 <span class="math inline">\(\mu(U)\le \mu(F_{n,m})+\varepsilon\)</span>，令
<span class="math inline">\(K=A\cap F_{n,m}\)</span> 即得 <span class="math inline">\(\mu(A)\le \mu(K)+2\varepsilon\)</span>，令 <span class="math inline">\(\varepsilon\downarrow0\)</span> 即可。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
64.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(E=\big(\prod_{t\in F}E_t\big)\times
X_{-F}\)</span> 为有限维可测矩形，<span class="math inline">\(F\)</span>
有限，<span class="math inline">\(E_t\in\Sigma_t\)</span>。对任意 <span class="math inline">\(\varepsilon&gt;0\)</span>，存在紧集 <span class="math inline">\(K_t\subset E_t\)</span> 使 <span class="math display">\[
C:=\Big(\prod_{t\in F}K_t\Big)\times X_{-F}\subset E,\qquad P(E)\le
P(C)+\varepsilon .
\]</span></p>
</div>
<p>证明：令 <span class="math inline">\(Q_t\)</span> 为 <span class="math inline">\(P_F\)</span> 的第 <span class="math inline">\(t\)</span> 坐标边缘。由上引理，取紧 <span class="math inline">\(K_t\subset E_t\)</span> 使 <span class="math inline">\(Q_t(E_t)\le
Q_t(K_t)+\varepsilon/|F|\)</span>。由联合到边缘的粗估计得 <span class="math inline">\(P(E)-P(C)\le \sum_{t\in
F}\big(Q_t(E_t)-Q_t(K_t)\big)&lt;\varepsilon\)</span>。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
64.3</span>.</span><span class="statement-spah"> </span>记 <span class="math display">\[
\mathcal C=\Big\{\Big(\prod_{t\in F}K_t\Big)\times X_{-F}: F\subset T\
\text{有限},\ K_t\subset X_t\ \text{紧}\Big\}\subset\mathcal A .
\]</span> 则对任意有限维可测矩形 <span class="math inline">\(E\)</span>
与任意 <span class="math inline">\(\varepsilon&gt;0\)</span>，有 <span class="math display">\[
P(E)=\sup\{P(C): C\in\mathcal C,\ C\subset E\}.
\]</span></p>
</div>
<p>证明：由上一个引理取紧矩形 <span class="math inline">\(C\subset
E\)</span> 使差值小于 <span class="math inline">\(\varepsilon\)</span>，取上确界即得。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
64.4</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(\{C_n\}_{n\ge1}\subset\mathcal C\)</span> 且 <span class="math inline">\(\bigcap_{n\ge1}C_n=\varnothing\)</span>，则存在
<span class="math inline">\(N\)</span> 使 <span class="math inline">\(\bigcap_{n=1}^NC_n=\varnothing\)</span>。</p>
</div>
<p>证明：写作 <span class="math inline">\(C_n=\big(\prod_{t\in
F_n}K_{n,t}\big)\times X_{-F_n}\)</span>，令 <span class="math inline">\(J=\bigcup_n F_n\)</span>（可数）。则 <span class="math display">\[
\bigcap_{n\ge1}C_n=\Big(\prod_{t\in J}\bigcap_{n:\,t\in
F_n}K_{n,t}\Big)\times X_{-J}.
\]</span> 若左端为空，则存在 <span class="math inline">\(t_0\in
J\)</span> 使 <span class="math inline">\(\bigcap_{n:\,t_0\in
F_n}K_{n,t_0}=\varnothing\)</span>。因紧集族满足有限交性质，存在有限子族已交空，对应得到某个有限
<span class="math inline">\(N\)</span> 使 <span class="math inline">\(\bigcap_{n=1}^NC_n=\varnothing\)</span>。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
64.5</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(E_n\downarrow\varnothing\)</span> 于 <span class="math inline">\(\mathcal A\)</span>，则 <span class="math inline">\(P(E_n)\downarrow0\)</span>。</p>
</div>
<p>证明：给定 <span class="math inline">\(\varepsilon&gt;0\)</span>，由内逼近引理取 <span class="math inline">\(C_n\in\mathcal C\)</span>，<span class="math inline">\(C_n\subset E_n\)</span>，且 <span class="math inline">\(P(E_n)\le P(C_n)+\varepsilon 2^{-n}\)</span>。若
<span class="math inline">\(\bigcap_n C_n\ne\varnothing\)</span> 则与
<span class="math inline">\(E_n\downarrow\varnothing\)</span>
矛盾，据上引理得某个 <span class="math inline">\(N\)</span> 使 <span class="math inline">\(\bigcap_{n=1}^NC_n=\varnothing\)</span>。由有限可加性与单调性，
<span class="math display">\[
0=P\Big(\bigcap_{n=1}^N C_n\Big)\ge
\sum_{n=1}^N\big(P(C_n)-P(E_{n+1})\big).
\]</span> 令 <span class="math inline">\(N\to\infty\)</span> 并代入
<span class="math inline">\(P(E_n)\le P(C_n)+\varepsilon 2^{-n}\)</span>
得 <span class="math inline">\(\limsup_n P(E_n)\le
\varepsilon\)</span>，再令 <span class="math inline">\(\varepsilon\downarrow0\)</span> 即得 <span class="math inline">\(P(E_n)\downarrow0\)</span>。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
64.6</span>.</span><span class="statement-spah"> </span>上述 <span class="math inline">\(P\)</span> 在柱状代数 <span class="math inline">\(\mathcal A\)</span> 上可数可加，故由 Carathéodory
定理存在唯一扩张 <span class="math inline">\(\overline P\)</span> 于
<span class="math inline">\(\sigma(\mathcal A)=\bigotimes_{t\in
T}\Sigma_t\)</span>，并满足对每个有限 <span class="math inline">\(F\)</span> 有 <span class="math inline">\(\overline P\circ\pi_F^{-1}=P_F\)</span>。</p>
</div>
<h1 id="path-space">✅ 38.1 Path Space</h1>
<p>设 <span class="math inline">\(\Omega\)</span> 是一个集合，<span class="math inline">\(\mathcal C\subset\mathcal P(\Omega)\)</span>
任意一族集合 （可以是不可数的）。记 <span class="math inline">\(\sigma(\mathcal C)\)</span> 为由它生成的 <span class="math inline">\(\sigma\)</span>-代数。</p>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
65.1</span>.</span><span class="statement-spah"> </span>对任意 <span class="math inline">\(A\in\sigma(\mathcal
C)\)</span>，都存在一个<strong>可数子族</strong> <span class="math inline">\(\mathcal C_A\subset\mathcal C\)</span>，使得 <span class="math display">\[A\in\sigma(\mathcal C_A).\]</span></p>
</div>
<p>也就是说：<strong>每一个可测集合，只需要可数多个生成元就够了。</strong></p>
<p><strong>证明</strong>：定义 <span class="math display">\[
\mathcal D := \{A\subset\Omega:\ \exists\text{可数 } \mathcal
C_0\subset\mathcal C,\ A\in\sigma(\mathcal C_0)\}.\]</span></p>
<ol type="1">
<li><p><span class="math inline">\(\mathcal C\subset\mathcal
D\)</span>： 对任意 <span class="math inline">\(E\in\mathcal
C\)</span>，取 <span class="math inline">\(\mathcal
C_0=\{E\}\)</span>（显然是可数的）， 那么 <span class="math inline">\(E\in\sigma(\mathcal C_0)\)</span>，所以 <span class="math inline">\(E\in\mathcal D\)</span>。</p></li>
<li><p><span class="math inline">\(\mathcal D\)</span> 是一个 <span class="math inline">\(\sigma\)</span>-代数：</p>
<ul>
<li>若 <span class="math inline">\(A\in\mathcal D\)</span>，由某个可数
<span class="math inline">\(\mathcal C_0\)</span> 生成， 那 <span class="math inline">\(A^c\in\sigma(\mathcal C_0)\)</span>，故 <span class="math inline">\(A^c\in\mathcal D\)</span>。</li>
<li>若 <span class="math inline">\(A_n\in\mathcal
D\)</span>，各自对应可数 <span class="math inline">\(\mathcal
C_n\)</span>， 取 <span class="math inline">\(\mathcal
C'=\bigcup_n\mathcal C_n\)</span>， 可数个可数集的并仍然是可数，所以
<span class="math inline">\(\mathcal C'\)</span> 可数； 每个 <span class="math inline">\(A_n\in\sigma(\mathcal C_n)\subset\sigma(\mathcal
C')\)</span>， 因而 <span class="math inline">\(\bigcup_n
A_n\in\sigma(\mathcal C')\)</span>，故 <span class="math inline">\(\bigcup_n A_n\in\mathcal D\)</span>。</li>
</ul></li>
</ol>
<p>由 1 和 2：<span class="math inline">\(\mathcal D\)</span> 是一个
<span class="math inline">\(\sigma\)</span>-代数且包含 <span class="math inline">\(\mathcal C\)</span>，所以 <span class="math inline">\(\sigma(\mathcal C)\subset\mathcal D\)</span>。</p>
<p>另一方面，对任何 <span class="math inline">\(A\in\mathcal
D\)</span>，有 <span class="math inline">\(A\in\sigma(\mathcal
C_0)\subset\sigma(\mathcal C)\)</span>，所以 <span class="math inline">\(\mathcal D\subset\sigma(\mathcal C)\)</span>。</p>
<p>于是 <span class="math inline">\(\mathcal D = \sigma(\mathcal
C)\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<p>在路径空间里面，<span class="math inline">\(\mathcal C\)</span>
可以取为所有的有限维柱集，它们生成了乘积空间上的 <span class="math inline">\(\sigma\)</span>- 域 <span class="math inline">\(\mathcal{B}^{\otimes
T}\)</span>。所以这里面任何可测集实际上只依赖于可数多个有限维柱集，从而只依赖于可数多个坐标。于是像
<span class="math inline">\(\{\omega(t)\text{ is continous}\}\)</span>
这种依赖不可数多个坐标的事件就不可能在乘积 <span class="math inline">\(\sigma\)</span>- 域里面。</p>
<p>在独立增量过程的情形，转移概率核为 <span class="math display">\[q_{s,t}(x, B) = \mathbb{E}[\mathbb{1}_B(x + X_t -
X_s)].\]</span> 这是因为 <span class="math display">\[\mathbb{P}(X_t\in
B\mid X_s = x) = \mathbb{P}((X_t - X_s) + x\in B).\]</span></p>
<h1 id="time-homogeneous-markov-processes">38.2 Time Homogeneous Markov
Processes</h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
66.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(X\)</span> 是齐次 Markov 链，<span class="math inline">\(F\in\mathcal{B}(\mathcal{S}^{\otimes
T})\)</span>，则 <span class="math display">\[x\to
\mathbb{E}^x[F(X)]\]</span> 是可测函数。进一步，对任何初始分布 <span class="math inline">\(\nu_0\)</span>， <span class="math display">\[\mathbb{E}^{\nu_0}[F(X_{t+})\mid\mathcal{F}_t] =
\mathbb{E}^{\nu_0}[F(X_{t+})\mid
X_t]=\mathbb{E}^{X_t}[F(X)].\]</span></p>
</div>
<p>注意这里第一个断言不需要齐次性质。但是第二个是需要的。</p>
<p>这个定理的意义是，记 <span class="math inline">\(g(x)
=\mathbb{E}^x[F(X)]\)</span>，根据第一个断言这是关于 <span class="math inline">\(x\)</span> 的可测函数，则第二个断言说： <span class="math display">\[g(X_t) = \mathbb{E}^{X_t}[F(X)].\]</span></p>
<p><strong>证明</strong>：2 的前半部分是 36.1 节 Markov property
中的内容。下面只要证 1 和 2 的后半部分。</p>
<p>设 <span class="math inline">\(0=t_0&lt;t_1&lt;\cdots&lt;t_n\)</span>，<span class="math inline">\(F\)</span> 形如 <span class="math display">\[F(\omega)=\prod_{k=0}^nf_k(\omega(t_k)).\]</span>
我们将对这样的 <span class="math inline">\(F\)</span> 证明，然后使用
Dynkin 的函数形式引理。</p>
<ol type="1">
<li>对这样的 <span class="math inline">\(F\)</span> 有 <span class="math display">\[\mathbb{E}^x[F(X)] = \mathbb{E}^x[\prod_{k=0}^n
f_k(X_{t_k})]=\int \delta_x\,\mathrm{d}x\int
q_{t_0,t_1}(x_0,\,\mathrm{d}x_1)\cdots\int
q_{t_{n-1},t_n}(x_{n-1},\,\mathrm{d}x_n)\prod_{k=0}^nf(x_k).\]</span>
上式等于 <span class="math display">\[\mathbb{E}_{\delta_x}[f_0Q_{t_0,t_1}(\cdots
f_{n-1}(Q_{t_{n-1},t_n}f_n)\cdots)]=f_0(x)Q_{t_0,t_1}(\cdots
f_{n-1}(Q_{t_{n-1},t_n}f_n)\cdots)(x).\]</span> 没问题。</li>
<li>还是取 <span class="math display">\[0=t_0&lt;t_1&lt;\dots&lt;t_n,\quad
F(\omega)=\prod_{k=0}^n f_k(\omega(t_k)).\]</span> 则 <span class="math display">\[F(X_{t+})=\prod_{k=0}^n
f_k\big(X_{t+t_k}\big).\]</span> 设 <span class="math inline">\(s_k=t+t_k\)</span>，于是 <span class="math display">\[t=s_0&lt;s_1&lt;\dots&lt;s_n,\quad
F(X_{t+})=\prod_{k=0}^n f_k(X_{s_k}).\]</span> 固定 <span class="math inline">\(x\)</span>，考虑从时间 <span class="math inline">\(t\)</span> 开始、初值为 <span class="math inline">\(x\)</span> 的链 <span class="math inline">\((X_{t+s})_{s\ge0}\)</span>。对这个过程，用 1
里已经写出的公式（只是把 <span class="math inline">\(t_0\)</span> 从 0
换成 <span class="math inline">\(t\)</span>）得到： <span class="math display">\[\mathbb{E}^x\Big[\prod_{k=0}^n f_k(X_{s_k})\Big]=
f_0(x)\,Q_{s_0,s_1}\Big(f_1\,Q_{s_1,s_2}(\cdots
f_{n-1}(Q_{s_{n-1},s_n}f_n)\cdots)\Big)(x).\]</span> 注意这里 <span class="math inline">\(s_0=t,s_1=t+t_1,\dots\)</span>。</li>
</ol>
<p>由于链是齐次的，所以 <span class="math inline">\(Q_{s_{k-1},s_k}=Q_{t_{k-1},t_k}\)</span> 对所有
<span class="math inline">\(k\)</span> 成立，于是上面的式子化简为 <span class="math display">\[\mathbb{E}^x[F(X_{t+})]
= f_0(x)\,Q_{t_0,t_1}\Big(f_1\,Q_{t_1,t_2}(\cdots
f_{n-1}(Q_{t_{n-1},t_n}f_n)\cdots)\Big)(x).\]</span></p>
<p>但右边正是第 1 点中得到的 <span class="math inline">\(\mathbb{E}^x[F(X)]\)</span>
的表达式。所以我们得到一个关键等式： <span class="math display">\[\mathbb{E}^x[F(X_{t+})]=\mathbb{E}^x[F(X)]=g(x)\]</span>
对所有 <span class="math inline">\(x\)</span> 均成立。</p>
<p>也就是说：<strong>从时刻 (t)</strong> 往后的整条“未来路径”的分布与“从
0 开始、初值为 <span class="math inline">\(x\)</span>”的那条链是一样的，这一步用到了齐次性。
由 36.1 的 Markov 性质，我们已经知道存在某个可测函数 <span class="math inline">\(h\)</span> 使得 <span class="math display">\[\mathbb{E}^{\nu_0}[F(X_{t+})\mid
X_t]=h(X_t).\]</span> 并且按定义有 <span class="math display">\[h(x)=\mathbb{E}^x[F(X_{t+})].\]</span></p>
<p>第一步刚刚证明了 <span class="math inline">\(\mathbb{E}^x[F(X_{t+})]=\mathbb{E}^x[F(X)]=g(x)\)</span>，因此
<span class="math display">\[h(x)=g(x),\quad\forall x.\]</span> 从而
<span class="math display">\[\mathbb{E}^{\nu_0}[F(X_{t+})\mid
X_t]=g(X_t)=\mathbb{E}^{X_t}[F(X)].\]</span>
这就完成了第二点的后半部分，对柱状 <span class="math inline">\(F\)</span> 成立。</p>
<h1 id="markov-matrix">✅ 39.1 Markov Matrix</h1>
<p>无要点</p>
<h1 id="markov-generator">✅ 39.2 Markov Generator</h1>
<p>这一讲介绍了，Chapman-Kolmogorov 方程给出的算子方程 <span class="math display">\[Q_{t+s}=Q_tQ_s,\quad Q_0=I.\]</span> 其解应该形如
<span class="math inline">\(Q = \exp(tA)\)</span>，其中 <span class="math inline">\(A\)</span> 是某个有界算子。</p>
<p><span class="math inline">\(A\)</span> 不难猜出来，它就是 <span class="math display">\[A = \lim_{t\to 0}\frac{\mathrm
d}{\mathrm{d}t}Q_t\bigg|_{t=0}.\]</span></p>
<h1 id="operator-norm-continuity">✅ 40.1 Operator Norm Continuity</h1>
<p>介绍了一些泛函中关于算子范数的内容（这里不再整理）。还介绍了可数情形的算子，如果算子可以用矩阵的形式表示时，算子的范数。</p>
<p>如果 <span class="math inline">\(a=(a_{ij})\)</span> 满足</p>
<p><span class="math display">\[\|a\|=\sup_{i}\sum_{j}|a_{ij}|&lt;\infty.\]</span></p>
<p>那么由 <span class="math display">\[Af(i) = \sum_j
a_{ij}f(j)\]</span> 定义的算子是有界算子，并且 <span class="math inline">\(\|A\|=\|a\|\)</span>。</p>
<h1 id="bounded-generators">✅ 40.2 Bounded Generators</h1>
<p>设 <span class="math inline">\(B_b(S)\)</span> 是测度空间 <span class="math inline">\((S,\mathcal B)\)</span> 上有界可测函数的 Banach
空间，范数为 <span class="math inline">\(\|f\|_\infty\)</span>。 <span class="math inline">\((Q_t)_{t\ge0}\)</span> 是一族 <strong>Markov
迁移算子</strong>，也就是：</p>
<ul>
<li>每个 <span class="math inline">\(Q_t : B_b(S)\to B_b(S)\)</span>
是线性的、正的；</li>
<li><span class="math inline">\(Q_t\mathbf 1=\mathbf 1\)</span>；</li>
<li>半群性质：<span class="math inline">\(Q_{t+s}=Q_tQ_s\)</span>，<span class="math inline">\(Q_0=I\)</span>（恒等算子）。</li>
</ul>
<p>因为 <span class="math inline">\(Q_t\)</span> 是 Markov 算子，在
<span class="math inline">\(\|\cdot\|_\infty\)</span>
下都是压缩映射，<span class="math inline">\(\|Q_t\|_{\mathrm{op}}\le
1\)</span>。</p>
<p>假设再多一点正则性：</p>
<p><span class="math display">\[\lim_{t\downarrow 0}\|Q_t -
I\|_{\mathrm{op}} = 0.\]</span></p>
<p>这叫“在 <span class="math inline">\(t=0\)</span>
的算子范数连续”，也就是很小时间步 <span class="math inline">\(t\)</span>
对任意有界可测函数几乎“不做事”。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
70.1</span>.</span><span class="statement-spah">
</span>在上述假设下，存在一个有界线性算子 <span class="math display">\[A
= \lim_{t\downarrow0}\frac{Q_t - I}{t}\]</span>
（极限在算子范数意义下存在），并且对所有 <span class="math inline">\(t\ge0\)</span>, <span class="math display">\[Q_t =
e^{tA} := \sum_{n=0}^\infty \frac{t^n}{n!} A^n.\]</span>
级数在算子范数下收敛。</p>
<p>从而 <span class="math inline">\(t\mapsto Q_t\)</span> 在 <span class="math inline">\([0,\infty)\)</span> 上在算子范数意义下可微，并满足
<span class="math display">\[\frac{d}{dt}Q_t = Q_tA = AQ_t, \qquad
Q_0=I.\]</span> 这是 Kolmogorov 的正向 / 反向方程的算子形式。</p>
</div>
<p><strong>证明</strong>：<strong>第一步：从 <span class="math inline">\(0\)</span> 点连续到各点连续</strong></p>
<p>利用半群性质和 <span class="math inline">\(\|Q_t\|\le1\)</span>，先说明：只要在 <span class="math inline">\(0\)</span> 点算子范数连续，则在每个 <span class="math inline">\(t\)</span>
都算子范数连续，并且在每个有限区间上一致连续。</p>
<p>对任意固定 <span class="math inline">\(s\ge0\)</span> 以及 <span class="math inline">\(h&gt;0\)</span>，由半群性质有 <span class="math display">\[
Q_{s+h}-Q_s=Q_sQ_h-Q_s=Q_s(Q_h-I).
\]</span> 于是 <span class="math display">\[\|Q_{s+h}-Q_s\|
\le\|Q_s\|\cdot\|Q_h-I\|
\le\|Q_h-I\|.\]</span> 由已知 <span class="math inline">\(\|Q_h-I\|\to0\)</span>，得出 <span class="math inline">\(t\mapsto Q_t\)</span> 在任意 <span class="math inline">\(s\)</span> 处右连续。类似地，由 <span class="math display">\[
Q_s-Q_{s-h}=Q_{s-h}(Q_h-I)
\]</span> 得到左连续。故 <span class="math inline">\(t\mapsto
Q_t\)</span> 在每个 <span class="math inline">\(t\ge0\)</span>
都算子范数连续。 再注意到上述估计与 <span class="math inline">\(s\)</span> 无关，可知在任意有限区间 <span class="math inline">\([0,T]\)</span> 上 <span class="math inline">\(t\mapsto Q_t\)</span> 一致连续。</p>
<p><strong>第二步：定义平滑算子 <span class="math inline">\(B_\varepsilon\)</span> 并证明其可逆</strong></p>
<p>固定 <span class="math inline">\(\varepsilon&gt;0\)</span>，定义有界算子 <span class="math display">\[B_\varepsilon=\frac{1}{\varepsilon}\int_0^\varepsilon
Q_s\,\mathrm{d}s.
\]</span> 即对 <span class="math inline">\(f\in B_b(S)\)</span> 和 <span class="math inline">\(x\in S\)</span>， <span class="math display">\[
(B_\varepsilon f)(x)=\frac{1}{\varepsilon}\int_0^\varepsilon
Q_sf(x)\,\mathrm{d}s.
\]</span></p>
<p>由于对任意 <span class="math inline">\(f\in B_b(S)\)</span>，有 <span class="math display">\[
\|Q_{s+h}f-Q_sf\|_\infty\le\|Q_{s+h}-Q_s\|
\|f\|_\infty\xrightarrow[h\to0]{}0.
\]</span> 所以对每个 <span class="math inline">\(x\in S\)</span>，函数
<span class="math display">\[
s\longmapsto Q_sf(x)
\]</span> 在每个 <span class="math inline">\(s\)</span>
处连续，从而可积，上式定义良好。并且 <span class="math display">\[
\|B_\varepsilon\|\le\frac{1}{\varepsilon}\int_0^\varepsilon\|Q_s\|\,\mathrm{d}s\le1.
\]</span></p>
<p>注意到 <span class="math display">\[B_\epsilon Q_t f =
\frac{1}{\epsilon}\int_0^\epsilon Q_{t+s}f\,\mathrm{d}s.\]</span> 即
<span class="math display">\[B_\epsilon Q_t  =
\frac{1}{\epsilon}\int_0^\epsilon Q_{t+s}\,\mathrm{d}s =
\frac{1}{\epsilon}\int_t^{t+\epsilon} Q_{s}\,\mathrm{d}s.\]</span>
所以函数 <span class="math inline">\(t\to B_\epsilon Q_t\)</span>
是可微的，其导数为 <span class="math display">\[\frac{\mathrm
d}{\mathrm{d}t} (B_\epsilon Q_t) = \frac{Q_{t+\epsilon}-Q_t}{\epsilon}
\]</span></p>
<h1 id="hitting-times">42.2 Hitting Times</h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
71.1</span>.</span><span class="statement-spah"> </span><span class="math display">\[\mathbb{E}^x[F(X)] = \int_S
q(x,\,\mathrm{d}y)\mathbb{E}^y[F(x, X)].\]</span></p>
</div>
<h1 id="invariant-distributions">✅ 44.2 Invariant Distributions</h1>
<h1 id="stopping-times">✅ 45.1 Stopping Times</h1>
<p>关于停时的基本知识，无要点。</p>
<h1 id="the-strong-markov-property">✅ 46.1 The Strong Markov
Property</h1>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
74.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\nu\)</span> 是 Markov 链的初始分布，<span class="math inline">\(\tau\)</span> 是停时，则 <span class="math display">\[\mathbb{E}^\nu[F(X_{\tau+})\mid\mathcal F_\tau] =
\mathbb{E}^x [F(X)]\Big|_{x=X_\tau},\quad \text{a.e. on
}\{\tau&lt;\infty\}.\]</span></p>
</div>
<p><strong>证明</strong>： <span class="math display">\[\begin{aligned}
\mathbb{E}^\nu[F(X_{\tau+})\mid\mathcal
F_\tau]\mathbb{1}_{\{\tau&lt;\infty\}}&amp;=\sum_{n=0}^\infty
\mathbb{E}^\nu[F(X_{\tau+})\mid\mathcal F_n]\mathbb{1}_{\{\tau=n\}}\\
&amp;=\sum_{n=0}^\infty
\mathbb{E}^\nu[F(X_{\tau+})\mathbb{1}_{\{\tau=n\}}\mid\mathcal F_n]\\
&amp;=\sum_{n=0}^\infty \underbrace{\mathbb{E}^\nu[F(X_{n+})\mid\mathcal
F_n]}_{\mathbb{E}^x [F(X)]\Big|_{x=X_n}}\mathbb{1}_{\{\tau=n\}}.
\end{aligned}\]</span> 即如果令 <span class="math inline">\(g(x)=\mathbb{E}^x[F(X)]\)</span>，则 <span class="math display">\[\text{The above }=\sum_{n=0}^\infty
g(X_n)\mathbb{1}_{\{\tau=n\}}=g(X_\tau)\mathbb{1}_{\{\tau&lt;\infty\}}.\]</span>
<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
74.2</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\((X_n)_{n\ge0}\)</span> 是一个取值在离散空间 <span class="math inline">\(S\)</span> 中的 Markov 链。对任何 <span class="math inline">\(x\in S\)</span>，对 <span class="math inline">\(A_x=\{\tau&lt;\infty,X_\tau=x\}\)</span>
取条件，则 <span class="math inline">\(\mathcal F_\tau\)</span> 和 <span class="math inline">\(X_{\tau + n}\)</span> 是独立的，且 <span class="math inline">\((X_{\tau + n})\)</span> 和 <span class="math inline">\((X_n)\)</span> 有相同的分布。</p>
</div>
<p><strong>证明</strong>：设 <span class="math inline">\(Y\in\mathbb{B}(\Omega,\mathcal
F_\tau)\)</span>，则 <span class="math display">\[\begin{aligned}
\mathbb{E}^\nu[F(X_{\tau+})\,Y\mathbb{1}_{A_x}]&amp;=\mathbb{E}^\nu[\mathbb{E}[F(X_{\tau+})\mid\mathcal
F_\tau]\,Y\mathbb{1}_{A_x}]\\
&amp;\overset{\text{strong Markov
property}}{=}\mathbb{E}^\nu[\mathbb{E}^{X_\tau}[F(X)]\,Y\mathbb{1}_{A_x}]\\
&amp;\overset{\mathbb{E}^x[F(X)]\text{ is a
scalar}}{=}\mathbb{E}^x[F(X)]\cdot \mathbb{E}^\nu[Y\mathbb{1}_{A_x}].
\end{aligned}\]</span> 两边同时除以 <span class="math inline">\(\mathbb{P}^\nu(A_x)\)</span> 可得 <span class="math display">\[\mathbb{E}^\nu[F(X_{\tau+})Y \mid A_x] =
\mathbb{E}^x[F(X)]\cdot \mathbb{E}^\nu[Y\mid A_x].\]</span></p>
<p>特别地，取 <span class="math inline">\(Y\equiv1\)</span>，得 <span class="math display">\[\mathbb E^\nu[F(X_{\tau+})\mid A_x]=\mathbb
E^x[F(X)].\]</span> 所以在事件 <span class="math inline">\(A_x\)</span>
条件下， <span class="math display">\[(X_{\tau+}) \overset{d}{=} (X) \
\text{under }\mathbb{P}^x.\]</span> 不仅如此，代入以后我们还有对任意有界
<span class="math inline">\(Y\in\mathcal F_\tau\)</span> 与任意未来泛函
<span class="math inline">\(F\)</span>，都有乘积分解： <span class="math display">\[\mathbb{E}^\nu[F(X_{\tau+})\,Y\mathbb{1}_{A_x}]=\mathbb{E}^\nu[F(X_{\tau+})\mathbb{1}_{A_x}]\cdot\mathbb{E}^\nu[Y\mathbb{1}_{A_x}].\]</span>
这表明在 <span class="math inline">\(\mathbb P^\nu(\cdot\mid
A_x)\)</span> 下 <span class="math inline">\(\mathcal F_\tau\)</span> 与
<span class="math inline">\(\sigma(X_{\tau+n},n\ge0)\)</span>
条件独立。<span class="math inline">\(\blacksquare\)</span></p>
<h1 id="markov-chain-ergodic-theorem">46.2 Markov Chain Ergodic
Theorem</h1>
<div id="------------" class="statement sta_____ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">遍历定理</span>.</span><span class="statement-spah"> </span>令 <span class="math inline">\(V_j(N)\)</span> 为前 <span class="math inline">\(N\)</span> 个时刻访问状态 <span class="math inline">\(j\)</span> 的次数： <span class="math display">\[V_j(N)=\sum_{n=0}^N
\mathbb{1}_{\{X_n=j\}}.\]</span> 则 <span class="math display">\[\lim_{N\to\infty}\frac{V_j(N)}{N}=\frac{1}{\mathbb{E}^i[\tau_i]}=1,\
\text{a.e.}\quad \forall i,j.\]</span></p>
</div>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
75.1</span>.</span><span class="statement-spah"> </span><span class="math display">\[\sigma_j^{(1)}=\inf\{n\ge 1: X_n=j\}.\]</span>
<span class="math display">\[\sigma_j^{(n)}=\inf\{n\ge 1:
X_{n+\sigma_j^{(n-1)}}=j\}.\]</span></p>
</div>
<div class="statement lemma plain">
<p><span class="statement-heading"><span class="statement-label">引理
75.2</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\{\sigma_j^{(n)}\}_{n=1}^\infty\)</span> 是 i.i.d
序列。</p>
</div>
<p>证明：定义 <span class="math inline">\(\tau_j^{(0)}=0\)</span>，
<span class="math display">\[\tau_j^{(n)}=\inf\{n&gt;\tau_{j-1}^{(n)}:\
X_n=j\}.\]</span> 注意到 <span class="math display">\[\sigma_j^({n+1})(X_0,X_1,\ldots) =
\sigma_j^{(1)}(X_{\tau_j^{(n)}},X_{\tau_j^{(n)}+1},\ldots).\]</span></p>
<h1 id="walds-identity">✅ 46.3 Wald’s Identity</h1>
<p>本讲介绍了 Wald 引理。</p>
<div id="wald-------" class="statement sta_wald___ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Wald
引理</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\(\{X_n\}\)</span> 是 <span class="math inline">\(\mathrm{i.i.d}\)</span> 的随机变量序列，<span class="math inline">\(\tau\)</span> 是一个停时，则在 <span class="math inline">\(\mathbb{E}|X_1|&lt;\infty\)</span> 且 <span class="math inline">\(\mathbb{E}\tau&lt;\infty\)</span> 的条件下有 <span class="math inline">\(\mathbb{E}\sum\limits_{n=1}^\tau
X_n=\mathbb{E}X_1\cdot \mathbb{E}\tau\)</span>。</p>
</div>
<p>这里的关键在于将上面的求和变成一个二重级数求和，然后交换求和次序。</p>
<p><span class="math display">\[\begin{aligned}
\sum_{n=1}^\tau\mathbb{E}X_n&amp;=\sum_{n=1}^\infty\mathbb{E}X_n\cdot
\mathbb{1}_{\tau\geq
n}=\sum_{n=1}^\infty\mathbb{E}X_n\cdot\sum_{k=n}^\infty\mathbb{1}_{\tau=k}\\&amp;=\sum_{k=1}^\infty\mathbb{1}_{\tau=k}\sum_{n=1}^k\mathbb{E}X_n\\&amp;=\mathbb{E}X_1\sum_{k=1}^\infty
k\cdot\mathbb{1}_{\tau=k}\\&amp;=\mathbb{E}X_1\cdot
\mathbb{E}\tau.\end{aligned}\]</span></p>
<p>我们为什么可以在第一行的第二个等号处交换求和次序？这是因为上面的推导对
<span class="math inline">\(|X_n|\)</span> 是成立的，并且离散积分值
<span class="math inline">\(\mathbb{E}|X_1|\cdot\mathbb{E}\tau&lt;\infty\)</span>，所以由控制收敛定理对原序列
<span class="math inline">\(X_n\)</span> 交换求和也是 OK 的。</p>
<h1 id="uniform-integrability">✅ 48.1 Uniform Integrability</h1>
<p>这一讲介绍了随机变量集合的一致可积性，要点非常多。</p>
<p>对任何 <span class="math inline">\(L^1\)</span> 的随机变量 <span class="math inline">\(X\)</span>，总是可以找一个紧集 <span class="math inline">\(K\)</span>，使得 <span class="math inline">\(|X|\)</span> 在 <span class="math inline">\(K^c\)</span> 上的积分任意小：对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，存在 <span class="math inline">\(a&gt;0\)</span> 使得 <span class="math inline">\(\mathbb{E}[|X|:\ |X|\geq
a]&lt;\epsilon\)</span>。但是如果是一族可积的随机变量的话，这个统一的
<span class="math inline">\(a\)</span> 就未必存在了。</p>
<p>如果这样的 <span class="math inline">\(a\)</span>
总是存在的话，我们就称这族随机变量是一致可积的。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
77.1</span>.</span><span class="statement-spah"> </span>随机变量列 <span class="math inline">\(\{X_n\}\)</span> 称作是一致可积的 (UI)
的，如果它们满足以下条件：</p>
<ol type="1">
<li>每个 <span class="math inline">\(X_i\)</span> 都是 <span class="math inline">\(L^1\)</span> 的。</li>
<li>对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，存在
<span class="math inline">\(a&gt;0\)</span> 使得 <span class="math inline">\(\sup_n\mathbb{E}[X_n:\ |X_n|\geq a]&lt;
\epsilon\)</span>。</li>
</ol>
</div>
<p>不难验证如果 <span class="math inline">\(\{X_n\}\)</span>
被一个可积随机变量控制，则它们是一致可积的：</p>
<div class="statement example definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">例</span>：</span><span class="statement-spah">
</span>如果 <span class="math inline">\(|X_n|\leq Y,\ Y\in
L^1\)</span>，则 <span class="math inline">\(\{X_n\}\)</span>
是一致可积的。</p>
</div>
<p>这是因为被积函数和积分区域都可以放大：<span class="math inline">\(\mathbb{E}[|X_n|:\ |X_n|\geq
a]\leq\mathbb{E}[|Y|:\ |Y|\geq a]\)</span>。</p>
<div class="statement example definition unnumbered">
<p><span class="statement-heading"><span class="statement-label">例</span>：</span><span class="statement-spah">
</span>如果 <span class="math inline">\(\{X_n\}\)</span> 是 <span class="math inline">\(L^p,\,p&gt;1\)</span> 一致有界的：<span class="math inline">\(\sup_n\mathbb{E}|X_n|^p&lt;\infty\)</span>，则
<span class="math inline">\(\{X_n\}\)</span> 是一致可积的。</p>
</div>
<p>这是因为被积函数可以放大： <span class="math display">\[\mathbb{E}[|X|: |X|\geq a]\leq
\mathbb{E}[|X|\cdot\frac{|X|^{p-1}}{a^{p-1}}: |X|\geq a] =
\frac{1}{a^{p-1}}\mathbb{E}[|X|^p: |X|\geq a]\leq
\frac{M}{a^{p-1}}.\]</span></p>
<p>这个例子中的 <span class="math inline">\(p&gt;1\)</span> 是不能减弱为
<span class="math inline">\(p\geq1\)</span> 的。不过我们可以证明 UI
的变量族必然是 <span class="math inline">\(L^1\)</span> 一致有界的：</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
77.2</span>.</span><span class="statement-spah"> </span>若 <span class="math inline">\(\{X_n\}\)</span> 一致可积，则 <span class="math inline">\(\sup_n E|X_n| &lt;\infty\)</span>。</p>
</div>
<p><strong>证明</strong>：取 <span class="math inline">\(a\)</span> 使得
<span class="math inline">\(\sup_n \mathbb{E}[|X_n|: |X_n|\geq a] &lt;
1\)</span>，则不难证明 <span class="math inline">\(\mathbb{E}|X_n| &lt;
a+1\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<p>现在我们来给出一致绝对连续的概念，并将说明<strong>一致可积 = <span class="math inline">\(L^1\)</span> 一致有界 +
一致绝对连续</strong>。</p>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
77.3</span>.</span><span class="statement-spah"> </span>随机变量序列
<span class="math inline">\(\{X_n\}\)</span>
是一致绝对连续的，如果对任何 <span class="math inline">\(\epsilon&gt;0\)</span>，都存在 <span class="math inline">\(\delta&gt;0\)</span>，使得只要集合 <span class="math inline">\(B\)</span> 满足 <span class="math inline">\(\mu(B)&lt;\delta\)</span>，就有 <span class="math inline">\(\sup_n\mathbb{E}[|X_n|:
B]&lt;\epsilon\)</span>。</p>
</div>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
77.4</span>.</span><span class="statement-spah"> </span><span class="math inline">\(\{X_n\}\)</span> 一致可积当且仅当它们 <span class="math inline">\(L^1\)</span> 一致有界且一致绝对连续。</p>
</div>
<p><strong>证明</strong>：</p>
<p><span class="math inline">\(\Rightarrow\)</span>: <span class="math inline">\(L^1\)</span>
一致有界已经有了。下证一致绝对连续性质。对任何可测集 <span class="math inline">\(B\)</span>，我们考虑用一个待定的 <span class="math inline">\(a&gt;0\)</span> 把积分 <span class="math inline">\(\mathbb{E}[|X_n|: B]\)</span> 变成 <span class="math display">\[\mathbb{E}[|X_n|: B,\ |X_n|\geq a] +
\mathbb{E}[|X_n|: B,\ |X_n|&lt;a].\]</span> 第一项小于等于 <span class="math inline">\(\mathbb{E}[|X_n|: |X_n|\geq
a]\)</span>，由一致可积性我们可以取 <span class="math inline">\(a\)</span> 使得它小于 <span class="math inline">\(\epsilon/2\)</span>。第二项小于等于 <span class="math inline">\(a\mu(B)\)</span>。所以只要 <span class="math inline">\(\mu(B)&lt;\delta=\frac{\epsilon}{2a}\)</span>
即可。</p>
<p><span class="math inline">\(\Leftarrow\)</span>: 我们可以料想 <span class="math inline">\(\{|X_n|\geq a\}\)</span>
的测度是会一致地越来越小的：</p>
<p><span class="math display">\[\mathbb{P}(\{|X_n|\geq
a\})=\mathbb{E}[1: |X_n|\geq a]\leq \mathbb{E}[\frac{|X_n|}{a}:
|X_n|\geq a]\leq \frac{\mathbb{E}|X_n|}{a}=\frac{K}{a}.\]</span> 其中
<span class="math inline">\(K\)</span> 是 <span class="math inline">\(\{X_n\}\)</span> 的 <span class="math inline">\(L^1\)</span> 上界。所以确实可以取 <span class="math inline">\(a\)</span> 适当大使得 <span class="math inline">\(\{|X_n|\geq a\}\)</span>
的测度一致地小于一致绝对连续性中所需要的那个 <span class="math inline">\(\delta\)</span>。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
77.5</span>.</span><span class="statement-spah">
</span>一致可积性是平移不变的： <span class="math inline">\(\{X_n\}\)</span> 一致可积且 <span class="math inline">\(Y\in L^1\)</span>，则 <span class="math inline">\(\{X_n+Y\}\)</span> 也是一致可积的。</p>
</div>
<p>为此只要证明它们一致 <span class="math inline">\(L^1\)</span>
有界且一致绝对连续。其中一致 <span class="math inline">\(L^1\)</span>
有界是显然的。</p>
<p>对于一致绝对连续，我们有 <span class="math display">\[\mathbb{E}[|X_n+Y|: B]\leq\mathbb{E}[|X_n|:B] +
\mathbb{E}[|Y|: B].\]</span> 取 <span class="math inline">\(\delta_1\)</span> 使得只要 <span class="math inline">\(\mu(B)&lt;\delta_1\)</span> 就有 <span class="math inline">\(\mathbb{E}[|X_n|:B]&lt;\frac{\epsilon}{2}\)</span>，再取
<span class="math inline">\(\delta_2\)</span> 使得只要 <span class="math inline">\(\mu(B)&lt;\delta_2\)</span> 就有 <span class="math inline">\(\mathbb{E}[|Y|:B]&lt;\frac{\epsilon}{2}\)</span>，则
<span class="math inline">\(\delta=\min\{\delta_1,\delta_2\}\)</span>
符合要求。</p>
<p>最后一个重要定理是：<strong>依 <span class="math inline">\(L^1\)</span> 范数收敛 = 一致可积 +
依测度收敛</strong>。</p>
<div class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
77.6</span>.</span><span class="statement-spah"> </span>随机变量序列
<span class="math inline">\(X_n\xrightarrow{L^1} X\)</span> 当且仅当
<span class="math inline">\(X_n\xrightarrow{\mathbb{P}}X\)</span> 且
<span class="math inline">\(\{X_n\}\)</span> 一致可积。</p>
</div>
<p><strong>证明</strong>：</p>
<p><span class="math inline">\(\Rightarrow\)</span>：<span class="math inline">\(L^1\)</span> 收敛当然可以得出依测度收敛 (Markov
不等式一步即得)。要证明一致可积，我们只要根据平移不变性，证明 <span class="math inline">\(Y_n=X_n-X\)</span> 是一致可积的即可。固定 <span class="math inline">\(\epsilon&gt;0\)</span>。取 <span class="math inline">\(N\)</span> 使得 <span class="math inline">\(\sup_{n\ge
N}\mathbb{E}|Y_n|&lt;\epsilon\)</span>，于是对所有 <span class="math inline">\(a&gt;0\)</span>， <span class="math display">\[
\sup_{n\ge N}\mathbb{E}\big[\,|Y_n|\mathbf 1_{\{|Y_n|\ge a\}}\,\big]\le
\sup_{n\ge N}\mathbb{E}|Y_n|&lt;\epsilon.
\]</span> 对有限个指标 <span class="math inline">\(n&lt;N\)</span>，由于每个 <span class="math inline">\(Y_n\in L^1\)</span>，存在 <span class="math inline">\(a\)</span> 足够大使 <span class="math display">\[
\max_{n&lt;N}\mathbb E\big[\,|Y_n|\mathbf 1_{\{|Y_n|\ge
a\}}\,\big]&lt;\epsilon.
\]</span> 综上得到 <span class="math display">\[
\sup_{n}\mathbb E\big[\,|Y_n|\mathbf 1_{\{|Y_n|\ge
a\}}\,\big]&lt;\epsilon
\]</span> 即 <span class="math inline">\(\{Y_n\}\)</span> 一致可积。</p>
<p><span class="math inline">\(\Leftarrow\)</span>: <span class="math inline">\(Y_n\mathbb{1}_{\{|Y_n|&lt;a\}}\)</span>
是一个不大于 <span class="math inline">\(a\)</span>
的函数序列，且依测度收敛到
0，从而由<strong>依测度的控制收敛定理</strong>有 <span class="math inline">\(Y_n\mathbb{1}_{\{|Y_n|&lt;a\}}\xrightarrow{L^1}0\)</span>。
从而 <span class="math display">\[\|X_n-X\|_{L^1} =
\mathbb{E}[Y_n\mathbb{1}_{\{|Y_n|&lt;a\}}] +
\mathbb{E}[Y_n\mathbb{1}_{\{|Y_n|\geq a\}}].\]</span> 第一项取 <span class="math inline">\(n\)</span> 大于某个 <span class="math inline">\(N\)</span> 就可以任意小，第二项对有限多个 <span class="math inline">\(n\le N\)</span>，<span class="math inline">\(a\)</span> 足够大也可以任意小，得证。<span class="math inline">\(\blacksquare\)</span></p>
<div class="statement corollary plain">
<p><span class="statement-heading"><span class="statement-label">推论
77.7</span>.</span><span class="statement-spah"> </span>正则鞅 <span class="math inline">\(X_n = \mathbb{E}[X|\mathcal{F}_n]\)</span>
是一致可积的。</p>
</div>
<p>反过来也是对的：鞅序列如果是一致可积的，则一定是正则鞅。</p>
<h1 id="optional-stopping-and-sampling">49.1 Optional Stopping and
Sampling</h1>
<p>这一节介绍了停时，以及停时鞅序列 <span class="math inline">\(\{X_{n\wedge \tau}\}\)</span> 的性质。</p>
<p>一个简单的股票市场模型：设 <span class="math inline">\(\{X_n\}_{n=0}^\infty\)</span> 是股票价格，<span class="math inline">\(\{U_n\}_{n=1}^\infty\)</span>
是你的投资策略，即在时刻 <span class="math inline">\(n-1\)</span> 买入
<span class="math inline">\(U_n\)</span> 并在时刻 <span class="math inline">\(n\)</span> 抛出。或者说，<span class="math inline">\(U_n\)</span> 是你在 <span class="math inline">\((n-1,n]\)</span>
这个时间区间内的股票交易数量，那么到时刻 <span class="math inline">\(n\)</span> 时，你的净收益为 <span class="math display">\[I_n(U,X) = \sum_{j=1}^n
U_j(X_j-X_{j-1}).\]</span> 这里 <span class="math inline">\(U_n\)</span>
必须是关于 <span class="math inline">\(\mathcal{F}_{n-1}=\sigma(X_0,X_1,\ldots,X_{n-1})\)</span>
可测。</p>
<p>第一个重要观察是：</p>
<div id="martingale-discrete-integration" class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
78.1</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{X_n\}\)</span> 是鞅/下鞅/上鞅，并且 <span class="math inline">\(U_n\geq0\)</span>，则 <span class="math inline">\(I_n(U,X)\)</span> 也是鞅/下鞅/上鞅。</p>
</div>
<p>证明：对下面的恒等式两边关于 <span class="math inline">\(\mathcal{F}_n\)</span> 取条件期望即可。 <span class="math display">\[I_{n+1}(U,X) =
\underbrace{I_{n}(U,X)}_{\in\mathcal{F}_n} +
\underbrace{U_{n+1}}_{\in\mathcal{F}_n}\underbrace{(X_{n+1}-X_{n})}_{\rm
(sub/sup)martingale}.\]</span></p>
<p>我们可以设定两个随机时间，比如 <span class="math inline">\(\sigma\)</span> 是股票首次低于 1 美元的时刻,
这时立刻买入；<span class="math inline">\(\tau\)</span> 是股票首次高于
10 美元的时刻，这时立刻抛出；在区间 <span class="math inline">\((\sigma,\tau]\)</span> 中保持持有股票，即 <span class="math inline">\(U_j=\mathbb{1}_{\sigma&lt;j\leq
\tau}\)</span>。于是 <span class="math inline">\(U_j\mathbb{1}_{n\geq
j}=\mathbb{1}_{(\sigma\wedge n, \tau\wedge n]}(j)\)</span>。</p>
<p>那么净收益 <span class="math display">\[I_n(U,X) = \sum_{j=1}^n
\mathbb{1}_{\sigma\wedge n&lt;j\leq \tau\wedge n}
(X_j-X_{j-1})=X_{\tau\wedge n} - X_{\sigma\wedge n}.\]</span></p>
<p>特别地，取 <span class="math inline">\(\sigma=0\)</span>，则 <span class="math inline">\(U_j=\mathbb{1}_{j\leq\tau}\)</span>，则我们有如下结论：</p>
<div id="stopping-time-also-martingale" class="statement theorem plain">
<p><span class="statement-heading"><span class="statement-label">定理
78.2</span>.</span><span class="statement-spah"> </span>如果 <span class="math inline">\(\{X_n\}\)</span> 是鞅，那么 <span class="math inline">\(\{X_{n\wedge \tau}\}\)</span> 也是鞅。</p>
</div>
<p>证明：首先每一项 <span class="math inline">\(X_{n\wedge
\tau}\)</span> 可以看成是一个关于 <span class="math inline">\(X_1,\ldots,X_n\)</span> 的部分和：</p>
<p><span class="math display">\[X_{n\wedge \tau} =
\sum_{k=0}^n\mathbb{1}_{\tau=k}X_k.\]</span></p>
<p>显然 <span class="math inline">\(X_{n\wedge \tau}\)</span>
是可积的。</p>
<p>另一方面在 <a href="#martingale-discrete-integration" title="定理 78.1">定理 78.1</a> 中取 <span class="math inline">\(U_n=\mathbb{1}_{n\leq\tau}\)</span>，则 <span class="math inline">\(X_{n\wedge \tau} - X_0 = I_n(U,X)\)</span>
仍然是鞅，那么加上一个 <span class="math inline">\(X_0\)</span> 得到的
<span class="math inline">\(X_{n\wedge\tau}\)</span> 当然还是鞅。</p>
<h1 id="hölders-inequality">✅ 49.2 Hölder’s Inequality</h1>
<div id="young----------" class="statement sta_young____ plain unnumbered">
<p><span class="statement-heading"><span class="statement-label">Young
不等式</span>.</span><span class="statement-spah"> </span> 给定 <span class="math inline">\(a,b\ge0\)</span>，<span class="math inline">\(p,q&gt;1\)</span> 且 <span class="math inline">\(\tfrac1p+\tfrac1q=1\)</span>，有 <span class="math display">\[ab\le\frac{a^p}{p}+\frac{b^q}{q}.\]</span>
且当且仅当 <span class="math inline">\(a^p=b^q\)</span> 取等号。</p>
</div>
<p><strong>证明</strong>：对任意 <span class="math inline">\(u,v\ge0\)</span>，<span class="math inline">\(\theta\in(0,1)\)</span>， <span class="math display">\[u^{\theta}v^{1-\theta}\le \theta
u+(1-\theta)v.\]</span> 这是因为 <span class="math inline">\(\ln\)</span> 函数凹，Jensen 不等式给出 <span class="math display">\[\ln(\theta u+(1-\theta)v)\ge \theta\ln
u+(1-\theta)\ln v.\]</span> 两边取指数即得。</p>
<p>取 <span class="math inline">\(\theta=\frac1p,1-\theta=\frac1q,u=a^p,v=b^q\)</span>
代入即得 Young 不等式，且等号当且仅当 <span class="math inline">\(a^p=b^q\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
<p>设 <span class="math inline">\(1/p+1/q=1\)</span>，<span class="math inline">\(1&lt;p,q&lt;\infty\)</span>。对任意 <span class="math inline">\(a,b\ge 0\)</span> 有 <strong>Young 不等式</strong>
<span class="math display">\[ab\le
\frac{a^{p}}{p}+\frac{b^{q}}{q}.\]</span> 令 <span class="math display">\[u(x)=\frac{|f(x)|}{\|f\|_p},\qquad
v(x)=\frac{|g(x)|}{\|g\|_q}.\]</span> 则逐点有 <span class="math display">\[u(x)v(x)\le u(x)^{p}/p+v(x)^{q}/q.\]</span>
两边对 <span class="math inline">\(\mu\)</span> 积分并用 <span class="math inline">\(\int u^{p}=1,\ \int v^{q}=1\)</span> 即得 Hölder
不等式。</p>
<p><span class="math inline">\(p=1,q=\infty\)</span> 时 <span class="math display">\[\int |fg|\le \|g\|_{\infty}\int
|f|=\|f\|_1\|g\|_{\infty}.\]</span> 故结论成立。</p>
<h1 id="versions">51.1 Versions</h1>
<div class="statement definition plain">
<p><span class="statement-heading"><span class="statement-label">定义
80.1</span>.</span><span class="statement-spah"> </span>设 <span class="math inline">\((X_t)_{t\in T}\)</span> 和 <span class="math inline">\((Y_t)_{t\in T}\)</span> 是两个随机过程，如果对任何
<span class="math inline">\(t\)</span> 有 <span class="math inline">\(X_t = Y_t,\,\mathrm{a.e.}\)</span> 成立，就称
<span class="math inline">\((Y_t)\)</span> 是 <span class="math inline">\((X_t)\)</span> 的一个 version/modification。</p>
</div>



                                                    

    
                                            </div>

            </div>
        </div>
    </article>

    


    <section id="comment">
       <script src="https://giscus.app/client.js"
        data-repo="neozhaoliang/neozhaoliang.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNDQ4MTYxMDc="
        data-category="Announcements"
        data-category-id="DIC_kwDOCKG3684CPDuy"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
       </script>
    </section>


</div>

                   
            </main>
            


                <noscript>
    <div class="noscript">
        <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
    </div>
</noscript>
<div class="noscript">
    <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
</div>


<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>

<script>
    (function($) {
        $(document).ready(function() {
            // 隐藏禁用javascript（针对微信内置浏览器）的提示
            $('.noscript').hide();

            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image').not('.card-cover-image').not('.qrcode');

            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed').each(function(i, el) {
                $(this).attr('data-caption', $(this).attr('alt') || ' ');
            }).materialbox();

            // 优化表格的显示
            $('table').each(function() {
                var $table = $(this);
                // 除去多行代码的情况
                if ($table.find('pre').length == 0) {
                    $table.addClass('responsive-table striped bordered');
                }
            });

            // 首页幻灯片
            $('.slider').slider({indicators: true, full_width: true, interval: 8000});

            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();

            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });

            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').add('h4').add('h5').add('h6').scrollSpy();

            // 目录随屏幕滚动（防止目录过长越过footer）
            var $toc = $('.toc');
            var scrollTargetTop = 0;
            $(window).scroll(function() {
                var $activeLink = $toc.find('a.active.section');
                if ($(window).scrollTop() < 100) {
                    scrollTargetTop = 0;
                } else {
                    if ($activeLink[0]) {
                        scrollTargetTop = $activeLink.offset().top - $toc.offset().top;
                    }
                }
                $toc.css('top', '-' + scrollTargetTop + 'px');
            });

            // 修正文章目录的left-border颜色
            var color = $('.table-of-contents-text').css('color');
            $('.table-of-contents-link').css('border-left-color', color);

            // 针对移动端做的优化：FAB按钮点击一下收回
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                $('.fixed-action-btn').addClass('click-to-toggle');
            }
            // 回到顶部
            $('.btn-return-top').click(function() {
                $('body, html').animate({
                    scrollTop: 0
                }, 500);
            });

            // 重置读书页面的Tab标签页的颜色
            $('li.tab a').hover(function() {
                $(this).toggleClass('text-lighten-4');
            });
            $('.indicator').addClass('pink lighten-2');

            

            // 搜索功能
            $('.modal-trigger').leanModal({
                // 打开搜索框时自动聚焦
                ready: function() {
                    if ($('#search').is(":visible")) {
                        $('#search-input').focus();
                    }
                }
            });
            var searchXml = "search.xml";
            if (searchXml.length == 0) {
             	searchXml = "search.xml";
            }
            var searchPath = "/" + searchXml;
            initSearch(searchPath, 'search-input', 'search-result');
        });

        // 初始化搜索与匹配函数
        var initSearch = function(path, search_id, content_id) {
            'use strict';
            $.ajax({
                url: path,
                dataType: "xml",
                success: function(xmlResponse) {
                    // get the contents from search data
                    var datas = $("entry", xmlResponse).map(function() {
                        return {
                            title: $("title", this).text(),
                            content: $("content", this).text(),
                            url: $("url", this).text()
                        };
                    }).get();
                    var $input = document.getElementById(search_id);
                    var $resultContent = document.getElementById(content_id);
                    $input.addEventListener('input', function() {
                        var str = '<ul class=\"search-result-list\">';
                        var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                        $resultContent.innerHTML = "";
                        if (this.value.trim().length <= 0) {
                            return;
                        }
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = true;
                            var content_index = [];
                            var data_title = data.title.trim().toLowerCase();
                            var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                            var data_url = data.url;
                            var index_title = -1;
                            var index_content = -1;
                            var first_occur = -1;
                            // only match artiles with not empty titles and contents
                            if (data_title != '' && data_content != '') {
                                keywords.forEach(function(keyword, i) {
                                    index_title = data_title.indexOf(keyword);
                                    index_content = data_content.indexOf(keyword);
                                    if (index_title < 0 && index_content < 0) {
                                        isMatch = false;
                                    } else {
                                        if (index_content < 0) {
                                            index_content = 0;
                                        }
                                        if (i == 0) {
                                            first_occur = index_content;
                                        }
                                    }
                                });
                            }
                            // show search results
                            if (isMatch) {
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    data_title = data_title.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                });

                                str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                                var content = data.content.trim().replace(/<[^>]+>/g, "");
                                if (first_occur >= 0) {
                                    // cut out 100 characters
                                    var start = first_occur - 20;
                                    var end = first_occur + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (start == 0) {
                                        end = 100;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    var match_content = content.substring(start, end);
                                    // highlight all keywords
                                    keywords.forEach(function(keyword) {
                                        var regS = new RegExp(keyword, "gi");
                                        match_content = match_content.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                    });

                                    str += "<p class=\"search-result\">..." + match_content + "...</p>"
                                }
                                str += "</li>";
                            }
                        });
                        str += "</ul>";
                        $resultContent.innerHTML = str;
                    });
                }
            });
        }
    })(jQuery);
</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>






	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
  		tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
  		tex: 'ams'
		});
	</script>


	

			<script type="text/javascript"
				src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-svg.min.js?config=TeX-AMS_HTML"></script>

			
				

    </body>

    </html>